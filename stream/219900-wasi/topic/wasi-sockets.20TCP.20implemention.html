<html>
<head><meta charset="utf-8"><title>wasi-sockets TCP implemention · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-sockets.20TCP.20implemention.html">wasi-sockets TCP implemention</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="393743474"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-sockets%20TCP%20implemention/near/393743474" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Bakker (badeend) <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-sockets.20TCP.20implemention.html#393743474">(Sep 28 2023 at 14:56)</a>:</h4>
<p><span class="user-mention" data-user-id="253992">@Pat Hickey</span>, <span class="user-mention" data-user-id="254083">@Dan Gohman</span>  I've been working on the wasmtime implementation of TCP sockets. My progress can be found here:<br>
<a href="https://github.com/badeend/wasmtime/tree/tcp-error-checking">https://github.com/badeend/wasmtime/tree/tcp-error-checking</a><br>
I also intend to add cross-platform compatibility fixes and implement a full testsuite for TCP sockets.</p>
<p>I noticed these tracking issues that were assigned two days ago that have overlap with what I've been doing:<br>
<a href="https://github.com/bytecodealliance/wasmtime/issues/7013">https://github.com/bytecodealliance/wasmtime/issues/7013</a><br>
<a href="https://github.com/bytecodealliance/wasmtime/issues/7014">https://github.com/bytecodealliance/wasmtime/issues/7014</a></p>
<p>Just wanted to make sure we're not doing duplicate work</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/badeend/wasmtime/tree/tcp-error-checking" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/960011927dbe9659983ef640de547727ff28cef1\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f626130343466616636643030366236356138303961633038306133646362646565623034336135353161616134303461323861383063393233613261313932322f62616465656e642f7761736d74696d65)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/badeend/wasmtime/tree/tcp-error-checking" title="GitHub - badeend/wasmtime at tcp-error-checking">GitHub - badeend/wasmtime at tcp-error-checking</a></div><div class="message_embed_description">A fast and secure runtime for WebAssembly. Contribute to badeend/wasmtime development by creating an account on GitHub.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/7013" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/eb5829f1faa5fa5a42af1da47cb5e34a215dd612\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f656334356161623638316365326332636531326237616437333034383532646430383866626631303736656266383439323034313535313761643037326664362f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f37303133)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/7013" title="Wasmtime wasi-sockets implementation: Finish sockopt · Issue #7013 · bytecodealliance/wasmtime">Wasmtime wasi-sockets implementation: Finish sockopt · Issue #7013 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">A fast and secure runtime for WebAssembly. Contribute to bytecodealliance/wasmtime development by creating an account on GitHub.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/7014" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/ba1c646c6fb45e9a3dc2a248e1a32154ac8fcce2\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f316239323831643338656132313535656539343630346465313561396664313737383065646166383138313436616161356363613865643266383833316463332f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f37303134)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/7014" title="Wasmtime wasi-sockets implementation: Tests demonstrate portability criteria met · Issue #7014 · bytecodealliance/wasmtime">Wasmtime wasi-sockets implementation: Tests demonstrate portability criteria met · Issue #7014 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">A fast and secure runtime for WebAssembly. Contribute to bytecodealliance/wasmtime development by creating an account on GitHub.</div></div></div>



<a name="393778435"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-sockets%20TCP%20implemention/near/393778435" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-sockets.20TCP.20implemention.html#393778435">(Sep 28 2023 at 18:04)</a>:</h4>
<p>Hi Dave, we put those issues up to track that work is still needed before we can call the implementation "done"</p>



<a name="393778526"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-sockets%20TCP%20implemention/near/393778526" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-sockets.20TCP.20implemention.html#393778526">(Sep 28 2023 at 18:04)</a>:</h4>
<p>Dan and <span class="user-mention" data-user-id="484032">@Roman Volosatovs</span> were going to discuss how to knock out the UDP side of things</p>



<a name="393778874"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-sockets%20TCP%20implemention/near/393778874" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-sockets.20TCP.20implemention.html#393778874">(Sep 28 2023 at 18:05)</a>:</h4>
<p>but as far as the sockopts and test suite goes, we are super happy you are working on those!</p>



<a name="393779022"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-sockets%20TCP%20implemention/near/393779022" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roman Volosatovs <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-sockets.20TCP.20implemention.html#393779022">(Sep 28 2023 at 18:06)</a>:</h4>
<p>Yes, it seems that I should wait for <span class="user-mention" data-user-id="254083">@Dan Gohman</span> to finish resource PR first, right <span class="user-mention" data-user-id="254083">@Dan Gohman</span> ?</p>



<a name="393779224"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-sockets%20TCP%20implemention/near/393779224" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-sockets.20TCP.20implemention.html#393779224">(Sep 28 2023 at 18:07)</a>:</h4>
<p>Yeah, that's my suggestion, because it's a big PR that touches a lot of the files, and changes which traits we implement for stuff.</p>



<a name="393779227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-sockets%20TCP%20implemention/near/393779227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-sockets.20TCP.20implemention.html#393779227">(Sep 28 2023 at 18:07)</a>:</h4>
<p>i am reviewing dan's resource PR right now</p>



<a name="393779308"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-sockets%20TCP%20implemention/near/393779308" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-sockets.20TCP.20implemention.html#393779308">(Sep 28 2023 at 18:07)</a>:</h4>
<p>Alex posted a PR to my PR for the stdio thing, I'm reviewing that now</p>



<a name="393784785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-sockets%20TCP%20implemention/near/393784785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Bakker (badeend) <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-sockets.20TCP.20implemention.html#393784785">(Sep 28 2023 at 18:39)</a>:</h4>
<p>Alright, great!</p>



<a name="393790182"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-sockets%20TCP%20implemention/near/393790182" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-sockets.20TCP.20implemention.html#393790182">(Sep 28 2023 at 19:14)</a>:</h4>
<p>That PR has landed, the CI is now green, and Alex reviewed it, so we're super close now :-)</p>



<a name="394172114"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-sockets%20TCP%20implemention/near/394172114" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Bakker (badeend) <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-sockets.20TCP.20implemention.html#394172114">(Oct 01 2023 at 08:21)</a>:</h4>
<p>The changes I mentioned in my initial comment are ready at: <a href="https://github.com/bytecodealliance/wasmtime/pull/7120">https://github.com/bytecodealliance/wasmtime/pull/7120</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/7120" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/bec844ebc7bcd3040ae6a488f045f5411191c49c\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313031663663366136343534316437623330376131646338316434313139633330316161353136306132356562363232366134666434383261633331316332302f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f37313230)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/7120" title="wasi-sockets: Simplify &amp; clarify TCP errors by badeend · Pull Request #7120 · bytecodealliance/wasmtime">wasi-sockets: Simplify &amp; clarify TCP errors by badeend · Pull Request #7120 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">Allow accept() to return transient errors.
The original provision was added to align with preview3 streams that may only fail once. However, after discussing with Dan Gohman, we came to the conclus...</div></div></div>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>