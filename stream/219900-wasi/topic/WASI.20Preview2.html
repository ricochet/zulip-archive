<html>
<head><meta charset="utf-8"><title>WASI Preview2 · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html">WASI Preview2</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="283903223"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/WASI%20Preview2/near/283903223" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html#283903223">(May 25 2022 at 16:00)</a>:</h4>
<p>I'm starting work on a project I'm calling WASI Preview2, which I hope will become a major update to WASI.</p>



<a name="283903382"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/WASI%20Preview2/near/283903382" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html#283903382">(May 25 2022 at 16:00)</a>:</h4>
<p>The biggest change is to move from witx to wit, and use wit-bindgen, and to build up wasi-libc/wasi-sdk/rust wasi support on top of that.</p>



<a name="287398651"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/WASI%20Preview2/near/287398651" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html#287398651">(Jun 25 2022 at 00:00)</a>:</h4>
<p>The meeting info for the WASI Preview2 presentation is <a href="https://github.com/WebAssembly/meetings/blob/main/wasi/2022/WASI-06-30.md">here</a>.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/meetings/blob/main/wasi/2022/WASI-06-30.md" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/aa69f8a29ea298bee77693927faa3516886d75f6\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f336237323837353365316233346662616439623630336461333031366632663039353235626562636631383031346435656531366235326335373263653638352f576562417373656d626c792f6d656574696e6773)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/meetings/blob/main/wasi/2022/WASI-06-30.md" title="meetings/WASI-06-30.md at main · WebAssembly/meetings">meetings/WASI-06-30.md at main · WebAssembly/meetings</a></div><div class="message_embed_description">WebAssembly meetings (VC or in-person), agendas, and notes - meetings/WASI-06-30.md at main · WebAssembly/meetings</div></div></div>



<a name="287619587"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/WASI%20Preview2/near/287619587" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bailey Hayes <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html#287619587">(Jun 27 2022 at 18:38)</a>:</h4>
<p>Will there be a ppt or slide deck?</p>



<a name="287619873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/WASI%20Preview2/near/287619873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html#287619873">(Jun 27 2022 at 18:40)</a>:</h4>
<p>The slides aren't quite finished yet, but I definitely do plan to add the slides to the meeting notes.</p>



<a name="288064137"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/WASI%20Preview2/near/288064137" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html#288064137">(Jun 30 2022 at 17:50)</a>:</h4>
<p>PR to add the slides to the meeting notes is here: <a href="https://github.com/WebAssembly/meetings/pull/1066">https://github.com/WebAssembly/meetings/pull/1066</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/meetings/pull/1066" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/12e176b6d3be400923d0ac32b0f3ca0722ac8ea3\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f383861333064613665373933336533393431663162373461656161623233313262313663313030663364366230323162326464633033303438633238393235662f576562417373656d626c792f6d656574696e67732f70756c6c2f31303636)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/meetings/pull/1066" title="Add the slides for the WASI Preview2 presentation. by sunfishcode · Pull Request #1066 · WebAssembly/meetings">Add the slides for the WASI Preview2 presentation. by sunfishcode · Pull Request #1066 · WebAssembly/meetings</a></div><div class="message_embed_description">WebAssembly meetings (VC or in-person), agendas, and notes - Add the slides for the WASI Preview2 presentation. by sunfishcode · Pull Request #1066 · WebAssembly/meetings</div></div></div>



<a name="288073186"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/WASI%20Preview2/near/288073186" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html#288073186">(Jun 30 2022 at 19:04)</a>:</h4>
<p>I think a readyness based stream api makes more sense from a determinism, safety and predictability based perspective. The api you suggested allows writing at any point between a read/write and a wait. This is less deterministic as you have to know the exact instruction at whicj the write happened to replay it. It makes it easier to accidentally deallocate a buffer which is still registered as read/write target and it makes it harder for someone trying to read the code to know if some data doesn't get overwritten by a read operation.</p>



<a name="288074396"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/WASI%20Preview2/near/288074396" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html#288074396">(Jun 30 2022 at 19:15)</a>:</h4>
<p>You're correct, the API presented there has the data arriving in the buffer at nondeterministic times. And the user has to keep it allocated and immobile while a read or write is in flight.</p>



<a name="288074677"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/WASI%20Preview2/near/288074677" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html#288074677">(Jun 30 2022 at 19:17)</a>:</h4>
<p>My understanding is that the main idea here is that the low-level stream details here would be hidden in a source language's async runtime.</p>



<a name="288074925"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/WASI%20Preview2/near/288074925" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html#288074925">(Jun 30 2022 at 19:19)</a>:</h4>
<p>I should mention that this stream design is part of the component model, and my presentation here is just showing what it would look like in the core-wasm ABI implemented by engines.</p>



<a name="288075354"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/WASI%20Preview2/near/288075354" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html#288075354">(Jun 30 2022 at 19:23)</a>:</h4>
<p>How would for example tokio be able to abstract over it without forcing a copy?</p>



<a name="288075750"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/WASI%20Preview2/near/288075750" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/WASI.20Preview2.html#288075750">(Jun 30 2022 at 19:26)</a>:</h4>
<p>I myself don't know the plan for that right now. But I do know that this design is being developed in close cooperation with people who have deep Rust async experience.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>