<html>
<head><meta charset="utf-8"><title>ipv6-only (464XLAT/SIIT-DC) 路 wasi 路 Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html">ipv6-only (464XLAT/SIIT-DC)</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="429071442"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429071442" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Soni L. <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429071442">(Mar 23 2024 at 11:06)</a>:</h4>
<p>hello o/ has anyone investigated using IPv6 transition technologies over WASI (and handle them in the libc/language implementation), instead of developing IPv4-specific WASI APIs?</p>



<a name="429432000"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429432000" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Soni L. <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429432000">(Mar 25 2024 at 15:06)</a>:</h4>
<p>like why not remove this and everything related to it from wasi-socket <a href="https://github.com/WebAssembly/wasi-sockets/blob/main/wit/network.wit#L108">https://github.com/WebAssembly/wasi-sockets/blob/main/wit/network.wit#L108</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-sockets/blob/main/wit/network.wit#L108" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/33883f571c91d421d3f58ac2d17fb90b66415990\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f323539306332326365353439303930663238626563636536636339303362363433633266363434393766396166613333343032663034333661313134306630652f576562417373656d626c792f776173692d736f636b657473)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-sockets/blob/main/wit/network.wit#L108" title="wasi-sockets/wit/network.wit at main 路 WebAssembly/wasi-sockets">wasi-sockets/wit/network.wit at main 路 WebAssembly/wasi-sockets</a></div><div class="message_embed_description">WASI API proposal for managing sockets. Contribute to WebAssembly/wasi-sockets development by creating an account on GitHub.</div></div></div>



<a name="429447160"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429447160" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429447160">(Mar 25 2024 at 15:53)</a>:</h4>
<p><span class="user-mention" data-user-id="703786">@Soni L.</span> I can't speak for the actual designers of wasi-sockets but I would imagine the reason here is probably that "compatible with the existing world" takes precedence over "innovate and choose the future-looking position" in this case. Also the required complexity in the runtime: a standard is less successful the more it forces an implementer to build in a ton of complexity just to meet the minimum bar (in this case: 464XLAT would require... a user-space networking stack I think? not super-reasonable)</p>



<a name="429447558"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429447558" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429447558">(Mar 25 2024 at 15:54)</a>:</h4>
<p>I'm personally sympathetic (playing with ipv6 personally since 2002! I even ran my home network ipv6-only for a week once) but... this isn't the place to do that innovation. wit-based WASI is innovating with sandboxing/security and capabilities, it doesn't also need to be "weird" in the way it does network addresses :-)</p>



<a name="429464306"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429464306" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Soni L. <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429464306">(Mar 25 2024 at 16:52)</a>:</h4>
<p>it doesn't require an entire user-space networking stack, it's mostly just API call translation. we can point to <a href="https://website.peterjin.org/wiki/Universal_Relay">https://website.peterjin.org/wiki/Universal_Relay</a> and RFC 6535 as prior art, tho it would certainly require some tweaks before it could be done in wasi.</p>



<a name="429464576"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429464576" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Soni L. <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429464576">(Mar 25 2024 at 16:53)</a>:</h4>
<p>we thought the whole point of WASI 0.2 and the component model was to innovate and choose the future-looking position? it's explicitly no longer coupled to POSIX, at least.</p>



<a name="429482470"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429482470" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429482470">(Mar 25 2024 at 18:19)</a>:</h4>
<p><span class="user-mention" data-user-id="703786">@Soni L.</span> I can offer that it would be good to try to avoid tacit assumptions and absolutisms -- innovation and forward-looking design doesn't have to mean taking stances that would create serious speedbumps and confusion with everyday adopters, and doesn't have to mean that every identifiable axis of design maximizes the innovation knob. It's not very helpful to question any pragmatic choice with "we thought the whole point was to innovate" -- deep, careful thought goes into these APIs. <span class="user-mention" data-user-id="254083">@Dan Gohman</span> might be able to say more about IPv4 and design philosophy here?</p>



<a name="429485140"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429485140" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Bakker (badeend) <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429485140">(Mar 25 2024 at 18:36)</a>:</h4>
<blockquote>
<p>instead of developing IPv4-specific WASI APIs?</p>
</blockquote>
<p>Which API's are IPv4 specific?</p>



<a name="429485340"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429485340" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Bakker (badeend) <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429485340">(Mar 25 2024 at 18:37)</a>:</h4>
<p>And if those exist, why would that be a problem?</p>



<a name="429485794"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429485794" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Soni L. <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429485794">(Mar 25 2024 at 18:40)</a>:</h4>
<p>ppl already don't bother to implement ipv6 as it is, because they think they don't/won't need it. removing the option to not implement ipv6 makes things easier.</p>



<a name="429489030"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429489030" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Bakker (badeend) <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429489030">(Mar 25 2024 at 19:01)</a>:</h4>
<p>As it stands today, wasi-sockets is already agnostic to IP versions. This can be observed by e.g. the absence of distinct IP_* and IPV6_* socket options. So, in that aspect, IPv6 support already comes along "for free".</p>
<p>However, regardless of what API WASI exposes, the first thing libc is going to do is translate it back into a POSIX interface. Every additional layer of abstraction we introduce is going to be an uphill battle from both ways; once for the host, and once for the guest.</p>
<p>In general, I think "the problem" with IPv6 is <em>the real world</em>, not so much how WASI exposes it.</p>



<a name="429491244"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429491244" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Soni L. <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429491244">(Mar 25 2024 at 19:14)</a>:</h4>
<p>there is actually a lot of incentive for ipv6 in the real world nowadays, especially since aws started charging for ipv4</p>
<p>but for wasi, the best you can do is make it easy for the guest to use ipv6, and hard for the host to refuse ipv6</p>



<a name="429492271"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429492271" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Bakker (badeend) <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429492271">(Mar 25 2024 at 19:21)</a>:</h4>
<blockquote>
<p>for wasi, the best you can do is make it easy for the guest to use ipv6</p>
</blockquote>
<p>Agree :)</p>



<a name="429507947"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429507947" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429507947">(Mar 25 2024 at 20:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="378155">Dave Bakker (badeend)</span> <a href="#narrow/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29/near/429492271">said</a>:</p>
<blockquote>
<blockquote>
<p>for wasi, the best you can do is make it easy for the guest to use ipv6</p>
</blockquote>
<p>Agree :)</p>
</blockquote>
<p>Agree too :)</p>



<a name="429517694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429517694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Soni L. <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429517694">(Mar 25 2024 at 21:54)</a>:</h4>
<p>uh. currently the guest has to support ipv4 and ipv6 separately.</p>



<a name="429531977"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429531977" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429531977">(Mar 26 2024 at 00:09)</a>:</h4>
<p>WASI isn't an advantageous place to push back on guest sockets code, because a lot of guest sockets code will be written to use source languages' standard library APIs rather than wasi-sockets directly. If WASI did anything that made v4 harder to use, we'd just be creating barriers to languages supporting WASI, not motivating applications to switch from v4 to v6.</p>



<a name="429532568"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/ipv6-only%20%28464XLAT/SIIT-DC%29/near/429532568" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Soni L. <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/ipv6-only.20.28464XLAT.2FSIIT-DC.29.html#429532568">(Mar 26 2024 at 00:15)</a>:</h4>
<p>yes, most standard libraries would just patch it over, and that's not necessarily a bad thing. we are still trying to push for ipv6-only OSes/kernels, and if you already have the ipv6-only OS support in your stdlib due to wasi, porting to these becomes trivial. (assuming you're not using the OS libc for some reason.)</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>