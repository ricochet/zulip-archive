<html>
<head><meta charset="utf-8"><title>✔ Changes to wasmtime 14.0.0 WasiCtxBuilder stdout/stderr... · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20Changes.20to.20wasmtime.2014.2E0.2E0.20WasiCtxBuilder.20stdout.2Fstderr.2E.2E.2E.html">✔ Changes to wasmtime 14.0.0 WasiCtxBuilder stdout/stderr...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="397844313"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20Changes%20to%20wasmtime%2014.0.0%20WasiCtxBuilder%20stdout/stderr.../near/397844313" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Backhouse <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20Changes.20to.20wasmtime.2014.2E0.2E0.20WasiCtxBuilder.20stdout.2Fstderr.2E.2E.2E.html#397844313">(Oct 21 2023 at 11:53)</a>:</h4>
<p>Changes to wasmtime 14.0.0 WasiCtxBuilder stdout/stderr methods</p>
<p>I'm trying to migrate to v14 from v13 and am struggling getting the code I currently have to adopt. </p>
<p>Version 13 allowed me to pass an AsyncWriteStream to the stdout and stderr methods but v14 has changed the type from HostOutputStream to StdoutStream which AsyncWriteStream does not implement.</p>
<p>Does anyone have suggestions on how best to adopt allowing me to continue setting stdout and stderr to my own pathed files ?</p>
<p>Thanks</p>



<a name="397859775"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20Changes%20to%20wasmtime%2014.0.0%20WasiCtxBuilder%20stdout/stderr.../near/397859775" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20Changes.20to.20wasmtime.2014.2E0.2E0.20WasiCtxBuilder.20stdout.2Fstderr.2E.2E.2E.html#397859775">(Oct 21 2023 at 15:46)</a>:</h4>
<p>Here's what we did in Spin:<br>
<a href="https://github.com/fermyon/spin/blob/12becdcc33b6e59bb3aea3dd511f24616a239852/crates/core/src/store.rs#L12-L14">https://github.com/fermyon/spin/blob/12becdcc33b6e59bb3aea3dd511f24616a239852/crates/core/src/store.rs#L12-L14</a><br>
<a href="https://github.com/fermyon/spin/blob/12becdcc33b6e59bb3aea3dd511f24616a239852/crates/core/src/store.rs#L445-L459">https://github.com/fermyon/spin/blob/12becdcc33b6e59bb3aea3dd511f24616a239852/crates/core/src/store.rs#L445-L459</a><br>
<a href="https://github.com/fermyon/spin/blob/12becdcc33b6e59bb3aea3dd511f24616a239852/crates/core/src/store.rs#L224-L226">https://github.com/fermyon/spin/blob/12becdcc33b6e59bb3aea3dd511f24616a239852/crates/core/src/store.rs#L224-L226</a></p>



<a name="397929346"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20Changes%20to%20wasmtime%2014.0.0%20WasiCtxBuilder%20stdout/stderr.../near/397929346" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Backhouse <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20Changes.20to.20wasmtime.2014.2E0.2E0.20WasiCtxBuilder.20stdout.2Fstderr.2E.2E.2E.html#397929346">(Oct 22 2023 at 09:21)</a>:</h4>
<p>Thanks !! That worked great.</p>



<a name="397929351"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20Changes%20to%20wasmtime%2014.0.0%20WasiCtxBuilder%20stdout/stderr.../near/397929351" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20Changes.20to.20wasmtime.2014.2E0.2E0.20WasiCtxBuilder.20stdout.2Fstderr.2E.2E.2E.html#397929351">(Oct 22 2023 at 09:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="634674">Richard Backhouse</span> has marked this topic as resolved.</p>



<a name="398778778"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20Changes%20to%20wasmtime%2014.0.0%20WasiCtxBuilder%20stdout/stderr.../near/398778778" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20Changes.20to.20wasmtime.2014.2E0.2E0.20WasiCtxBuilder.20stdout.2Fstderr.2E.2E.2E.html#398778778">(Oct 26 2023 at 22:51)</a>:</h4>
<p>Just a quick note that the <code>MyStdoutStream</code> I linked to above doesn't work for composed components (i.e. components that have two or more subcomponents) since each one will need its own handle to each stdio stream.  We just discovered this while experimenting with <code>wasm-compose</code> and will update the code to allow <code>MyStdoutStream::stream</code> to be called more than once.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>