<html>
<head><meta charset="utf-8"><title>wasmtime-rust · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasmtime-rust.html">wasmtime-rust</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="260445082"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasmtime-rust/near/260445082" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Park <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasmtime-rust.html#260445082">(Nov 05 2021 at 18:23)</a>:</h4>
<p>Is this crate still supported?    When I use the latest version of it (0.27.0) in conjunction with wasmtime 0.31.0 and wasmtime-wasi 0.31.0, I get a package version conflict:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">fiber</span><span class="err">`</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">27.0</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">satisfies</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"^0.27.0"</span><span class="err">`</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">rust</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">27.0</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">satisfies</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">rust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"^0.27"</span><span class="err">`</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">`</span><span class="n">test</span><span class="o">-</span><span class="n">app</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">timothypark</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">app</span><span class="p">)</span><span class="err">`</span><span class="w"></span>
<span class="n">versions</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">meet</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">requirements</span><span class="w"> </span><span class="err">`</span><span class="o">^</span><span class="mf">0.27.0</span><span class="err">`</span><span class="w"> </span><span class="n">are</span>: <span class="mf">0.27.0</span><span class="w"></span>

<span class="n">the</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">fiber</span><span class="err">`</span><span class="w"> </span><span class="n">links</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">native</span><span class="w"> </span><span class="n">library</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">fiber</span><span class="o">-</span><span class="n">shims</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">conflicts</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">links</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">fiber</span><span class="o">-</span><span class="n">shims</span><span class="err">`</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">well</span>:
<span class="nc">package</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">fiber</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">31.0</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">satisfies</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">fiber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=0.31.0"</span><span class="err">`</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">31.0</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">satisfies</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"^0.31"</span><span class="err">`</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">`</span><span class="n">test</span><span class="o">-</span><span class="n">app</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">tpark</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">app</span><span class="p">)</span><span class="err">`</span><span class="w"></span>
<span class="n">Only</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">links</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">helps</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">native</span><span class="w"> </span><span class="n">library</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">linked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kr">final</span><span class="w"> </span><span class="n">binary</span><span class="p">.</span><span class="w"> </span><span class="n">Try</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">adjust</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">dependencies</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">links</span><span class="w"> </span><span class="o">='</span><span class="na">wasmtime</span><span class="o">-</span><span class="n">fiber</span><span class="o">'</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">https</span>:<span class="c1">//doc.rust-lang.org/cargo/reference/resolver.html#links.</span>

<span class="n">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">fiber</span><span class="err">`</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">resolve</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">conflict</span><span class="w"></span>
</code></pre></div>
<p>Naturally, let me also know if I am holding it wrong?  <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="260445811"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasmtime-rust/near/260445811" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasmtime-rust.html#260445811">(Nov 05 2021 at 18:29)</a>:</h4>
<p>The <code>wasmtime-rust</code> crate was a very old imagining of how the developer experience might be easier for Rust users. It was finally removed in <a href="https://github.com/bytecodealliance/wasmtime/pull/2942">Wasmtime PR #2942</a> and so it's not really supported with recent Wasmtime versions. The Wasmtime API now has <code>Linker</code> which has some ergonomics around instantiating modules and getting their exports. Additionally, the <a href="https://github.com/bytecodealliance/witx-bindgen">witx-bindgen</a> crate (soon to be renamed <code>wai-bindgen</code> for "webassembly interface bindings generator") is the current design around using interface types such as strings.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/2942" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/906f3a053efb8e166d8a5042cf5e06348138a19c\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f383038353266653265613832393430653333666333323630376439373031303734363236653063373265663533663637343938333631613961343731353239382f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f32393432)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/2942" title="Remove long-outdated `misc/rust` crate by alexcrichton · Pull Request #2942 · bytecodealliance/wasmtime">Remove long-outdated `misc/rust` crate by alexcrichton · Pull Request #2942 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">I had no idea this was still in the repository, much less building!
There are much different ways to use wasmtime in Rust nowadays, such as
the wasmtime crate!</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/witx-bindgen" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/bb9da05dde1f0beb1d4900c250b05f5d2a365223\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f663433663766643262373566306136626362383635323939326133383266363430653234663765326431316130623430333864656561303538343164393737392f62797465636f6465616c6c69616e63652f776974782d62696e6467656e)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/witx-bindgen" title="GitHub - bytecodealliance/witx-bindgen: A language binding generator for `witx` (a precursor to WebAssembly interface types)">GitHub - bytecodealliance/witx-bindgen: A language binding generator for `witx` (a precursor to WebAssembly interface types)</a></div><div class="message_embed_description">A language binding generator for `witx` (a precursor to WebAssembly interface types) - GitHub - bytecodealliance/witx-bindgen: A language binding generator for `witx` (a precursor to WebAssembly in...</div></div></div>



<a name="260446530"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasmtime-rust/near/260446530" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Park <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasmtime-rust.html#260446530">(Nov 05 2021 at 18:35)</a>:</h4>
<p>Ok - thanks <span class="user-mention" data-user-id="253989">@Peter Huene</span> for the confirmation - still lots of material floating around that references these old crates.</p>



<a name="260447468"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasmtime-rust/near/260447468" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasmtime-rust.html#260447468">(Nov 05 2021 at 18:43)</a>:</h4>
<p>Yeah there was a blitz of "look at this all this cool stuff we will be able to do someday" type blog posts about two years back that is now woefully out of date with the progress being made both by Wasmtime but also with the standards body</p>



<a name="260455172"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasmtime-rust/near/260455172" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Park <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasmtime-rust.html#260455172">(Nov 05 2021 at 19:44)</a>:</h4>
<p>Yes - to that - is there anything written down (or even just code samples) that single step you through how to use a .witx file  to generate exports for a library and consume that with an import?</p>



<a name="260508569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasmtime-rust/near/260508569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Till Schneidereit <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasmtime-rust.html#260508569">(Nov 06 2021 at 11:44)</a>:</h4>
<p>Not yet, but we're working on it!</p>



<a name="260706876"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasmtime-rust/near/260706876" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Park <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasmtime-rust.html#260706876">(Nov 08 2021 at 19:32)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="234973">@Till Schneidereit</span>  -  if there is an issue for this that describes how you would like to land that I would be happy to help as well with a PR!</p>



<a name="260788281"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasmtime-rust/near/260788281" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Till Schneidereit <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasmtime-rust.html#260788281">(Nov 09 2021 at 12:09)</a>:</h4>
<p>Unfortunately there isn't right now—this is still all in an exploratory stage where we're trying to figure out what the shape of things should roughly be <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>