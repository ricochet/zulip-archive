<html>
<head><meta charset="utf-8"><title>✔ can&#x27;t compile wasmtime-cli · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20can.27t.20compile.20wasmtime-cli.html">✔ can&#x27;t compile wasmtime-cli</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="435767199"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20can%27t%20compile%20wasmtime-cli/near/435767199" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Ieni <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20can.27t.20compile.20wasmtime-cli.html#435767199">(Apr 27 2024 at 15:38)</a>:</h4>
<p>Hi, I'm trying to compile wasmtime but I get an error.<br>
Am I missing a step to generate some code?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cli</span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="w"> </span><span class="n">v21</span><span class="p">.</span><span class="mf">0.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">marcoieni</span><span class="o">/</span><span class="n">me</span><span class="o">/</span><span class="n">proj</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="p">)</span>
<span class="n">warning</span>: <span class="nc">wasmtime</span><span class="o">-</span><span class="n">cli</span><span class="o">@</span><span class="mf">21.0.0</span>: <span class="nc">The</span><span class="w"> </span><span class="n">spec</span><span class="w"> </span><span class="n">testsuite</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">disabled</span><span class="p">.</span><span class="w"> </span><span class="n">To</span><span class="w"> </span><span class="n">enable</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">git</span><span class="w"> </span><span class="n">submodule</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="o">--</span><span class="n">remote</span><span class="err">`</span><span class="p">.</span>
<span class="n">warning</span>: <span class="nc">wasmtime</span><span class="o">-</span><span class="n">cli</span><span class="o">@</span><span class="mf">21.0.0</span>: <span class="nc">The</span><span class="w"> </span><span class="n">spec</span><span class="w"> </span><span class="n">testsuite</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">disabled</span><span class="p">.</span><span class="w"> </span><span class="n">To</span><span class="w"> </span><span class="n">enable</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">git</span><span class="w"> </span><span class="n">submodule</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="o">--</span><span class="n">remote</span><span class="err">`</span><span class="p">.</span>
<span class="n">error</span><span class="p">[</span><span class="n">E0407</span><span class="p">]</span>: <span class="nc">method</span><span class="w"> </span><span class="err">`</span><span class="n">init_execution_context</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">member</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">gen</span>::<span class="n">inference</span>::<span class="n">Host</span><span class="err">`</span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="nc">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">wit</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">75</span>:<span class="mi">5</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">75</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">/</span><span class="w">     </span><span class="k">fn</span> <span class="nf">init_execution_context</span><span class="p">(</span>
<span class="mi">76</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span>
<span class="mi">77</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">graph_id</span>: <span class="nc">gen</span>::<span class="n">graph</span>::<span class="n">Graph</span><span class="p">,</span>
<span class="mi">78</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">wasmtime</span>::<span class="nb">Result</span><span class="o">&lt;</span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">gen</span>::<span class="n">inference</span>::<span class="n">GraphExecutionContext</span><span class="p">,</span><span class="w"> </span><span class="n">gen</span>::<span class="n">errors</span>::<span class="n">Error</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="o">..</span><span class="p">.</span><span class="w">  </span><span class="o">|</span>
<span class="mi">86</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="nb">Ok</span><span class="p">(</span><span class="nb">Ok</span><span class="p">(</span><span class="n">exec_context_id</span><span class="p">))</span>
<span class="mi">87</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="p">}</span>
<span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="n">_____</span><span class="o">^</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">member</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">gen</span>::<span class="n">inference</span>::<span class="n">Host</span><span class="err">`</span>
</code></pre></div>



<a name="435783865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20can%27t%20compile%20wasmtime-cli/near/435783865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20can.27t.20compile.20wasmtime-cli.html#435783865">(Apr 27 2024 at 19:26)</a>:</h4>
<p>The <code>wasi-nn</code> spec is sourced via a git submodule, which might be out of date with the implementation in your local wasmtime repo. Does a <code>git submodule update --init</code> help?</p>



<a name="435787074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20can%27t%20compile%20wasmtime-cli/near/435787074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Ieni <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20can.27t.20compile.20wasmtime-cli.html#435787074">(Apr 27 2024 at 20:23)</a>:</h4>
<p>that worked, thanks! Should we add this somewhere in the readme maybe?</p>



<a name="435791892"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20can%27t%20compile%20wasmtime-cli/near/435791892" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20can.27t.20compile.20wasmtime-cli.html#435791892">(Apr 27 2024 at 21:46)</a>:</h4>
<p>It's currently documented here: <a href="https://docs.wasmtime.dev/contributing-building.html#git-submodules">https://docs.wasmtime.dev/contributing-building.html#git-submodules</a></p>



<a name="435791911"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20can%27t%20compile%20wasmtime-cli/near/435791911" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20can.27t.20compile.20wasmtime-cli.html#435791911">(Apr 27 2024 at 21:46)</a>:</h4>
<p>which is linked to in the README under the <code>Contributing</code> header</p>



<a name="435871874"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20can%27t%20compile%20wasmtime-cli/near/435871874" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Ieni <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20can.27t.20compile.20wasmtime-cli.html#435871874">(Apr 28 2024 at 12:39)</a>:</h4>
<p>Oh nice. I was pair programming with a friend of mine, and neither I nor I found it. I wonder if this command could be run from <code>build.rs</code> to avoid requiring this manual step <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span><br>
Anyway, thank you for your help :)</p>



<a name="435871875"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20can%27t%20compile%20wasmtime-cli/near/435871875" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20can.27t.20compile.20wasmtime-cli.html#435871875">(Apr 28 2024 at 12:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="713575">Marco Ieni</span> has marked this topic as resolved.</p>



<a name="435901614"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20can%27t%20compile%20wasmtime-cli/near/435901614" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20can.27t.20compile.20wasmtime-cli.html#435901614">(Apr 28 2024 at 19:01)</a>:</h4>
<p>multiple redirects isn't the easiest way to discover things, I agree.</p>



<a name="436742537"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20can%27t%20compile%20wasmtime-cli/near/436742537" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Brown <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20can.27t.20compile.20wasmtime-cli.html#436742537">(May 02 2024 at 17:28)</a>:</h4>
<p><span class="user-mention" data-user-id="713575">@Marco Ieni</span>, I just saw this issue and had been thinking of doing this for a bit: the only reason wasi-nn pulls from a submodule is because other WASI crates did so. But they've moved toward duplicating the WIT files in-tree so I decided that would be good here as well. The following change removes the submodule you ran into: <a href="https://github.com/bytecodealliance/wasmtime/pull/8519">https://github.com/bytecodealliance/wasmtime/pull/8519</a>. Hopefully that removes this common "forgot to pull submodules" trip-up!</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/8519" style="background-image: url(&quot;https://uploads.zulipusercontent.net/ae9cf54ecb85fe0fe2e526bcbf9f402018efb3c4/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f663630623939636362373364383630323236653633343565353564323331386361316163353439313063646536393862303361343839336637366562306661332f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f38353139&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/8519" title="wasi-nn: remove Git submodule by abrown · Pull Request #8519 · bytecodealliance/wasmtime">wasi-nn: remove Git submodule by abrown · Pull Request #8519 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">To more closely align with the conventions in the wasmtime-wasi and wasmtime-wasi-http crates, this change removes the Git submodule that previously provided the WIT and WITX files for wasmtime-was...</div></div></div>



<a name="436766497"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20can%27t%20compile%20wasmtime-cli/near/436766497" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Ieni <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20can.27t.20compile.20wasmtime-cli.html#436766497">(May 02 2024 at 19:53)</a>:</h4>
<p>that's great, thank you <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>