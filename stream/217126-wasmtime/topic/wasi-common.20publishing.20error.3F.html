<html>
<head><meta charset="utf-8"><title>wasi-common publishing error? · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasi-common.20publishing.20error.3F.html">wasi-common publishing error?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="203344083"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasi-common%20publishing%20error%3F/near/203344083" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasi-common.20publishing.20error.3F.html#203344083">(Jul 09 2020 at 01:54)</a>:</h4>
<p>It appears <a href="https://github.com/bytecodealliance/wasmtime/commit/f47133b229f420d82fa0a2abe06589d172049ec6">https://github.com/bytecodealliance/wasmtime/commit/f47133b229f420d82fa0a2abe06589d172049ec6</a> is tagged with <code>v0.18.0</code>, but the changes to wasi-common don't appear in the <code>0.18.0</code> crate on <a href="http://crates.io">crates.io</a>.  <span class="user-mention" data-user-id="253994">@Alex Crichton</span>  any ideas?</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/commit/f47133b229f420d82fa0a2abe06589d172049ec6" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/commit/f47133b229f420d82fa0a2abe06589d172049ec6" title="Allow different Handles to act as stdio (#1600) · bytecodealliance/wasmtime@f47133b">Allow different Handles to act as stdio (#1600) · bytecodealliance/wasmtime@f47133b</a></div><div class="message_embed_description">* Allow any type which implements Handle to act as stdio

There have been requests to allow more than just raw OS handles to
act as stdio in `wasi-common`. This commit makes this possible by
lo...</div></div></div>



<a name="203344096"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasi-common%20publishing%20error%3F/near/203344096" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasi-common.20publishing.20error.3F.html#203344096">(Jul 09 2020 at 01:54)</a>:</h4>
<p>The krustlet folks noticed it when trying to update to 0.18.0 to get the WASI <code>proc_exit</code> trap fix (see <a href="https://github.com/deislabs/krustlet/pull/319">https://github.com/deislabs/krustlet/pull/319</a>)</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/deislabs/krustlet/pull/319" style="background-image: url(https://avatars1.githubusercontent.com/u/44041561?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/deislabs/krustlet/pull/319" title="Fix kubelet exit on module failure by itowlson · Pull Request #319 · deislabs/krustlet">Fix kubelet exit on module failure by itowlson · Pull Request #319 · deislabs/krustlet</a></div><div class="message_embed_description">There is an issue where if a WASM module fails (for example, with Rust source, if main returns an Err), it takes down the entire krustlet-wasi process.  This fixes that issue: now, if a module fail...</div></div></div>



<a name="203390912"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasi-common%20publishing%20error%3F/near/203390912" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasi-common.20publishing.20error.3F.html#203390912">(Jul 09 2020 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="253989">@Peter Huene</span> hm IIRC the 0.18.0 tag I pushed manually a few weeks after the <a href="http://crates.io">crates.io</a> publish b/c I think it was accidentally forgotten, but maybe I tagged the wrong commit?</p>



<a name="203390958"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasi-common%20publishing%20error%3F/near/203390958" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasi-common.20publishing.20error.3F.html#203390958">(Jul 09 2020 at 14:19)</a>:</h4>
<p>I tagged what I thought was the published  commit but the disconnect may mean that the tag and <a href="http://crates.io">crates.io</a> differ</p>



<a name="203411063"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasi-common%20publishing%20error%3F/near/203411063" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasi-common.20publishing.20error.3F.html#203411063">(Jul 09 2020 at 16:49)</a>:</h4>
<p>Given the PR was merged on June 9th and the crate was published on June 11th, I'd expect the changes to be there unless the crate wasn't published from HEAD</p>



<a name="203411784"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasi-common%20publishing%20error%3F/near/203411784" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasi-common.20publishing.20error.3F.html#203411784">(Jul 09 2020 at 16:55)</a>:</h4>
<p>Erm correction. I was looking at wasmtime's publish date. wasi-common was the 9th, so that likely explains why it's missing for that crate and we published (and tagged) wasmtime's off a later commit?</p>



<a name="203411884"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/wasi-common%20publishing%20error%3F/near/203411884" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/wasi-common.20publishing.20error.3F.html#203411884">(Jul 09 2020 at 16:56)</a>:</h4>
<p>Weird that the publish dates were different</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>