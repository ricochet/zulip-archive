<html>
<head><meta charset="utf-8"><title>Debugging: variable values not available? · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.3A.20variable.20values.20not.20available.3F.html">Debugging: variable values not available?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="286834383"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%3A%20variable%20values%20not%20available%3F/near/286834383" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Vetere <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.3A.20variable.20values.20not.20available.3F.html#286834383">(Jun 20 2022 at 19:56)</a>:</h4>
<p>Hi.  I've seen this topic mentioned here before, and am hoping someone can help me better understand the reason for the behavior.</p>
<p>The symptom is that when I am running a Wasm program in a debugger (I've tried both GDB and LLDB), I am unable to inspect the value of local variables.  The names are visible, but the value shows as "optimized out" or "not available".  I've verified that the module I am using has been compiled in debug mode, and that wasmtime is configured for "debug_info". </p>
<p>I found a related bug report from a few months ago (<a href="https://github.com/bytecodealliance/wasmtime/issues/3884">https://github.com/bytecodealliance/wasmtime/issues/3884</a>), which seems to say that it did indeed work once.</p>
<p>The context for my question is that I writing some documentation to explain a possible development workflow for creating server-side Wasm modules, and one of the subjects I'd like to touch on is debugging.  My readers are going to be surprised that local variable values are unavailable, and I'd like to explain why at a very high level (even if only to give an assurance that it will be fixed soon).</p>
<p>Thanks!<br>
Pete</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/3884" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/9018e730a1bdf23bacafb2653241cf6a4e79d94d\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f653265356162363838623065353363313731643833386637633166636130373162383139633739626631336137333332646439656232316430323663623737352f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f33383834)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/3884" title="Debugging module with lldb shows local variables as not available · Issue #3884 · bytecodealliance/wasmtime">Debugging module with lldb shows local variables as not available · Issue #3884 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">Test Case test.wasm.zip #include &lt;stdio.h&gt; int main() { int i; for(i = 0; i &lt; 5; i++) { printf(&quot;%d\n&quot;, i); } return 0; } compiled with: wasi-sdk-14.0/bin/clang -g -O0 test.c -o t...</div></div></div>



<a name="286838501"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%3A%20variable%20values%20not%20available%3F/near/286838501" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.3A.20variable.20values.20not.20available.3F.html#286838501">(Jun 20 2022 at 20:57)</a>:</h4>
<p>In general the LLDB/GDB DWARF debugging support from Wasmtime is quite experimental and hasn't really seen much development since it was first added. There are likely bugs with it and you're probably running into such a bug here. It would be good to categorize these test cases perhaps but otherwise I wouldn't rely on the current support too much since it likely needs improvement to be more robust.</p>



<a name="286839486"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%3A%20variable%20values%20not%20available%3F/near/286839486" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Vetere <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.3A.20variable.20values.20not.20available.3F.html#286839486">(Jun 20 2022 at 21:10)</a>:</h4>
<p>Completely reasonable answer.  Thank you so much; I'll convey that message.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>