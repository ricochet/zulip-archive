<html>
<head><meta charset="utf-8"><title>✔ how to get memory in wrapped host Func? · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20how.20to.20get.20memory.20in.20wrapped.20host.20Func.3F.html">✔ how to get memory in wrapped host Func?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="270502175"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20how%20to%20get%20memory%20in%20wrapped%20host%20Func%3F/near/270502175" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Braden McDorman <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20how.20to.20get.20memory.20in.20wrapped.20host.20Func.3F.html#270502175">(Feb 03 2022 at 05:18)</a>:</h4>
<p>Hi, I have a Rust function I'm wrapping that needs access to the caller's memory. One of the arguments to the function is a guest pointer (not in the wiggle sense, but a raw <code>u32</code>). Right now I'm storing the <code>Memory</code> in the <code>WasiCtx</code> <code>table</code> to be looked up through the <code>Caller</code> I receive as a parameter. This seems like a hack, though. Is there a better way to go about this? Instantiation order (the instance is exporting the memory) means I can't pass it in through the closure.</p>



<a name="270502410"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20how%20to%20get%20memory%20in%20wrapped%20host%20Func%3F/near/270502410" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20how.20to.20get.20memory.20in.20wrapped.20host.20Func.3F.html#270502410">(Feb 03 2022 at 05:22)</a>:</h4>
<p>I think the last example here might help <a href="https://docs.rs/wasmtime/latest/wasmtime/struct.Func.html#examples-2">https://docs.rs/wasmtime/latest/wasmtime/struct.Func.html#examples-2</a></p>



<a name="270502563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20how%20to%20get%20memory%20in%20wrapped%20host%20Func%3F/near/270502563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Braden McDorman <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20how.20to.20get.20memory.20in.20wrapped.20host.20Func.3F.html#270502563">(Feb 03 2022 at 05:25)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="253994">@Alex Crichton</span> . <span aria-label="weary" class="emoji emoji-1f629" role="img" title="weary">:weary:</span> I don't know how I missed the <code>get_export</code> function on <code>Caller</code>.</p>



<a name="270502618"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20how%20to%20get%20memory%20in%20wrapped%20host%20Func%3F/near/270502618" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20how.20to.20get.20memory.20in.20wrapped.20host.20Func.3F.html#270502618">(Feb 03 2022 at 05:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="474343">Braden McDorman</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>