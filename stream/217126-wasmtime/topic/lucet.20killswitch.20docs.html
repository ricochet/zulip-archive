<html>
<head><meta charset="utf-8"><title>lucet killswitch docs · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/lucet.20killswitch.20docs.html">lucet killswitch docs</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="194330287"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/lucet%20killswitch%20docs/near/194330287" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/lucet.20killswitch.20docs.html#194330287">(Apr 16 2020 at 16:20)</a>:</h4>
<p><span class="user-mention" data-user-id="254006">@Andy Wortman</span> just wrote up these docs on lucet's killswitch mechanism: <a href="https://github.com/bytecodealliance/lucet/blob/master/docs/src/lucet-runtime/killswitch.md" title="https://github.com/bytecodealliance/lucet/blob/master/docs/src/lucet-runtime/killswitch.md">https://github.com/bytecodealliance/lucet/blob/master/docs/src/lucet-runtime/killswitch.md</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/lucet/blob/master/docs/src/lucet-runtime/killswitch.md" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/lucet/blob/master/docs/src/lucet-runtime/killswitch.md" title="bytecodealliance/lucet">bytecodealliance/lucet</a></div><div class="message_embed_description">Lucet, the Sandboxing WebAssembly Compiler. Contribute to bytecodealliance/lucet development by creating an account on GitHub.</div></div></div>



<a name="194330334"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/lucet%20killswitch%20docs/near/194330334" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/lucet.20killswitch.20docs.html#194330334">(Apr 16 2020 at 16:20)</a>:</h4>
<p>(apropos discussion in the weekly meeting)</p>



<a name="194330773"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/lucet%20killswitch%20docs/near/194330773" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Till Schneidereit <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/lucet.20killswitch.20docs.html#194330773">(Apr 16 2020 at 16:23)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="253994">@Alex Crichton</span></p>



<a name="194365888"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/lucet%20killswitch%20docs/near/194365888" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/lucet.20killswitch.20docs.html#194365888">(Apr 16 2020 at 20:52)</a>:</h4>
<p><span class="user-mention" data-user-id="253992">@Pat Hickey</span> this is a pretty cool writeup, thanks for sharing! I think that the support implemented in <a href="https://github.com/bytecodealliance/wasmtime/pull/1490" title="https://github.com/bytecodealliance/wasmtime/pull/1490">https://github.com/bytecodealliance/wasmtime/pull/1490</a> is both sort of orthogonal and related to what y'all are doing.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/1490" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/1490" title="Implement interrupting wasm code, reimplement stack overflow by alexcrichton · Pull Request #1490 · bytecodealliance/wasmtime">Implement interrupting wasm code, reimplement stack overflow by alexcrichton · Pull Request #1490 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This commit is a relatively large change for wasmtime with two main
goals:


Primarily this enables interrupting executing wasm code with a trap,
preventing infinite loops in wasm code. Note that r...</div></div></div>



<a name="194365938"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/lucet%20killswitch%20docs/near/194365938" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/lucet.20killswitch.20docs.html#194365938">(Apr 16 2020 at 20:53)</a>:</h4>
<p>the main thing I see is that SIGALRM isn't needed with a technique like <a href="https://github.com/bytecodealliance/wasmtime/pull/1490" title="https://github.com/bytecodealliance/wasmtime/pull/1490">https://github.com/bytecodealliance/wasmtime/pull/1490</a> (where the wasm code is instrumented), but otherwise it looks like y'all are handling a lot of the complexity with returning from host calls and interrupting that</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/1490" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/1490" title="Implement interrupting wasm code, reimplement stack overflow by alexcrichton · Pull Request #1490 · bytecodealliance/wasmtime">Implement interrupting wasm code, reimplement stack overflow by alexcrichton · Pull Request #1490 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This commit is a relatively large change for wasmtime with two main
goals:


Primarily this enables interrupting executing wasm code with a trap,
preventing infinite loops in wasm code. Note that r...</div></div></div>



<a name="194365978"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/lucet%20killswitch%20docs/near/194365978" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/lucet.20killswitch.20docs.html#194365978">(Apr 16 2020 at 20:53)</a>:</h4>
<p>that's something that the PR doesn't try to handle at all and leaves up to the embedder, but what y'all are doing makes sense to me</p>



<a name="194366508"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/lucet%20killswitch%20docs/near/194366508" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/lucet.20killswitch.20docs.html#194366508">(Apr 16 2020 at 20:57)</a>:</h4>
<p>indeed. we have to handle stack overflows in the signal handler as well.</p>



<a name="194519254"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/lucet%20killswitch%20docs/near/194519254" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> iximeow <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/lucet.20killswitch.20docs.html#194519254">(Apr 18 2020 at 01:27)</a>:</h4>
<p>one edge lucet doesn't handle at the moment, which i know we (Alex/i) talked about in a wasmtime issue at some point, is recursive calls into a wasm guest. i'm pretty confident that our approach can be extended to handle that in a straightforward manner, we just haven't had that specific use case as a priority quite yet. i'd be super curious if benchmarks show much difference, whenever in the future that's a straightforward comparison :D</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>