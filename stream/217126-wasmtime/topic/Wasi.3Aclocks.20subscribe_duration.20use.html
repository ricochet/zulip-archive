<html>
<head><meta charset="utf-8"><title>Wasi:clocks subscribe_duration use · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Wasi.3Aclocks.20subscribe_duration.20use.html">Wasi:clocks subscribe_duration use</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="424135384"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Wasi%3Aclocks%20subscribe_duration%20use/near/424135384" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cwasi4wasm <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Wasi.3Aclocks.20subscribe_duration.20use.html#424135384">(Mar 01 2024 at 00:30)</a>:</h4>
<p>I'm looking to implement subscribe_duration as a future in our system. I'm setting up the poll by calling subscribe_duration and on each poll I am checking the ready function to see if the pollable has elapsed. Was wondering if this is the right approach since I don't want our future loop to block</p>



<a name="424135883"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Wasi%3Aclocks%20subscribe_duration%20use/near/424135883" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Wasi.3Aclocks.20subscribe_duration.20use.html#424135883">(Mar 01 2024 at 00:36)</a>:</h4>
<p>That's sort of what <a href="https://github.com/bytecodealliance/wasmtime/blob/9949140d4a3187f61dd53692edf714b478436161/crates/wasi/src/host/clocks.rs#L99">wasi does today</a> although it calls <code>sleep</code> again each time <code>poll</code> is called, but there's no fundamental reason for that, it should be ok to create the sleeping future once too</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>