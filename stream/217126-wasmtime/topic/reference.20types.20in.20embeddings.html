<html>
<head><meta charset="utf-8"><title>reference types in embeddings · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html">reference types in embeddings</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="203748194"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203748194" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203748194">(Jul 13 2020 at 18:01)</a>:</h4>
<p><span class="user-mention" data-user-id="253990">@fitzgen (he/him)</span> one step we'll need to take at some point is to implement reference types in the embeddings of wasmtime (Go/Python/.NET/...), and I was curious if you're interested in doing that in one of them? No worries if not, just curious if you were interested in doing so</p>



<a name="203748701"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203748701" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203748701">(Jul 13 2020 at 18:04)</a>:</h4>
<p>I hadn't thought too much about them, but I've added check boxes to the tracking issue: <a href="https://github.com/bytecodealliance/wasmtime/issues/929">https://github.com/bytecodealliance/wasmtime/issues/929</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/929" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/929" title="Tracking issue for the reference types proposal · Issue #929 · bytecodealliance/wasmtime">Tracking issue for the reference types proposal · Issue #929 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This is a tracking issue for the reference types proposal. TODO Depends on bulk memory: #928 Enable the reference types proposal&#39;s test suite binary.wast br_table.wast exports.wast globals.wast...</div></div></div>



<a name="203748782"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203748782" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203748782">(Jul 13 2020 at 18:04)</a>:</h4>
<p>I'm happy to do it, but maybe with some guidance around how we test these APIs, since I haven't touched them at all</p>



<a name="203749618"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203749618" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203749618">(Jul 13 2020 at 18:11)</a>:</h4>
<p>ok cool, if you're curious to give it a shot I'd probably recomend doing the Python one</p>



<a name="203749627"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203749627" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203749627">(Jul 13 2020 at 18:11)</a>:</h4>
<p>that should be easy enough to get up and running</p>



<a name="203749687"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203749687" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203749687">(Jul 13 2020 at 18:11)</a>:</h4>
<p>that has some <a href="https://github.com/bytecodealliance/wasmtime-py#contributing">basic docs</a> of how to get started but they may need some tewaking too</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime-py#contributing" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime-py#contributing" title="bytecodealliance/wasmtime-py">bytecodealliance/wasmtime-py</a></div><div class="message_embed_description">Python WebAssembly runtime powered by Wasmtime. Contribute to bytecodealliance/wasmtime-py development by creating an account on GitHub.</div></div></div>



<a name="203749777"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203749777" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203749777">(Jul 13 2020 at 18:12)</a>:</h4>
<p>but I also don't mind doing this to be clear</p>



<a name="203750960"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203750960" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203750960">(Jul 13 2020 at 18:21)</a>:</h4>
<div class="codehilite"><pre><span></span><code>fitzgen@erdos :: (main) :: ~/wasmtime-py
    $ pytest
ERROR: usage: pytest [options] [file_or_dir] [file_or_dir] [...]
pytest: error: unrecognized arguments: --flake8 --mypy
  inifile: /home/fitzgen/wasmtime-py/pytest.ini
  rootdir: /home/fitzgen/wasmtime-py
</code></pre></div>


<p>do I need to <code>pip install</code> flake8 and mpy too?</p>



<a name="203750977"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203750977" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203750977">(Jul 13 2020 at 18:21)</a>:</h4>
<p>also, I'm assuming this is all python3?</p>



<a name="203751191"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203751191" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203751191">(Jul 13 2020 at 18:23)</a>:</h4>
<p>it's all python3 yeah</p>



<a name="203751205"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203751205" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203751205">(Jul 13 2020 at 18:23)</a>:</h4>
<p><code>pip3 install -e ".[testing]"</code></p>



<a name="203751221"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203751221" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203751221">(Jul 13 2020 at 18:23)</a>:</h4>
<p>run that and that'll install all the dev-deps effectively</p>



<a name="203751229"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203751229" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203751229">(Jul 13 2020 at 18:23)</a>:</h4>
<p>or so I'm led to believe</p>



<a name="203754186"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203754186" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203754186">(Jul 13 2020 at 18:46)</a>:</h4>
<p><a href="https://github.com/bytecodealliance/wasmtime-py/pull/38">https://github.com/bytecodealliance/wasmtime-py/pull/38</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime-py/pull/38" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime-py/pull/38" title="Split contribution instructions out to CONTRIBUTING.md by fitzgen · Pull Request #38 · bytecodealliance/wasmtime-py">Split contribution instructions out to CONTRIBUTING.md by fitzgen · Pull Request #38 · bytecodealliance/wasmtime-py</a></div><div class="message_embed_description">Also update the set up and testing instructions.</div></div></div>



<a name="203755816"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203755816" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203755816">(Jul 13 2020 at 18:58)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> is there a reason why <code>Val</code>'s raw repr is <code>__raw__</code> and not <code>_raw</code>? I thought that double under was stylistically reserved for python builtins</p>



<a name="203755848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203755848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203755848">(Jul 13 2020 at 18:58)</a>:</h4>
<p>that's b/c I don't know python idioms</p>



<a name="203755854"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203755854" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203755854">(Jul 13 2020 at 18:58)</a>:</h4>
<p>no reason other than that</p>



<a name="203755857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203755857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203755857">(Jul 13 2020 at 18:58)</a>:</h4>
<p>oh I htink this is a python builtin thing</p>



<a name="203755922"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203755922" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203755922">(Jul 13 2020 at 18:59)</a>:</h4>
<p>it may be but not intentionally</p>



<a name="203763875"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203763875" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203763875">(Jul 13 2020 at 20:03)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> thoughts on the representation for <code>externref</code> and <code>funcref</code> in the python API should be? it is tempting to use <code>None</code> for null refs, but then that doesn't discriminate between the type of ref. but maybe this is fine? worked ok for <code>wasm_ref_t</code> in C...</p>



<a name="203763948"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203763948" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203763948">(Jul 13 2020 at 20:04)</a>:</h4>
<p>yeah I think we should prolly use <code>None</code></p>



<a name="203763960"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203763960" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203763960">(Jul 13 2020 at 20:04)</a>:</h4>
<p>and do w/e is necessary to get it work on the python side</p>



<a name="203763985"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203763985" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203763985">(Jul 13 2020 at 20:04)</a>:</h4>
<p>python's in general "this feels very nice" rather than "this is the fastest it can be"</p>



<a name="203764023"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203764023" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203764023">(Jul 13 2020 at 20:04)</a>:</h4>
<p>/me nods</p>



<a name="203780322"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780322" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780322">(Jul 13 2020 at 22:41)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> do you know how to handle circular module imports with mypy types? trying to add <code>def funcref(self, f: Optional[Func])</code> method to <code>Val</code>, but I can't import <code>Func</code> because <code>Func</code>'s module imports <code>Val</code> and so I get <code>None</code> when I try to import <code>Func</code> from <code>Val</code>'s module, etc</p>



<a name="203780471"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780471" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780471">(Jul 13 2020 at 22:43)</a>:</h4>
<p><span class="user-mention" data-user-id="253990">@fitzgen (he/him)</span> <code>'Optional[Func]'</code></p>



<a name="203780484"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780484" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780484">(Jul 13 2020 at 22:43)</a>:</h4>
<p>if you make it a string it can help with forward references</p>



<a name="203780498"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780498" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780498">(Jul 13 2020 at 22:43)</a>:</h4>
<p>although it doesn't fix everything, you'll still have to import it</p>



<a name="203780505"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780505" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780505">(Jul 13 2020 at 22:43)</a>:</h4>
<p>we may need to rejigger things</p>



<a name="203780556"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780556" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780556">(Jul 13 2020 at 22:44)</a>:</h4>
<p>I'm not too well versted in mypy and forward references, if it's too onerous feel free to disable mypy and I can help figure it out before landing</p>



<a name="203780591"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780591" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780591">(Jul 13 2020 at 22:44)</a>:</h4>
<p>ah, I was trying <code>Optional["Func"]</code> and it wasn't working; will try this</p>



<a name="203780655"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780655" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780655">(Jul 13 2020 at 22:44)</a>:</h4>
<p>oh that may or may not be supposed to work</p>



<a name="203780700"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780700" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780700">(Jul 13 2020 at 22:45)</a>:</h4>
<p>hm, nope I'm getting this error:</p>
<div class="codehilite"><pre><span></span><code>ImportError: cannot import name &#39;Func&#39; from &#39;wasmtime&#39; (/home/fitzgen/wasmtime-py/wasmtime/__init__.py)
</code></pre></div>


<p>when I add <code>from wasmtime import Func</code></p>



<a name="203780711"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780711" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780711">(Jul 13 2020 at 22:45)</a>:</h4>
<p>which is just a straight python error, not even at mypy yet</p>



<a name="203780784"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780784" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780784">(Jul 13 2020 at 22:46)</a>:</h4>
<p>bah</p>



<a name="203780800"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780800" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780800">(Jul 13 2020 at 22:46)</a>:</h4>
<p>I'd just disable it for now and I can try to help poke at it later</p>



<a name="203780811"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/203780811" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#203780811">(Jul 13 2020 at 22:46)</a>:</h4>
<p>disable mypy that is (it's a flag in pytest.ini)</p>



<a name="204261487"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/204261487" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#204261487">(Jul 17 2020 at 21:26)</a>:</h4>
<p><span class="user-mention" data-user-id="253989">@Peter Huene</span> would you happen to be interested in implementing support for reference types in the .NET api? I've never written a line of .NET code in my life, so it would probably take me quite a while longer to implement than I suspect it would for you.</p>



<a name="204264873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/204264873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#204264873">(Jul 17 2020 at 22:02)</a>:</h4>
<p>Sure, I'd be happy to.  There's some .NET GC interactions we'd need to do to implement ref types, which isn't difficult but not commonly done in .NET so probably not a great place to start if learning about .NET.</p>



<a name="204265524"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/204265524" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#204265524">(Jul 17 2020 at 22:10)</a>:</h4>
<p>I've opened <a href="https://github.com/bytecodealliance/wasmtime-dotnet/issues/27">https://github.com/bytecodealliance/wasmtime-dotnet/issues/27</a> to track.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime-dotnet/issues/27" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime-dotnet/issues/27" title="Implement reference types for .NET embeddings. · Issue #27 · bytecodealliance/wasmtime-dotnet">Implement reference types for .NET embeddings. · Issue #27 · bytecodealliance/wasmtime-dotnet</a></div><div class="message_embed_description">Now that the reference types proposal is implemented in Wasmtime, let&#39;s implement it for .NET embeddings! This means fully supporting the ref values, ref value types, handling reference types i...</div></div></div>



<a name="204856157"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reference%20types%20in%20embeddings/near/204856157" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reference.20types.20in.20embeddings.html#204856157">(Jul 23 2020 at 21:34)</a>:</h4>
<p>I've opened <a href="https://github.com/bytecodealliance/wasmtime-dotnet/pull/29">https://github.com/bytecodealliance/wasmtime-dotnet/pull/29</a> to implement extern refs, func refs, and table imports of either reference type in .NET.  <span class="user-mention" data-user-id="253991">@Yury Delendik</span> no rush at all, but whenever you get a chance to review, I'd appreciate it!</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime-dotnet/pull/29" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime-dotnet/pull/29" title="Implement WebAssembly reference types and table imports. by peterhuene · Pull Request #29 · bytecodealliance/wasmtime-dotnet">Implement WebAssembly reference types and table imports. by peterhuene · Pull Request #29 · bytecodealliance/wasmtime-dotnet</a></div><div class="message_embed_description">This PR implements support in the .NET API for WebAssembly reference types (extern ref and func ref).
It also implements support for declaring table imports in a Host.
A few bug fixes were made, in...</div></div></div>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>