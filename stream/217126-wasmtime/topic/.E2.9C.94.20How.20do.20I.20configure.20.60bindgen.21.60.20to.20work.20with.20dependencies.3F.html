<html>
<head><meta charset="utf-8"><title>✔ How do I configure `bindgen!` to work with dependencies? · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html">✔ How do I configure `bindgen!` to work with dependencies?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="453803050"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/453803050" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Mwangi <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#453803050">(Jul 24 2024 at 21:48)</a>:</h4>
<p>I have with files in a <em>wit</em> folder as follows:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wit</span><span class="o">/</span>
<span class="err">├──</span><span class="w"> </span><span class="n">base</span><span class="o">-</span><span class="n">pkg</span><span class="o">/</span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">base</span><span class="o">-</span><span class="n">pkg</span><span class="p">.</span><span class="n">wit</span>
<span class="err">├──</span><span class="w"> </span><span class="k">super</span><span class="o">-</span><span class="n">pkg</span><span class="p">.</span><span class="n">wit</span>
</code></pre></div>
<p>I have configured the <code>bindgen!</code> macro for <em>super-pkg.wit</em> as follows:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">bindgen</span><span class="o">!</span><span class="p">({</span>
<span class="w">    </span><span class="n">path</span><span class="p">:</span><span class="w"> </span><span class="s">"wit"</span><span class="p">,</span>
<span class="w">    </span><span class="n">with</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">"pkg:super-pkg"</span><span class="p">:</span><span class="w"> </span><span class="nc">crate</span><span class="p">::</span><span class="n">mod_name</span><span class="p">::</span><span class="n">pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="n">trappable_imports</span><span class="p">:</span><span class="w"> </span><span class="nc">true</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div>
<p>and its (super-pkg.wit) contains the following statements:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">package</span><span class="w"> </span><span class="n">pkg</span><span class="p">:</span><span class="nc">super</span><span class="o">-</span><span class="n">pkg</span><span class="p">;</span>

<span class="k">use</span><span class="w"> </span><span class="n">pkg</span><span class="p">:</span><span class="nc">base</span><span class="o">-</span><span class="n">pkg</span><span class="o">/</span><span class="n">types</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">base</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="n">types</span><span class="p">;</span>

<span class="o">..</span><span class="p">.</span>

<span class="n">world</span><span class="w"> </span><span class="n">cloud</span><span class="o">-</span><span class="n">pattern</span><span class="o">-</span><span class="n">world</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">import</span><span class="w"> </span><span class="n">pkg</span><span class="p">:</span><span class="nc">base</span><span class="o">-</span><span class="n">pkg</span><span class="o">/</span><span class="n">types</span><span class="p">;</span>
<span class="w">    </span><span class="n">import</span><span class="w"> </span><span class="n">node</span><span class="o">-</span><span class="n">info</span><span class="p">;</span>

<span class="w">    </span><span class="n">export</span><span class="w"> </span><span class="n">evaluator</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>I get the error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">resolve</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">parsing</span><span class="w"> </span><span class="n">WIT</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">[</span><span class="o">/</span><span class="n">wit</span><span class="p">]</span>

<span class="w">       </span><span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">           </span><span class="nc">package</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">found</span>
<span class="w">                </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">/</span><span class="n">wit</span><span class="o">/</span><span class="k">super</span><span class="o">-</span><span class="n">pkg</span><span class="p">.</span><span class="n">wit</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span>
<span class="w">                 </span><span class="o">|</span>
<span class="w">               </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">pkg</span><span class="p">:</span><span class="nc">base</span><span class="o">-</span><span class="n">pkg</span><span class="o">/</span><span class="n">types</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">base</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="n">types</span><span class="p">;</span>
<span class="w">                 </span><span class="o">|</span><span class="w">     </span><span class="o">^-----------------</span>
</code></pre></div>
<p>What am I missing?</p>



<a name="453804876"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/453804876" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#453804876">(Jul 24 2024 at 22:03)</a>:</h4>
<p>I think you'll need to put <code>base-pkg</code> in a <code>deps</code> folder, so <code>wit/deps/base-pkg</code></p>



<a name="453807679"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/453807679" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Mwangi <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#453807679">(Jul 24 2024 at 22:23)</a>:</h4>
<p>Thank you, <span class="user-mention" data-user-id="253994">@Alex Crichton</span>.</p>
<p>Putting <code>base-pkg</code> in a <code>deps</code> folder has solved the above bindings generation issue.</p>
<p>However, I am now getting the error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">[</span><span class="n">E0405</span><span class="p">]:</span><span class="w"> </span><span class="nc">cannot</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">Host</span><span class="err">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="err">`</span>
<span class="w">  </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="kr">macro</span><span class="o">-</span><span class="n">b0355b6157b884bd</span><span class="o">/</span><span class="n">out</span><span class="o">/</span><span class="k">super</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="n">world0</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">99</span><span class="p">:</span><span class="mi">37</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">99</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">U</span><span class="p">:</span><span class="w"> </span><span class="nc">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">Host</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pkg</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">Host</span><span class="p">,</span>
<span class="w">   </span><span class="o">|</span><span class="w">                                     </span><span class="o">^^^^</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="err">`</span>
<span class="w">   </span><span class="o">|</span>
<span class="n">help</span><span class="p">:</span><span class="w"> </span><span class="nc">consider</span><span class="w"> </span><span class="n">importing</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">items</span>
<span class="w">  </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">6</span><span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">crate</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">pkg</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">Host</span><span class="p">;</span>
<span class="w">  </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">6</span><span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">crate</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">db</span><span class="p">::</span><span class="n">Host</span><span class="p">;</span>
<span class="w">  </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">6</span><span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">cli</span><span class="p">::</span><span class="n">environment</span><span class="p">::</span><span class="n">Host</span><span class="p">;</span>
<span class="w">  </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">6</span><span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">cli</span><span class="p">::</span><span class="n">exit</span><span class="p">::</span><span class="n">Host</span><span class="p">;</span>
<span class="w">   </span><span class="o">|</span>
<span class="w">     </span><span class="n">and</span><span class="w"> </span><span class="mi">34</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">candidates</span>
<span class="n">help</span><span class="p">:</span><span class="w"> </span><span class="nc">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">import</span><span class="w"> </span><span class="err">`</span><span class="n">Host</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">refer</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">directly</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">99</span><span class="w"> </span><span class="o">-</span><span class="w">             </span><span class="n">U</span><span class="p">:</span><span class="w"> </span><span class="nc">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">Host</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pkg</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">Host</span><span class="p">,</span>
<span class="mi">99</span><span class="w"> </span><span class="o">+</span><span class="w">             </span><span class="n">U</span><span class="p">:</span><span class="w"> </span><span class="nc">Host</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pkg</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">Host</span><span class="p">,</span>
<span class="w">   </span><span class="o">|</span>

<span class="n">error</span><span class="p">[</span><span class="n">E0425</span><span class="p">]:</span><span class="w"> </span><span class="nc">cannot</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="err">`</span><span class="n">add_to_linker</span><span class="err">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="err">`</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="kr">macro</span><span class="o">-</span><span class="n">b0355b6157b884bd</span><span class="o">/</span><span class="n">out</span><span class="o">/</span><span class="k">super</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="n">world0</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">101</span><span class="p">:</span><span class="mi">34</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">add_to_linker</span><span class="p">(</span><span class="n">linker</span><span class="p">,</span><span class="w"> </span><span class="n">get</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span><span class="w">                                  </span><span class="o">^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="err">`</span>
<span class="w">    </span><span class="o">|</span>
<span class="n">help</span><span class="p">:</span><span class="w"> </span><span class="nc">consider</span><span class="w"> </span><span class="n">importing</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">items</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">6</span><span class="w">   </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">crate</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">pkg</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">add_to_linker</span><span class="p">;</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">|</span><span class="n">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">6</span><span class="w">   </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">crate</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">db</span><span class="p">::</span><span class="n">add_to_linker</span><span class="p">;</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">|</span><span class="n">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">6</span><span class="w">   </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">cli</span><span class="p">::</span><span class="n">environment</span><span class="p">::</span><span class="n">add_to_linker</span><span class="p">;</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">|</span><span class="n">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">6</span><span class="w">   </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">cli</span><span class="p">::</span><span class="n">exit</span><span class="p">::</span><span class="n">add_to_linker</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span>
<span class="w">      </span><span class="n">and</span><span class="w"> </span><span class="mi">36</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">candidates</span>
<span class="n">help</span><span class="p">:</span><span class="w"> </span><span class="nc">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">import</span><span class="w"> </span><span class="err">`</span><span class="n">add_to_linker</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">refer</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">directly</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">101</span><span class="w"> </span><span class="o">-</span><span class="w">             </span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">add_to_linker</span><span class="p">(</span><span class="n">linker</span><span class="p">,</span><span class="w"> </span><span class="n">get</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="mi">101</span><span class="w"> </span><span class="o">+</span><span class="w">             </span><span class="n">add_to_linker</span><span class="p">(</span><span class="n">linker</span><span class="p">,</span><span class="w"> </span><span class="n">get</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span>

<span class="nb">Some</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">detailed</span><span class="w"> </span><span class="n">explanations</span><span class="p">:</span><span class="w"> </span><span class="nc">E0405</span><span class="p">,</span><span class="w"> </span><span class="n">E0425</span><span class="p">.</span>
<span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="kr">try</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="n">explain</span><span class="w"> </span><span class="n">E0405</span><span class="err">`</span><span class="p">.</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">common</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">lib</span><span class="p">)</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">errors</span>
</code></pre></div>
<p>With the <code>bindgen!</code> invocation:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">bindgen</span><span class="p">;</span>

<span class="n">bindgen</span><span class="o">!</span><span class="p">({</span>
<span class="w">    </span><span class="n">with</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">"pkg:base-pkg"</span><span class="p">:</span><span class="w"> </span><span class="nc">base_pkg</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="n">trappable_imports</span><span class="p">:</span><span class="w"> </span><span class="nc">true</span><span class="p">,</span>
<span class="p">});</span>

<span class="k">pub</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">crate</span><span class="p">::</span><span class="n">base_pkg_module</span><span class="p">::</span><span class="n">exports</span><span class="p">::</span><span class="n">pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">;</span>
</code></pre></div>
<p>Are there any additional configuration options that I am expected to pass to the <code>bindgen!</code> macro to get the <code>use</code> to work right?</p>



<a name="453810248"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/453810248" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Mwangi <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#453810248">(Jul 24 2024 at 22:48)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span>  The examples provided <a href="https://docs.rs/wasmtime/latest/wasmtime/component/macro.bindgen.html">here</a> on the use of <code>with</code>:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">with</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">"wasi:random/random"</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime_wasi</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">random</span><span class="p">::</span><span class="n">random</span><span class="p">,</span>
<span class="w">        </span><span class="s">"wasi:cli"</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime_wasi</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">cli</span><span class="p">,</span>
<span class="w">        </span><span class="s">"wasi"</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime_wasi</span><span class="p">::</span><span class="n">bindings</span><span class="p">,</span>
<span class="w">        </span><span class="s">"wasi:http/types@0.2.0"</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime_wasi_http</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">http</span><span class="p">::</span><span class="n">types</span><span class="p">,</span>
<span class="w">        </span><span class="s">"wasi:http@0.2.0"</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime_wasi_http</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">http</span><span class="p">,</span>
<span class="w">        </span><span class="s">"wasi:filesystem/types/descriptor"</span><span class="p">:</span><span class="w"> </span><span class="nc">MyDescriptorType</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
</code></pre></div>
<p>seem to be referencing the <code>bindings</code> module rather than the <code>exports</code> module. Given that no <code>bindings</code> module is generated for <code>pkg:base-pkg</code> because it only exports the <code>types</code>, I have updated my <code>bindgen!</code> invocation to:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">bindgen</span><span class="o">!</span><span class="p">({</span>
<span class="w">    </span><span class="n">path</span><span class="p">:</span><span class="w"> </span><span class="s">"wit"</span><span class="p">,</span>
<span class="w">    </span><span class="n">with</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">"pkg:super-pkg"</span><span class="p">:</span><span class="w"> </span><span class="nc">pkg</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="n">trappable_imports</span><span class="p">:</span><span class="w"> </span><span class="nc">true</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div>
<p>so that it now references the bindings generated for <em>pkg:super-pkg</em>. I am still getting an error albeit somewhat different:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">[</span><span class="n">E0432</span><span class="p">]:</span><span class="w"> </span><span class="nc">unresolved</span><span class="w"> </span><span class="n">import</span><span class="w"> </span><span class="err">`</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="o">*</span><span class="err">`</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">base</span><span class="o">-</span><span class="n">pkg</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="kr">macro</span><span class="o">-</span><span class="n">b0355b6157b884bd</span><span class="o">/</span><span class="n">out</span><span class="o">/</span><span class="k">super</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="n">world0</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">239</span><span class="p">:</span><span class="mi">21</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">239</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="k">pub</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="o">*</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span><span class="w">                     </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">glob</span><span class="o">-</span><span class="n">import</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">itself</span>

<span class="n">error</span><span class="p">[</span><span class="n">E0405</span><span class="p">]:</span><span class="w"> </span><span class="nc">cannot</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">Host</span><span class="err">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="err">`</span>
<span class="w">  </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">base</span><span class="o">-</span><span class="n">pkg</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="kr">macro</span><span class="o">-</span><span class="n">b0355b6157b884bd</span><span class="o">/</span><span class="n">out</span><span class="o">/</span><span class="k">super</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="n">world0</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">99</span><span class="p">:</span><span class="mi">37</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">99</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">U</span><span class="p">:</span><span class="w"> </span><span class="nc">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">Host</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cloudcad</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">Host</span><span class="p">,</span>
<span class="w">   </span><span class="o">|</span><span class="w">                                     </span><span class="o">^^^^</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="err">`</span>
<span class="w">   </span><span class="o">|</span>
<span class="n">help</span><span class="p">:</span><span class="w"> </span><span class="nc">consider</span><span class="w"> </span><span class="n">importing</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">items</span>
<span class="w">  </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">6</span><span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">crate</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">cloudcad</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">Host</span><span class="p">;</span>
<span class="w">  </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">6</span><span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">crate</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">cloudcad</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">db</span><span class="p">::</span><span class="n">Host</span><span class="p">;</span>
<span class="w">  </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">6</span><span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">cli</span><span class="p">::</span><span class="n">environment</span><span class="p">::</span><span class="n">Host</span><span class="p">;</span>
<span class="w">  </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">6</span><span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">cli</span><span class="p">::</span><span class="n">exit</span><span class="p">::</span><span class="n">Host</span><span class="p">;</span>
<span class="w">   </span><span class="o">|</span>
<span class="w">     </span><span class="n">and</span><span class="w"> </span><span class="mi">34</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">candidates</span>
<span class="n">help</span><span class="p">:</span><span class="w"> </span><span class="nc">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">import</span><span class="w"> </span><span class="err">`</span><span class="n">Host</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">refer</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">directly</span>
<span class="w">   </span><span class="o">|</span>
<span class="mi">99</span><span class="w"> </span><span class="o">-</span><span class="w">             </span><span class="n">U</span><span class="p">:</span><span class="w"> </span><span class="nc">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">Host</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cloudcad</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">Host</span><span class="p">,</span>
<span class="mi">99</span><span class="w"> </span><span class="o">+</span><span class="w">             </span><span class="n">U</span><span class="p">:</span><span class="w"> </span><span class="nc">Host</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cloudcad</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">Host</span><span class="p">,</span>
<span class="w">   </span><span class="o">|</span>

<span class="n">error</span><span class="p">[</span><span class="n">E0425</span><span class="p">]:</span><span class="w"> </span><span class="nc">cannot</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="err">`</span><span class="n">add_to_linker</span><span class="err">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="err">`</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">base</span><span class="o">-</span><span class="n">pkg</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="kr">macro</span><span class="o">-</span><span class="n">b0355b6157b884bd</span><span class="o">/</span><span class="n">out</span><span class="o">/</span><span class="k">super</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="n">world0</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">101</span><span class="p">:</span><span class="mi">34</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">add_to_linker</span><span class="p">(</span><span class="n">linker</span><span class="p">,</span><span class="w"> </span><span class="n">get</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span><span class="w">                                  </span><span class="o">^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="err">`</span>
<span class="w">    </span><span class="o">|</span>
<span class="n">help</span><span class="p">:</span><span class="w"> </span><span class="nc">consider</span><span class="w"> </span><span class="n">importing</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">items</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">6</span><span class="w">   </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">crate</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">cloudcad</span><span class="p">::</span><span class="n">super_pkg</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">add_to_linker</span><span class="p">;</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">|</span><span class="n">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">6</span><span class="w">   </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">crate</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">cloudcad</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">db</span><span class="p">::</span><span class="n">add_to_linker</span><span class="p">;</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">|</span><span class="n">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">6</span><span class="w">   </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">cli</span><span class="p">::</span><span class="n">environment</span><span class="p">::</span><span class="n">add_to_linker</span><span class="p">;</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">|</span><span class="n">common</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">super_pkg</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">1</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">6</span><span class="w">   </span><span class="o">+</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">cli</span><span class="p">::</span><span class="n">exit</span><span class="p">::</span><span class="n">add_to_linker</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span>
<span class="w">      </span><span class="n">and</span><span class="w"> </span><span class="mi">36</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">candidates</span>
<span class="n">help</span><span class="p">:</span><span class="w"> </span><span class="nc">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">import</span><span class="w"> </span><span class="err">`</span><span class="n">add_to_linker</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">refer</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">directly</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">101</span><span class="w"> </span><span class="o">-</span><span class="w">             </span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">add_to_linker</span><span class="p">(</span><span class="n">linker</span><span class="p">,</span><span class="w"> </span><span class="n">get</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="mi">101</span><span class="w"> </span><span class="o">+</span><span class="w">             </span><span class="n">add_to_linker</span><span class="p">(</span><span class="n">linker</span><span class="p">,</span><span class="w"> </span><span class="n">get</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span>

<span class="n">error</span><span class="p">[</span><span class="n">E0412</span><span class="p">]:</span><span class="w"> </span><span class="nc">cannot</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="err">`</span><span class="n">RelationshipTargetsRequest</span><span class="err">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="err">`</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">base</span><span class="o">-</span><span class="n">pkg</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="kr">macro</span><span class="o">-</span><span class="n">b0355b6157b884bd</span><span class="o">/</span><span class="n">out</span><span class="o">/</span><span class="k">super</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="n">world0</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">122</span><span class="p">:</span><span class="mi">59</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">122</span><span class="w"> </span><span class="o">|</span><span class="w">                 </span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">RelationshipTargetsRequest</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span><span class="w">                                                           </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="err">`</span>
<span class="w">    </span><span class="o">|</span>
<span class="n">help</span><span class="p">:</span><span class="w"> </span><span class="nc">consider</span><span class="w"> </span><span class="n">importing</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">items</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">118</span><span class="w"> </span><span class="o">+</span><span class="w">             </span><span class="k">use</span><span class="w"> </span><span class="k">crate</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">exports</span><span class="p">::</span><span class="n">cloudcad</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">description</span><span class="p">::</span><span class="n">RelationshipTargetsRequest</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">118</span><span class="w"> </span><span class="o">+</span><span class="w">             </span><span class="k">use</span><span class="w"> </span><span class="k">crate</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">exports</span><span class="p">::</span><span class="n">cloudcad</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">RelationshipTargetsRequest</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span>
<span class="n">help</span><span class="p">:</span><span class="w"> </span><span class="nc">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">import</span><span class="w"> </span><span class="err">`</span><span class="n">RelationshipTargetsRequest</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">refer</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">directly</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">122</span><span class="w"> </span><span class="o">-</span><span class="w">                 </span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">RelationshipTargetsRequest</span><span class="p">;</span>
<span class="mi">122</span><span class="w"> </span><span class="o">+</span><span class="w">                 </span><span class="n">RelationshipTargetsRequest</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span>

<span class="n">error</span><span class="p">[</span><span class="n">E0412</span><span class="p">]:</span><span class="w"> </span><span class="nc">cannot</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="err">`</span><span class="n">RelationshipType</span><span class="err">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="err">`</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">base</span><span class="o">-</span><span class="n">pkg</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="kr">macro</span><span class="o">-</span><span class="n">b0355b6157b884bd</span><span class="o">/</span><span class="n">out</span><span class="o">/</span><span class="k">super</span><span class="o">-</span><span class="n">pkg</span><span class="o">-</span><span class="n">world0</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">253</span><span class="p">:</span><span class="mi">70</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">253</span><span class="w"> </span><span class="o">|</span><span class="w">                     </span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">RelationshipType</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span><span class="w">                                                                      </span><span class="o">^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="err">`</span>
<span class="w">    </span><span class="o">|</span>
<span class="n">help</span><span class="p">:</span><span class="w"> </span><span class="nc">consider</span><span class="w"> </span><span class="n">importing</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">enum</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">249</span><span class="w"> </span><span class="o">+</span><span class="w">                 </span><span class="k">use</span><span class="w"> </span><span class="k">crate</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">exports</span><span class="p">::</span><span class="n">cloudcad</span><span class="p">::</span><span class="n">base_pkg</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">RelationshipType</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span>
<span class="n">help</span><span class="p">:</span><span class="w"> </span><span class="nc">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">import</span><span class="w"> </span><span class="err">`</span><span class="n">RelationshipType</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">refer</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">directly</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">253</span><span class="w"> </span><span class="o">-</span><span class="w">                     </span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="n">__with_name1</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">RelationshipType</span><span class="p">;</span>
<span class="mi">253</span><span class="w"> </span><span class="o">+</span><span class="w">                     </span><span class="n">RelationshipType</span><span class="p">;</span>
<span class="w">    </span><span class="o">|</span>

<span class="nb">Some</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">detailed</span><span class="w"> </span><span class="n">explanations</span><span class="p">:</span><span class="w"> </span><span class="nc">E0405</span><span class="p">,</span><span class="w"> </span><span class="n">E0412</span><span class="p">,</span><span class="w"> </span><span class="n">E0425</span><span class="p">,</span><span class="w"> </span><span class="n">E0432</span><span class="p">.</span>
<span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="kr">try</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="n">explain</span><span class="w"> </span><span class="n">E0405</span><span class="err">`</span><span class="p">.</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">common</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">evaluators</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">lib</span><span class="p">)</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">errors</span>
<span class="n">warning</span><span class="p">:</span><span class="w"> </span><span class="nc">build</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">finish</span><span class="o">..</span><span class="p">.</span>
</code></pre></div>
<p>What am I missing?</p>



<a name="453863343"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/453863343" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Victor Adossi <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#453863343">(Jul 25 2024 at 06:25)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="737773">@Samuel Mwangi</span> I'd like to look at this -- can you upload your test case as a repository? I'd like to clone it and try locally</p>



<a name="453923573"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/453923573" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Mwangi <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#453923573">(Jul 25 2024 at 11:31)</a>:</h4>
<p>Hi, <span class="user-mention" data-user-id="598440">@Victor Adossi</span>.</p>
<p>Thank you for your response. I have provided a <a href="https://github.com/cryarchy/bindgen-deps-test">test case in this repository</a>. I have added just enough code to reproduce the issue.</p>
<p>Let me know if you need additional information.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/cryarchy/bindgen-deps-test" style="background-image: url(&quot;https://uploads.zulipusercontent.net/5b44119486071e155c48a503b8724f99af1fee59/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313432633936316538343363343136393735366465316163633631633831303134343637613166643165383935373463316631626331663062386332663737302f63727961726368792f62696e6467656e2d646570732d74657374&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/cryarchy/bindgen-deps-test" title="GitHub - cryarchy/bindgen-deps-test">GitHub - cryarchy/bindgen-deps-test</a></div><div class="message_embed_description">Contribute to cryarchy/bindgen-deps-test development by creating an account on GitHub.</div></div></div>



<a name="453961960"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/453961960" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#453961960">(Jul 25 2024 at 14:15)</a>:</h4>
<p>That error means that your <code>with</code> configuration isn't quite right, since it's projecting from the wrong path. That may be an extra path parameter needed or something else</p>



<a name="453974314"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/453974314" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Mwangi <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#453974314">(Jul 25 2024 at 15:11)</a>:</h4>
<p>Thank you, <span class="user-mention" data-user-id="253994">@Alex Crichton</span>.</p>
<p>I have not figured out what issues exist in the <code>with</code> configuration. It aligns with <a href="https://docs.rs/wasmtime/latest/wasmtime/component/macro.bindgen.html">the configuration information in the macro's documentation</a>.</p>
<p>The package in the  <a href="https://github.com/cryarchy/bindgen-deps-test">provided test</a> has only one world hence I have not specified the world to generate bindings for.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/cryarchy/bindgen-deps-test" style="background-image: url(&quot;https://uploads.zulipusercontent.net/5b44119486071e155c48a503b8724f99af1fee59/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313432633936316538343363343136393735366465316163633631633831303134343637613166643165383935373463316631626331663062386332663737302f63727961726368792f62696e6467656e2d646570732d74657374&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/cryarchy/bindgen-deps-test" title="GitHub - cryarchy/bindgen-deps-test">GitHub - cryarchy/bindgen-deps-test</a></div><div class="message_embed_description">Contribute to cryarchy/bindgen-deps-test development by creating an account on GitHub.</div></div></div>



<a name="453978073"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/453978073" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#453978073">(Jul 25 2024 at 15:25)</a>:</h4>
<p>This is a bit of a subtle problem, but the base issue is that there's a mismatch in the WIT and your <code>with</code> is invalid. In the generation of types for <code>wit/deps/base-pkg</code> all of the interfaces are exports, not imports. In the generation of the types for <code>wit</code> the types are imports, not exports. That means that the bindings don't actually line up.</p>
<p>To use <code>with</code> here the WIT structures need to be the same on the generation side and the consuming side.</p>



<a name="453978419"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/453978419" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Victor Adossi <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#453978419">(Jul 25 2024 at 15:26)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="737773">@Samuel Mwangi</span> looking at your code -- it <em>looks</em> like you're trying to feed generated bindings through to <em>another</em> host implementation -- I'm not sure what you're trying to do.</p>
<p>Are you trying to call a host binding from another host binding?</p>
<p><code>base-pkg</code> contains a <code>ping</code> function that it exports... Who is the intended caller? The host?<br>
If you <em>export</em> the <code>description</code> interface, you get generated code that enables a call <em>on a component</em> (<code>call_ping(store: S, arg0: &amp;PingRequest)</code> -- i.e. you can use a <code>store</code>.</p>
<p><code>super-pkg</code> imports the <code>base-pkg</code> <em>interface</em> (completely unrelated to the package) which contains a resource, and exports ping-processor... Who is meant to call the ping-processor's <code>process-ping</code>? </p>
<p>Could you add your <code>main.rs</code>, and a a component binary that you're going to use to actually do the calls?</p>
<p>A sequence diagram/listing might be helpful:</p>
<ol>
<li>(Host|WebAssembly Component|???) calls x</li>
<li>Host binding does y</li>
<li>???</li>
</ol>
<p>Based on what I can tell, it <em>seems</em> that you need to import <code>base-pkg/interface</code> so that you can actually implement <code>base-pkg-proxy</code> in terms of calling the other ping underneath... But again, "calling the other ping" means *doing something with a store) -- which is something only the host can do.</p>
<p>That said, I did fork the repo and try to get it to build --  <a href="https://github.com/cryarchy/bindgen-deps-test/pull/1">https://github.com/cryarchy/bindgen-deps-test/pull/1</a></p>
<p>Also, are you using <code>cargo expand</code>? <a href="https://crates.io/crates/cargo-expand">https://crates.io/crates/cargo-expand</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/cryarchy/bindgen-deps-test/pull/1" style="background-image: url(&quot;https://uploads.zulipusercontent.net/b49fd60500eb2489cdb7007adad9479e4a075939/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313937333862363337616534353662356165306131653231376466663434633763653665393532373437633735383364666538643831363539656564633635662f63727961726368792f62696e6467656e2d646570732d746573742f70756c6c2f31&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/cryarchy/bindgen-deps-test/pull/1" title="experiment: attempt to resolve build errors by vados-cosmonic · Pull Request #1 · cryarchy/bindgen-deps-test">experiment: attempt to resolve build errors by vados-cosmonic · Pull Request #1 · cryarchy/bindgen-deps-test</a></div><div class="message_embed_description">Not intending to merge this, but just as a good place for experimentation and discussion!</div></div></div>



<a name="454043604"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/454043604" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Mwangi <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#454043604">(Jul 25 2024 at 20:09)</a>:</h4>
<p>Hi, <span class="user-mention" data-user-id="598440">@Victor Adossi</span>,</p>
<p>I have provided <a href="https://github.com/cryarchy/bindgen-deps-test/tree/super-pkg-runner">a **working** implementation</a> that illustrates what I am trying to do.</p>
<p>To get it working, I had to <a href="https://github.com/cryarchy/bindgen-deps-test/blob/86c79d2c4496c0d6f28bdb8f4ac930079b664fac/runner/src/super_pkg/base_pkg_proxy.rs#L18">manually implement the <code>From&lt;T&gt;</code> trait</a> for similar types defined in <a href="https://github.com/cryarchy/bindgen-deps-test/blob/super-pkg-runner/wit/types.wit">wit/types.wit</a> and <a href="https://github.com/cryarchy/bindgen-deps-test/blob/super-pkg-runner/wit/deps/base-pkg/types.wit">wit/deps/base-pkg/types.wit</a>.</p>
<p>The issue is <strong>how can I avoid defining similar types in the super-pkg and base-pkg WIT directories?</strong> If I could correctly configure the <code>bindgen!</code> macro's <code>with</code> property, I could avoid having to:</p>
<ul>
<li>define the same types in more than one place, and</li>
<li>implement the <code>From&lt;T&gt;</code> trait for the types since there would be only one set of types.</li>
</ul>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/cryarchy/bindgen-deps-test/tree/super-pkg-runner" style="background-image: url(&quot;https://uploads.zulipusercontent.net/5b44119486071e155c48a503b8724f99af1fee59/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313432633936316538343363343136393735366465316163633631633831303134343637613166643165383935373463316631626331663062386332663737302f63727961726368792f62696e6467656e2d646570732d74657374&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/cryarchy/bindgen-deps-test/tree/super-pkg-runner" title="GitHub - cryarchy/bindgen-deps-test at super-pkg-runner">GitHub - cryarchy/bindgen-deps-test at super-pkg-runner</a></div><div class="message_embed_description">Contribute to cryarchy/bindgen-deps-test development by creating an account on GitHub.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/cryarchy/bindgen-deps-test/blob/86c79d2c4496c0d6f28bdb8f4ac930079b664fac/runner/src/super_pkg/base_pkg_proxy.rs#L18" style="background-image: url(&quot;https://uploads.zulipusercontent.net/5b44119486071e155c48a503b8724f99af1fee59/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313432633936316538343363343136393735366465316163633631633831303134343637613166643165383935373463316631626331663062386332663737302f63727961726368792f62696e6467656e2d646570732d74657374&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/cryarchy/bindgen-deps-test/blob/86c79d2c4496c0d6f28bdb8f4ac930079b664fac/runner/src/super_pkg/base_pkg_proxy.rs#L18" title="bindgen-deps-test/runner/src/super_pkg/base_pkg_proxy.rs at 86c79d2c4496c0d6f28bdb8f4ac930079b664fac · cryarchy/bindgen-deps-test">bindgen-deps-test/runner/src/super_pkg/base_pkg_proxy.rs at 86c79d2c4496c0d6f28bdb8f4ac930079b664fac · cryarchy/bindgen-deps-test</a></div><div class="message_embed_description">Contribute to cryarchy/bindgen-deps-test development by creating an account on GitHub.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/cryarchy/bindgen-deps-test/blob/super-pkg-runner/wit/types.wit" style="background-image: url(&quot;https://uploads.zulipusercontent.net/5b44119486071e155c48a503b8724f99af1fee59/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313432633936316538343363343136393735366465316163633631633831303134343637613166643165383935373463316631626331663062386332663737302f63727961726368792f62696e6467656e2d646570732d74657374&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/cryarchy/bindgen-deps-test/blob/super-pkg-runner/wit/types.wit" title="bindgen-deps-test/wit/types.wit at super-pkg-runner · cryarchy/bindgen-deps-test">bindgen-deps-test/wit/types.wit at super-pkg-runner · cryarchy/bindgen-deps-test</a></div><div class="message_embed_description">Contribute to cryarchy/bindgen-deps-test development by creating an account on GitHub.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/cryarchy/bindgen-deps-test/blob/super-pkg-runner/wit/deps/base-pkg/types.wit" style="background-image: url(&quot;https://uploads.zulipusercontent.net/5b44119486071e155c48a503b8724f99af1fee59/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313432633936316538343363343136393735366465316163633631633831303134343637613166643165383935373463316631626331663062386332663737302f63727961726368792f62696e6467656e2d646570732d74657374&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/cryarchy/bindgen-deps-test/blob/super-pkg-runner/wit/deps/base-pkg/types.wit" title="bindgen-deps-test/wit/deps/base-pkg/types.wit at super-pkg-runner · cryarchy/bindgen-deps-test">bindgen-deps-test/wit/deps/base-pkg/types.wit at super-pkg-runner · cryarchy/bindgen-deps-test</a></div><div class="message_embed_description">Contribute to cryarchy/bindgen-deps-test development by creating an account on GitHub.</div></div></div>



<a name="454046355"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/454046355" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Mwangi <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#454046355">(Jul 25 2024 at 20:15)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> Aah! I see. That explains the cause of the error. That implies that I need to define the types on the host and import that into both the <em>base-pkg</em> and <em>super-pkg</em>. Let me give it a shot.</p>



<a name="454059535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/454059535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Mwangi <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#454059535">(Jul 25 2024 at 21:49)</a>:</h4>
<p>No luck. For now, I will implement the <code>From&lt;T&gt;</code> trait for the types. I suspect the <code>wasi:*</code> components are doing something similar to my goal. I did not manage to figure it out though. Shelving it off for now. Thank you very much, guys.</p>



<a name="454152821"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/454152821" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Victor Adossi <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#454152821">(Jul 26 2024 at 03:01)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="737773">@Samuel Mwangi</span> thanks for the update here, glad you figured out how to get it working! The updated README is a ton clearer! </p>
<p>Just one last thing, I'm not sure if anyone has pointed it out, but... Have you seen WASI Virt?</p>
<p><a href="https://github.com/bytecodealliance/WASI-Virt">https://github.com/bytecodealliance/WASI-Virt</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/WASI-Virt" style="background-image: url(&quot;https://uploads.zulipusercontent.net/18a85c3ae53a311312c3c9c368f0b98aa1e878e3/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f633061616633346333316530666437333961356636626136613533333835646635623130636433333430313364376237636333326639633934623232333234392f62797465636f6465616c6c69616e63652f574153492d56697274&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/WASI-Virt" title="GitHub - bytecodealliance/WASI-Virt: Virtual implementations of WASI APIs">GitHub - bytecodealliance/WASI-Virt: Virtual implementations of WASI APIs</a></div><div class="message_embed_description">Virtual implementations of WASI APIs. Contribute to bytecodealliance/WASI-Virt development by creating an account on GitHub.</div></div></div>



<a name="455141079"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20How%20do%20I%20configure%20%60bindgen%21%60%20to%20work%20with%20dependencies%3F/near/455141079" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20How.20do.20I.20configure.20.60bindgen.21.60.20to.20work.20with.20dependencies.3F.html#455141079">(Jul 30 2024 at 14:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598440">Victor Adossi</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>