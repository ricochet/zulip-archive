<html>
<head><meta charset="utf-8"><title>reading an exported string · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html">reading an exported string</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="310673578"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310673578" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310673578">(Nov 17 2022 at 18:37)</a>:</h4>
<p>I'm instantiating a module. I need it to export a string and read that string from wasmtime. This is a testing scenario, so I don't want to resort to a full witx/wit approach. What is the simplest way to do this?</p>



<a name="310673862"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310673862" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310673862">(Nov 17 2022 at 18:39)</a>:</h4>
<p>Compile time fixed or dynamic string?</p>



<a name="310673884"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310673884" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310673884">(Nov 17 2022 at 18:39)</a>:</h4>
<p>Compile time.</p>



<a name="310674060"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310674060" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310674060">(Nov 17 2022 at 18:40)</a>:</h4>
<p>You should be able to export pointer (offset) and length ints and read it from linear memory in wasmtime</p>



<a name="310674087"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310674087" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310674087">(Nov 17 2022 at 18:40)</a>:</h4>
<p>Something like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#[no_mangle]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">STRING</span>: <span class="kp">&amp;</span><span class="o">'</span><span class="nb">static</span> <span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">"foo"</span><span class="p">;</span><span class="w"></span>
</code></pre></div>



<a name="310674168"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310674168" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310674168">(Nov 17 2022 at 18:41)</a>:</h4>
<p>Yeah, that's what I expected too. But I haven't been able to figure out the exact invocation for that.</p>



<a name="310674197"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310674197" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310674197">(Nov 17 2022 at 18:41)</a>:</h4>
<p>You could make that work, though afaik the layout of <code>str</code> isn't stable</p>



<a name="310674219"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310674219" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310674219">(Nov 17 2022 at 18:41)</a>:</h4>
<p>Yup. I know.</p>



<a name="310674330"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310674330" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310674330">(Nov 17 2022 at 18:42)</a>:</h4>
<p>The moment I try to do that, module instantiation fails with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">command</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="o">'</span><span class="na">STRING</span><span class="o">'</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">function</span><span class="w"></span>
</code></pre></div>



<a name="310674533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310674533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310674533">(Nov 17 2022 at 18:43)</a>:</h4>
<p>I think you'd need to export <code>STRING.as_ptr()</code> (<code>as usize</code>?) and <code>STRING.len()</code></p>



<a name="310674553"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310674553" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310674553">(Nov 17 2022 at 18:43)</a>:</h4>
<p>both are <code>const fn</code></p>



<a name="310674570"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310674570" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310674570">(Nov 17 2022 at 18:43)</a>:</h4>
<p>Same error with an <code>i32</code>.</p>



<a name="310674661"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310674661" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310674661">(Nov 17 2022 at 18:43)</a>:</h4>
<p>It seems like wasmtime really doesn't like anything compiled for <code>wasm32-wasi</code> that exports anything that isn't a function.</p>



<a name="310675046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310675046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310675046">(Nov 17 2022 at 18:45)</a>:</h4>
<p>My next attempt was:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#[no_mangle]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">string</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="o">'</span><span class="nb">static</span> <span class="kt">str</span> <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s">"foo"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>... which linked and returned a function of:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">FuncType</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">sig</span>: <span class="nc">WasmFuncType</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">params</span>: <span class="p">[</span><span class="n">I32</span><span class="p">],</span><span class="w"> </span><span class="n">externref_params_count</span>: <span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">returns</span>: <span class="p">[],</span><span class="w"> </span><span class="n">externref_returns_count</span>: <span class="mi">0</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="310675152"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310675152" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310675152">(Nov 17 2022 at 18:46)</a>:</h4>
<p>So it is obviously wanting me to provide a pointer to memory as input to store the fat pointer in.</p>



<a name="310675214"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310675214" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310675214">(Nov 17 2022 at 18:46)</a>:</h4>
<p>But I'm not sure how it is possible to expose host memory directly to the guest like that.</p>



<a name="310675384"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310675384" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310675384">(Nov 17 2022 at 18:47)</a>:</h4>
<p>Attempting to return <code>(*const u8, usize)</code> produces the same signature.</p>



<a name="310675544"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310675544" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310675544">(Nov 17 2022 at 18:48)</a>:</h4>
<p>I think it wants me to pass in a pointer to 16 bytes of memory. But I don't know how.</p>



<a name="310675720"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310675720" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310675720">(Nov 17 2022 at 18:49)</a>:</h4>
<p><code>Val::null()</code> produces an <code>externref</code> rather than an <code>i32</code>.</p>



<a name="310675730"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310675730" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310675730">(Nov 17 2022 at 18:49)</a>:</h4>
<p>So the function signatures don't match.</p>



<a name="310675815"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310675815" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jamey Sharp <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310675815">(Nov 17 2022 at 18:50)</a>:</h4>
<p>In general, that requires exporting a <code>malloc</code>-like function from your wasm, so the host can allocate _guest_ memory. But I think there should be another way to do what you want... I'm not sure exactly what it is though.</p>



<a name="310676242"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310676242" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310676242">(Nov 17 2022 at 18:52)</a>:</h4>
<p>Can you <code>pub static STRING_PTR: *const u8 = STRING.as_ptr();</code>?</p>



<a name="310676384"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310676384" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310676384">(Nov 17 2022 at 18:53)</a>:</h4>
<p>(nope)</p>



<a name="310676414"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310676414" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310676414">(Nov 17 2022 at 18:53)</a>:</h4>
<p>Yeah, nope.</p>



<a name="310676443"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310676443" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310676443">(Nov 17 2022 at 18:53)</a>:</h4>
<p>Statics require <code>Sync</code>.</p>



<a name="310676538"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310676538" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310676538">(Nov 17 2022 at 18:54)</a>:</h4>
<p>I guess it makes sense - static location isn't known until link time</p>



<a name="310676632"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310676632" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310676632">(Nov 17 2022 at 18:54)</a>:</h4>
<p>You could write the pointer to a mutable static in an init function</p>



<a name="310676690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310676690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310676690">(Nov 17 2022 at 18:54)</a>:</h4>
<p>That sounds horrible. :)</p>



<a name="310676798"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310676798" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310676798">(Nov 17 2022 at 18:55)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="n">STRING</span>: <span class="kp">&amp;</span><span class="o">'</span><span class="nb">static</span> <span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">"Hello, world!"</span><span class="p">;</span><span class="w"></span>

<span class="cp">#[no_mangle]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">string</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="kt">u8</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">STRING</span><span class="p">.</span><span class="n">as_ptr</span><span class="p">()</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cp">#[no_mangle]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">length</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">usize</span> <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">STRING</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="310676840"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310676840" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310676840">(Nov 17 2022 at 18:55)</a>:</h4>
<p>Or use two separate pub functions for ptr and len; I don't know if multi-value return is implemented in rust (yet?)</p>



<a name="310676969"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310676969" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310676969">(Nov 17 2022 at 18:56)</a>:</h4>
<p>The above produces two functions with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">FuncType</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">sig</span>: <span class="nc">WasmFuncType</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">params</span>: <span class="p">[],</span><span class="w"> </span><span class="n">externref_params_count</span>: <span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">returns</span>: <span class="p">[</span><span class="n">I32</span><span class="p">],</span><span class="w"> </span><span class="n">externref_returns_count</span>: <span class="mi">0</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Which means I can at least get the value out now.</p>



<a name="310677034"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310677034" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310677034">(Nov 17 2022 at 18:56)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/73755#issuecomment-650252985">https://github.com/rust-lang/rust/issues/73755#issuecomment-650252985</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/rust-lang/rust/issues/73755#issuecomment-650252985" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/67c71ca6da04e98594e832c9a34d6329ff79b497\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f616266336531336561663265663966356233363638636531316138376535373037633730653666333238313332353863343062316337623264373864663864362f727573742d6c616e672f727573742f6973737565732f3733373535)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/rust-lang/rust/issues/73755#issuecomment-650252985" title="Multi value Wasm compilation · Issue #73755 · rust-lang/rust">Multi value Wasm compilation · Issue #73755 · rust-lang/rust</a></div><div class="message_embed_description">I wanted to use tuple in my code for wasm application. When i tried to compile my code to wasm using wasm32-unknown-unknown code is compiled but its not returning any return. But I see multi-value ...</div></div></div>



<a name="310677300"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310677300" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310677300">(Nov 17 2022 at 18:57)</a>:</h4>
<p>But I still don't know what to do with that integer.</p>



<a name="310677407"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310677407" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310677407">(Nov 17 2022 at 18:58)</a>:</h4>
<p>Since I'm not sure which APIs to call to get raw access to guest memory.</p>



<a name="310677667"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310677667" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310677667">(Nov 17 2022 at 18:59)</a>:</h4>
<p><a href="https://docs.rs/wasmtime/2.0.2/wasmtime/struct.Instance.html#method.get_memory">https://docs.rs/wasmtime/2.0.2/wasmtime/struct.Instance.html#method.get_memory</a></p>



<a name="310677742"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310677742" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310677742">(Nov 17 2022 at 18:59)</a>:</h4>
<p>I forget what the default memory name is...</p>



<a name="310678460"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310678460" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310678460">(Nov 17 2022 at 19:02)</a>:</h4>
<p><code>"memory"</code>, typically</p>



<a name="310679262"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310679262" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310679262">(Nov 17 2022 at 19:06)</a>:</h4>
<p><code>Linker::get("memory")</code> returns <code>None</code>.</p>



<a name="310679439"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310679439" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310679439">(Nov 17 2022 at 19:07)</a>:</h4>
<p>But the <code>wat</code> says it <strong>is</strong> exported.</p>



<a name="310679693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310679693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310679693">(Nov 17 2022 at 19:08)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> <span class="user-mention" data-user-id="254083">@Dan Gohman</span> ^</p>



<a name="310679998"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310679998" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310679998">(Nov 17 2022 at 19:09)</a>:</h4>
<p>If it's exported in <code>wat</code>, I'm not sure offhand why it wouldn't show up in <code>Linker::get("memory")</code></p>



<a name="310680074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310680074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310680074">(Nov 17 2022 at 19:10)</a>:</h4>
<p>you probably need to use <code>Instance::get</code> instead of <code>Linker::get</code></p>



<a name="310680111"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310680111" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310680111">(Nov 17 2022 at 19:10)</a>:</h4>
<p><code>Linker::get</code> is only used for items defined into the linker, and if you're just instantiating through the linker that doesn't instantiate more things into the linker</p>



<a name="310680480"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310680480" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310680480">(Nov 17 2022 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> What is the right way to manually instantiate and call the start function?</p>



<a name="310680640"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310680640" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310680640">(Nov 17 2022 at 19:13)</a>:</h4>
<p><code>Instance</code> construction runs the start function</p>



<a name="310680838"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310680838" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310680838">(Nov 17 2022 at 19:14)</a>:</h4>
<p>yes presence of an <code>Instance</code> means the wasm <code>start</code> function was run</p>



<a name="310681143"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310681143" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310681143">(Nov 17 2022 at 19:16)</a>:</h4>
<p>Unless you mean the <code>_start</code> function, which - confusingly - is unrelated</p>



<a name="310681268"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310681268" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310681268">(Nov 17 2022 at 19:17)</a>:</h4>
<p>(i.e. an "old"-style WASI command)</p>



<a name="310681691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310681691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310681691">(Nov 17 2022 at 19:19)</a>:</h4>
<p>Wohoo! I managed to get an instance of a global!</p>



<a name="310681722"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310681722" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310681722">(Nov 17 2022 at 19:19)</a>:</h4>
<p>That feels like real progress.</p>



<a name="310684669"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310684669" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310684669">(Nov 17 2022 at 19:36)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> How do I translate the raw i32 result (which is obviously a pointer of some kind) into an offset into the exported memory?</p>



<a name="310684830"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310684830" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310684830">(Nov 17 2022 at 19:37)</a>:</h4>
<p>The result of the exported global is <code>1048616</code> and the size of the exported memory is <code>1114112</code>.</p>



<a name="310684873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310684873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310684873">(Nov 17 2022 at 19:37)</a>:</h4>
<p>So that seems sane. But the value isn't at that offset.</p>



<a name="310684998"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310684998" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310684998">(Nov 17 2022 at 19:38)</a>:</h4>
<p>It should be - wasm guest pointers are offsets into their linear memory</p>



<a name="310685910"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310685910" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310685910">(Nov 17 2022 at 19:43)</a>:</h4>
<p>yes it should be an offset into linear memory, if it isn't I don't know what it is</p>



<a name="310685927"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310685927" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310685927">(Nov 17 2022 at 19:43)</a>:</h4>
<p>I think it is a rust <code>&amp;str</code> layout issue. The exported value points to just past the end of the string.</p>



<a name="310686339"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310686339" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310686339">(Nov 17 2022 at 19:45)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#[no_mangle]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">CONFIG</span>: <span class="kp">&amp;</span><span class="o">'</span><span class="nb">static</span> <span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">"Hello, world!</span><span class="se">\0</span><span class="s">"</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>The value of <code>CONFIG</code> as seen by wasmtime is <code>1048616</code>, but the string actually starts at <code>1048600</code>.</p>



<a name="310686523"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310686523" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310686523">(Nov 17 2022 at 19:46)</a>:</h4>
<p>That's because <code>CONFIG</code>, as a pointer is <code>&amp;&amp;'static str</code>, you'd need to instead to <code>static CONFIG: [u8; N] = *b"..."</code> if you want the raw addrss</p>



<a name="310686583"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310686583" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310686583">(Nov 17 2022 at 19:47)</a>:</h4>
<p>Ah, right.</p>



<a name="310691052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310691052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jamey Sharp <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310691052">(Nov 17 2022 at 20:11)</a>:</h4>
<p>or alternatively you should be able to read the I32 that represents the <code>&amp;&amp;str</code>, and then find the string at <em>that</em> address, right?</p>



<a name="310848753"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310848753" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310848753">(Nov 18 2022 at 15:38)</a>:</h4>
<p><span class="user-mention" data-user-id="504918">@Jamey Sharp</span> That's the approach I took.</p>



<a name="310849542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310849542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310849542">(Nov 18 2022 at 15:41)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> Since exploring this yesterday, I began thinking that a custom section might be more idiomatic. What is the status of custom section support? <a href="https://github.com/rust-lang/rust/pull/48883">https://github.com/rust-lang/rust/pull/48883</a> was merged but I'm currently seeing <code>cannot find attribute</code> on nightly.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/rust-lang/rust/pull/48883" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/1b2b952d1cc12e994577da253aebdbdfc9b527b9\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f616464663239336663313730396538316336393739613464343163373166663761636639656165393766303765336435616635353564663237383861396332332f727573742d6c616e672f727573742f70756c6c2f3438383833)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/rust-lang/rust/pull/48883" title="rustc: Add a `#[wasm_custom_section]` attribute by alexcrichton · Pull Request #48883 · rust-lang/rust">rustc: Add a `#[wasm_custom_section]` attribute by alexcrichton · Pull Request #48883 · rust-lang/rust</a></div><div class="message_embed_description">This commit is an implementation of adding custom sections to wasm artifacts in
rustc. The intention here is to expose the ability of the wasm binary format to
contain custom sections with arbitrar...</div></div></div>



<a name="310850556"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310850556" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310850556">(Nov 18 2022 at 15:45)</a>:</h4>
<p>It's implemented in rustc and hasn't changed since, not sure why you'd get a cannot find attribute error</p>



<a name="310852296"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/reading%20an%20exported%20string/near/310852296" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel McCallum <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/reading.20an.20exported.20string.html#310852296">(Nov 18 2022 at 15:52)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> Ah, vscode/analyzer was trying to build it for the host arch.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>