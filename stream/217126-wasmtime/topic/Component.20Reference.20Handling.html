<html>
<head><meta charset="utf-8"><title>Component Reference Handling · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Component.20Reference.20Handling.html">Component Reference Handling</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="369675245"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Component%20Reference%20Handling/near/369675245" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael V. <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Component.20Reference.20Handling.html#369675245">(Jun 26 2023 at 12:02)</a>:</h4>
<p>Hi,<br>
there is currently no way to handle references in components, right? When returning values from a webassembly guest to a rust host, I always have to copy all values. In the future, one could use resources to do that (<a href="https://github.com/bytecodealliance/wasmtime/issues/6583">https://github.com/bytecodealliance/wasmtime/issues/6583</a>). So right now, if I want to call two separate webassembly functions create_image and process_image from the host, I would have to put  the image into a List and basically copy the image from WebAssembly to the host and from the host back to webassembly. With a ressource, I could use a handle to avoid copying the whole image.<br>
Do I understand this correctly?</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/6583" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/8bfa3ce38d9444316e37ff66ac1a1abaa10f14ce\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f386633323633373635323537316531333430626434373164626265613235333230616337303637376264313832356239656264376633326636376236323661332f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f36353833)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/6583" title="Implement resources for the component model · Issue #6583 · bytecodealliance/wasmtime">Implement resources for the component model · Issue #6583 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This is intended to be a bit of a tracking issue and/or brain-dump about implementing resources in the component model. The work here spans a number of repositories and isn't exclusively limited to...</div></div></div>



<a name="369728877"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Component%20Reference%20Handling/near/369728877" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Component.20Reference.20Handling.html#369728877">(Jun 26 2023 at 14:41)</a>:</h4>
<p>I believe that's correct,  yes. If you're putting an image into a component and eventually getting back out even with resources that'll be two copies. With resources though that could represent the image living in wasm memory for later operations to have to copy in/out the image between the invocations</p>



<a name="370507396"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Component%20Reference%20Handling/near/370507396" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael V. <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Component.20Reference.20Handling.html#370507396">(Jun 28 2023 at 17:01)</a>:</h4>
<p>thank you!</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>