<html>
<head><meta charset="utf-8"><title>✔ wrong type between host and guest · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20wrong.20type.20between.20host.20and.20guest.html">✔ wrong type between host and guest</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="401942411"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20wrong%20type%20between%20host%20and%20guest/near/401942411" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20wrong.20type.20between.20host.20and.20guest.html#401942411">(Nov 14 2023 at 09:26)</a>:</h4>
<p>I’m trying to understand wasmtime and cargo-component playing together for a simple example where the component uses wasi:http. I used wasmtime 14.0.4, build a custom adapter from that revision, copied the wasi/wit/deps over to my workspace and <code>cargo component build</code> the guest, yet when I try to run the guest in my host, I get a wrong type error on <code>wasi:http/types@0.2.0-rc-2023-10-18</code> <code>fields</code> has wrong type, expected resource found nothing. Any tips on how to approach fixing this? My assumption was that using the same WITs for the adapter, guest and host should make it work. I put up the sample on <a href="https://github.com/smndtrl/wasi-test">https://github.com/smndtrl/wasi-test</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/smndtrl/wasi-test" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/9686dbcd7d4be11094f451490e433ccc98ee1617\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f326564353239623863633836313461643165386164666139303162346439323539363937353938643764643432393466363463623131363939303263613732642f736d6e6474726c2f776173692d74657374)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/smndtrl/wasi-test" title="GitHub - smndtrl/wasi-test">GitHub - smndtrl/wasi-test</a></div><div class="message_embed_description">Contribute to smndtrl/wasi-test development by creating an account on GitHub.</div></div></div>



<a name="401961697"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20wrong%20type%20between%20host%20and%20guest/near/401961697" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20wrong.20type.20between.20host.20and.20guest.html#401961697">(Nov 14 2023 at 11:02)</a>:</h4>
<p>My bad. I was missing <code>wasmtime-wasi-http</code>'s <code>add_to_linker</code>. Didn't know it was a separate thing to do</p>



<a name="401961705"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20wrong%20type%20between%20host%20and%20guest/near/401961705" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20wrong.20type.20between.20host.20and.20guest.html#401961705">(Nov 14 2023 at 11:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="666656">Simon</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>