<html>
<head><meta charset="utf-8"><title>sightglass-2022 · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html">sightglass-2022</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="265390938"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/265390938" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Brown <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#265390938">(Dec 18 2021 at 04:15)</a>:</h4>
<p>At the last Wasmtime meeting we talked about setting up a discussion about Sightglass-related stuff: CI infrastructure, a native runner, runners for other engines (e.g. v8), more benchmarks, etc. There are existing issues in the Sightglass repository that need finishing as well as new things that I (and perhaps others) would find useful. I think <span class="user-mention" data-user-id="253990">@fitzgen (he/him)</span> is out of town right now and I won't be working for the next two weeks, but I am trying to follow up on that discussion.  I propose we meet in January on Zoom to discuss some of this in a forum other than the Wasmtime meeting. Who wants to be involved in planning and implementing the next stage of Sightglass?</p>



<a name="265390994"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/265390994" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Brown <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#265390994">(Dec 18 2021 at 04:16)</a>:</h4>
<p>cc: <span class="user-mention" data-user-id="254389">@Chris Fallin</span>, <span class="user-mention" data-user-id="234973">@Till Schneidereit</span>, <span class="user-mention" data-user-id="254083">@Dan Gohman</span>, <span class="user-mention" data-user-id="253994">@Alex Crichton</span>,  <span class="user-mention" data-user-id="257554">@Johnnie Birch</span></p>



<a name="265391627"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/265391627" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#265391627">(Dec 18 2021 at 04:32)</a>:</h4>
<p>I'm happy to join in any discussions about benchmarking, etc -- thanks for the planning initiative here! Also out for the next two weeks (as I guess most of us are) but a Zoom to discuss in the first week of Jan sounds good</p>



<a name="265541902"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/265541902" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Till Schneidereit <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#265541902">(Dec 20 2021 at 09:58)</a>:</h4>
<p>Agreed with Chris: thank you for kicking off the planning for this! <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> A call in early January sounds great to me. And while I'd be interested in joining, that might make it more challenging to actually organize, so it shouldn't block on me <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="265574135"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/265574135" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#265574135">(Dec 20 2021 at 15:02)</a>:</h4>
<p>I'm happy to join!</p>



<a name="266835079"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/266835079" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#266835079">(Jan 04 2022 at 17:03)</a>:</h4>
<p>yes, happy to have a call</p>



<a name="266884343"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/266884343" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Brown <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#266884343">(Jan 05 2022 at 00:43)</a>:</h4>
<p>How does this Friday at 10am sound? I'll set up a Teams meeting if no one minds too much (but if you do, I think someone else will have to create the Zoom invite).</p>



<a name="266885346"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/266885346" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#266885346">(Jan 05 2022 at 00:59)</a>:</h4>
<p>Works for me! I'm happy to create a Zoom meeting for this (I've had issues with joining Teams meetings in the past from this laptop)</p>



<a name="266961647"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/266961647" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Brown <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#266961647">(Jan 05 2022 at 17:06)</a>:</h4>
<p>Ok, I sent an invite to everyone who said something here but I was guessing at some of the Fastly e-mail addresses so let me know if you didn't get it.</p>



<a name="266961706"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/266961706" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Brown <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#266961706">(Jan 05 2022 at 17:06)</a>:</h4>
<p>We could also mention this in the Wasmtime meeting tomorrow...</p>



<a name="268005079"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/268005079" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton Kirilov <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#268005079">(Jan 14 2022 at 12:06)</a>:</h4>
<p>Has a meeting been already set up? I might be interested in attending too.</p>



<a name="268077702"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/268077702" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Brown <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#268077702">(Jan 14 2022 at 21:53)</a>:</h4>
<p>Oh, shoot... it just happened yesterday. Why don't you private-message me your e-mail and I'll send you the notes?</p>



<a name="362392620"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/362392620" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mats Brorsson <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#362392620">(May 31 2023 at 09:10)</a>:</h4>
<p>I am trying to figure out how to run sightglass natively and also potentially how to integrate wamr, if possible. Do you have any guides to this?</p>



<a name="363795552"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/363795552" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Brown <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#363795552">(Jun 05 2023 at 17:31)</a>:</h4>
<p>When you say "natively" do you mean "run Wasm modules in a native-compiled Sightlgass binary" or "run native code in a native-compiled Sightglass binary"? The Sightglass CLI should always compile natively on your machine...</p>



<a name="363795985"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/363795985" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Brown <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#363795985">(Jun 05 2023 at 17:33)</a>:</h4>
<p>If you're looking for the latter, <span class="user-mention" data-user-id="257554">@Johnnie Birch</span> merged <a href="https://github.com/bytecodealliance/sightglass/pull/228">https://github.com/bytecodealliance/sightglass/pull/228</a> to do this kind of thing. I believe <a href="https://github.com/bytecodealliance/sightglass/tree/main/engines/native">https://github.com/bytecodealliance/sightglass/tree/main/engines/native</a> may be of some help but I'm sure he'd be interested to hear if something you were trying did not work.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/sightglass/pull/228" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/30eb64dd19316b24551ea0324c437d068065fc39\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f613961343233333764313334313839363936653933663363353465623166643030623035366333366163373533303265363463353863636366393935356336642f62797465636f6465616c6c69616e63652f7369676874676c6173732f70756c6c2f323238)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/sightglass/pull/228" title="Add native engine by jlb6740 · Pull Request #228 · bytecodealliance/sightglass">Add native engine by jlb6740 · Pull Request #228 · bytecodealliance/sightglass</a></div><div class="message_embed_description">Currently does not support writing to stderr but would like to do that and a few other things in a follow-up patch. This patch does not attempt to implement native support for every benchmark as it...</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/sightglass/tree/main/engines/native" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/a1642b9971dc26337aef6aa590810dca3025de8f\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f323533653461333336643735363864343637393933633932613330393936383230306535393733396530663331333831346662396630643731666631323330312f62797465636f6465616c6c69616e63652f7369676874676c617373)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/sightglass/tree/main/engines/native" title="sightglass/engines/native at main · bytecodealliance/sightglass">sightglass/engines/native at main · bytecodealliance/sightglass</a></div><div class="message_embed_description">A benchmark suite and tool to compare different implementations of the same primitives. - sightglass/engines/native at main · bytecodealliance/sightglass</div></div></div>



<a name="363797119"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/363797119" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Brown <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#363797119">(Jun 05 2023 at 17:37)</a>:</h4>
<p>As for creating a Sightglass engine to benchmark WAMR, I would advise looking at the <code>wasmtime-bench-api</code> crate: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/bench-api/src/lib.rs">https://github.com/bytecodealliance/wasmtime/blob/main/crates/bench-api/src/lib.rs</a>. This crate builds to a shared library exposing some symbols (<code>wasm_bench_create</code>, <code>wasm_bench_compile</code>, etc.) that Sightglass uses for driving the benchmark compilation, instantiation, and execution.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/bench-api/src/lib.rs" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/67656f1b1624a8327238e0ec2be94d406049e230\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f663630633265613432383465313630633938373362346466316334626137663264376461653237383030356133393832363666323130636634393366336134302f62797465636f6465616c6c69616e63652f7761736d74696d65)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/bench-api/src/lib.rs" title="wasmtime/lib.rs at main · bytecodealliance/wasmtime">wasmtime/lib.rs at main · bytecodealliance/wasmtime</a></div><div class="message_embed_description">A fast and secure runtime for WebAssembly. Contribute to bytecodealliance/wasmtime development by creating an account on GitHub.</div></div></div>



<a name="363797995"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/363797995" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johnnie Birch <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#363797995">(Jun 05 2023 at 17:40)</a>:</h4>
<p><span class="user-mention" data-user-id="506554">@Mats Brorsson</span> .. Hi Matt, depending on what you mean by run natively the patch Andrew pointed to may help. It allows a benchmark that has been compiled to a native target (not the Wasm target) and linked with sightglass to be run through sightglass and with a similar report out as to what the Wasm benchmarking shows. Its just the initial patch though and currently is only supported by the shootout subset of benchmarks.</p>



<a name="366367117"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/366367117" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mats Brorsson <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#366367117">(Jun 15 2023 at 05:38)</a>:</h4>
<p>Another question about sightglass. We have run it on x86_64 (laptop), ARM (Nvidia jetson board) and on RISC-V (VisionFive2 board). The number of cycles on x86_64 across all phases (compilation, instantiation and execution) is much higher than for ARM and RISC-V. I ran sightglass with pinned processes and the only difference is I used <code>processes = 10</code> on the laptop and <code>processes = 4</code> on the smaller boards as they had less cores and less memory. Would that affect the results?</p>



<a name="366872050"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/sightglass-2022/near/366872050" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Brown <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/sightglass-2022.html#366872050">(Jun 16 2023 at 15:33)</a>:</h4>
<p>It should not, no. But maybe look at some other measure kinds (<code>--measure</code>) to get a sense for what is going on.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>