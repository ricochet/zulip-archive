<html>
<head><meta charset="utf-8"><title>deterministic compilation · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/deterministic.20compilation.html">deterministic compilation</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="262590883"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/deterministic%20compilation/near/262590883" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ulan <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/deterministic.20compilation.html#262590883">(Nov 24 2021 at 13:53)</a>:</h4>
<p>Hi folks! If we compile the same Wasm program twice using the same Wasmtime binary, would you expect the resulting generated code to be the same (modulo the register names and absolute memory addresses).</p>
<p>If not, could you think of potential sources of non-determinism or non-determinisitc optimizations? For example, do some optimization perhaps depend on the time or pointer values?</p>



<a name="262592836"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/deterministic%20compilation/near/262592836" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/deterministic.20compilation.html#262592836">(Nov 24 2021 at 14:08)</a>:</h4>
<p>I would expect the actual compilation to be fully deterministic. Cranelift doesn't read the current time for anything other than reporting compilation times. It is possible that it depends on hashmap iteration order somewhere, but I would consider it a bug if it does.</p>



<a name="262593370"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/deterministic%20compilation/near/262593370" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ulan <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/deterministic.20compilation.html#262593370">(Nov 24 2021 at 14:12)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="264278">@bjorn3</span> ! That's great to hear.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>