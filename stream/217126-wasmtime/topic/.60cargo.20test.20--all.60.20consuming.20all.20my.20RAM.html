<html>
<head><meta charset="utf-8"><title>`cargo test --all` consuming all my RAM · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.60cargo.20test.20--all.60.20consuming.20all.20my.20RAM.html">`cargo test --all` consuming all my RAM</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="292770234"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%60cargo%20test%20--all%60%20consuming%20all%20my%20RAM/near/292770234" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.60cargo.20test.20--all.60.20consuming.20all.20my.20RAM.html#292770234">(Aug 10 2022 at 14:53)</a>:</h4>
<p>Hey! I can't seem to be able to run <code>cargo test --all</code> properly on my machine, as doing so consumes all my RAM, some tests don't run at all. Cargo complains that some sub builds processes fail, and it's likely LD that consumes too much RAM and then fails. Is there a way to run all the tests nevertheless, or specify an alternative linker that would consume less ram?</p>



<a name="292770456"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%60cargo%20test%20--all%60%20consuming%20all%20my%20RAM/near/292770456" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.60cargo.20test.20--all.60.20consuming.20all.20my.20RAM.html#292770456">(Aug 10 2022 at 14:54)</a>:</h4>
<p>would something like <code>cargo test --all --jobs=1</code> help?</p>



<a name="292774120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%60cargo%20test%20--all%60%20consuming%20all%20my%20RAM/near/292774120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.60cargo.20test.20--all.60.20consuming.20all.20my.20RAM.html#292774120">(Aug 10 2022 at 15:14)</a>:</h4>
<p>Likely yes, thanks. I could try to identify which subset of tests need a lesser number of jobs, so as to still be able to run other tests in parallel.</p>



<a name="292775663"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%60cargo%20test%20--all%60%20consuming%20all%20my%20RAM/near/292775663" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.60cargo.20test.20--all.60.20consuming.20all.20my.20RAM.html#292775663">(Aug 10 2022 at 15:20)</a>:</h4>
<p>You might also be able to get by with turning down debuginfo which is probably most of the cause of the blowup. I think seeing <code>CARGO_PROFILE_{DEV,TEST}_DEBUGINFO=0</code> should work</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>