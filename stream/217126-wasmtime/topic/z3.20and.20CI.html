<html>
<head><meta charset="utf-8"><title>z3 and CI · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html">z3 and CI</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="197733440"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197733440" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197733440">(May 15 2020 at 18:31)</a>:</h4>
<p><span class="user-mention" data-user-id="253990">@fitzgen (he/him)</span> currently we're building z3 and peepmatic on all the test builders, was that intentional?</p>



<a name="197733455"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197733455" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197733455">(May 15 2020 at 18:32)</a>:</h4>
<p>it looks like CI time for windows has spiked to 45m</p>



<a name="197733582"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197733582" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197733582">(May 15 2020 at 18:33)</a>:</h4>
<p>yes, it is intentional</p>
<p>I don't know why windows is so slow to compile z3</p>
<p>we can't use system z3 because it is missing symbols (at least on ubuntu) :-/</p>



<a name="197733877"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197733877" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197733877">(May 15 2020 at 18:35)</a>:</h4>
<p>I guess we could look into fetching from <a href="https://github.com/Z3Prover/z3/releases">https://github.com/Z3Prover/z3/releases</a> and using those prebuilt Z3s</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/Z3Prover/z3/releases" style="background-image: url(https://avatars3.githubusercontent.com/u/11668813?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/Z3Prover/z3/releases" title="Z3Prover/z3">Z3Prover/z3</a></div><div class="message_embed_description">The Z3 Theorem Prover. Contribute to Z3Prover/z3 development by creating an account on GitHub.</div></div></div>



<a name="197734213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734213">(May 15 2020 at 18:38)</a>:</h4>
<p>Hm why do we want to build peepmatic and such on all builders?</p>



<a name="197734242"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734242" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734242">(May 15 2020 at 18:38)</a>:</h4>
<p>It seems like architecturally it's so expensive we wouldn't really want to do that</p>



<a name="197734271"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734271" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734271">(May 15 2020 at 18:38)</a>:</h4>
<p>but instead we should focus it on one builder, but no need to test all channels on all platforms in all modes</p>



<a name="197734315"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734315" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734315">(May 15 2020 at 18:38)</a>:</h4>
<p>I'm not sure if it's z3 specifically or something else that's slow</p>



<a name="197734332"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734332" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734332">(May 15 2020 at 18:39)</a>:</h4>
<p>well, since getting windows builds working was somewhat difficult, I wouldn't want to remove its testing</p>



<a name="197734344"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734344" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734344">(May 15 2020 at 18:39)</a>:</h4>
<blockquote>
<p>I'm not sure if it's z3 specifically or something else that's slow</p>
</blockquote>
<p>it is building z3 that is slow here</p>



<a name="197734394"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734394" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734394">(May 15 2020 at 18:39)</a>:</h4>
<p>was that something we did?</p>



<a name="197734400"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734400" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734400">(May 15 2020 at 18:39)</a>:</h4>
<p>or was that upstream in the z3 crate?</p>



<a name="197734484"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734484" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734484">(May 15 2020 at 18:40)</a>:</h4>
<p>It just feels weird to blow 20 minutes testing a thing that's off-by-default for everyone</p>



<a name="197734491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734491">(May 15 2020 at 18:40)</a>:</h4>
<p>we statically link our own build of z3 because system packages are unreliable and missing symbols and such</p>



<a name="197734498"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734498" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734498">(May 15 2020 at 18:40)</a>:</h4>
<p>that's a long time for a PR to be sitting on CI</p>



<a name="197734539"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734539" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734539">(May 15 2020 at 18:40)</a>:</h4>
<p>but that logic is in z3, right?</p>



<a name="197734542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734542">(May 15 2020 at 18:40)</a>:</h4>
<p>not in wasmtime?</p>



<a name="197734568"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734568" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734568">(May 15 2020 at 18:40)</a>:</h4>
<p>like it seems like z3's windows support shouldn't be tested by wastime</p>



<a name="197734580"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734580" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734580">(May 15 2020 at 18:40)</a>:</h4>
<p>wasmtime*</p>



<a name="197734595"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734595" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734595">(May 15 2020 at 18:41)</a>:</h4>
<p>it is a feature of the z3 crate that I added and turned on</p>



<a name="197734634"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734634" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734634">(May 15 2020 at 18:41)</a>:</h4>
<p>but why would we be responsible for testing it?</p>



<a name="197734656"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734656" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734656">(May 15 2020 at 18:41)</a>:</h4>
<p>in the wasmtime ci that is</p>



<a name="197734701"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734701" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734701">(May 15 2020 at 18:41)</a>:</h4>
<p>the z3 crate's ci does test it; we aren't responsible for testing that, its just that we test everything on all of our platforms</p>



<a name="197734810"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734810" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734810">(May 15 2020 at 18:42)</a>:</h4>
<p>but why would we test specifically on windows?</p>



<a name="197734822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734822">(May 15 2020 at 18:42)</a>:</h4>
<p>like why isn't one builder sufficient?</p>



<a name="197734852"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734852" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734852">(May 15 2020 at 18:42)</a>:</h4>
<p>I thought we were just going to have one builder verify that the peepmatic blob is up-to-date</p>



<a name="197734892"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734892" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734892">(May 15 2020 at 18:43)</a>:</h4>
<p>why do we test anything on windows?</p>



<a name="197734924"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734924" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734924">(May 15 2020 at 18:43)</a>:</h4>
<p>hm that feels like a disingenuous question</p>



<a name="197734930"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734930" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734930">(May 15 2020 at 18:43)</a>:</h4>
<p>there is only one builder that tests that the generated peephole optimizations are up to date</p>



<a name="197734939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734939">(May 15 2020 at 18:43)</a>:</h4>
<p>like we obviously have tons of windows-specific code in wasmtime</p>



<a name="197734950"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734950" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734950">(May 15 2020 at 18:43)</a>:</h4>
<p>but why would anything in peepmatic be windows-specific?</p>



<a name="197734993"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197734993" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197734993">(May 15 2020 at 18:43)</a>:</h4>
<p>right what I mean is that i thought we were only going to build peepmatic on that one builder</p>



<a name="197735075"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735075" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735075">(May 15 2020 at 18:44)</a>:</h4>
<p>lets back up a bit</p>



<a name="197735127"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735127" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735127">(May 15 2020 at 18:44)</a>:</h4>
<p>when peepmatic is on by default, do you want to still only test it on ubuntu?</p>



<a name="197735161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735161">(May 15 2020 at 18:44)</a>:</h4>
<p>that's what I would expect, yeah</p>



<a name="197735174"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735174" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735174">(May 15 2020 at 18:44)</a>:</h4>
<p>like, it seems we want to test everything we ship on all platforms we are shipping them on</p>



<a name="197735189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735189">(May 15 2020 at 18:45)</a>:</h4>
<p>b/c it's development model is "we don't care how slow it is to build</p>



<a name="197735220"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735220" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735220">(May 15 2020 at 18:45)</a>:</h4>
<p>I think you're conflating this though</p>



<a name="197735233"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735233" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735233">(May 15 2020 at 18:45)</a>:</h4>
<p>we're not shipping peepmatic anywhere</p>



<a name="197735241"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735241" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735241">(May 15 2020 at 18:45)</a>:</h4>
<p>we ship wasmtime everywhere</p>



<a name="197735252"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735252" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735252">(May 15 2020 at 18:45)</a>:</h4>
<p>we only ship the peepmatic-generated-blob</p>



<a name="197735284"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735284" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735284">(May 15 2020 at 18:45)</a>:</h4>
<p>so I don't think there's much benefit to getting so much coverage</p>



<a name="197735298"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735298" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735298">(May 15 2020 at 18:45)</a>:</h4>
<p>like it's not like it's wrong but it is costly</p>



<a name="197735300"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735300" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735300">(May 15 2020 at 18:45)</a>:</h4>
<p>much of the test coverage for the peepmatic-generated blob is in crates that depend transitively on z3</p>



<a name="197735304"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735304" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735304">(May 15 2020 at 18:45)</a>:</h4>
<p>and apparently very costly</p>



<a name="197735389"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735389" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735389">(May 15 2020 at 18:46)</a>:</h4>
<p>but we test the blob in all configurations if we enable it by default</p>



<a name="197735434"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735434" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735434">(May 15 2020 at 18:46)</a>:</h4>
<p>I agree we need to make the cost lower, and I suggested a potential solution for investigation: fetch pre-built <code>libz3.so</code>s from the z3 github releases page</p>



<a name="197735439"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735439" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735439">(May 15 2020 at 18:46)</a>:</h4>
<p>z3 is only needed generating the blob, and I'm saying I don't think there's any need to test blob-generation on all platforms</p>



<a name="197735479"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735479" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735479">(May 15 2020 at 18:47)</a>:</h4>
<p>we are not testing blob generation on all platforms</p>



<a name="197735483"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735483" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735483">(May 15 2020 at 18:47)</a>:</h4>
<p>I mean yeah we can make it faster but I still don't see the point in testing it on all platforms</p>



<a name="197735491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735491">(May 15 2020 at 18:47)</a>:</h4>
<p>beyond making us feel good about ourselves</p>



<a name="197735495"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735495" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735495">(May 15 2020 at 18:47)</a>:</h4>
<p>aren't we?</p>



<a name="197735506"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735506" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735506">(May 15 2020 at 18:47)</a>:</h4>
<p>like we're running <code>cargo test -p peepmatic</code> basically</p>



<a name="197735561"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735561" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735561">(May 15 2020 at 18:47)</a>:</h4>
<p>no, only the rebuild peephole optimizers builder is regenerating the blob</p>
<p>yes, we are running <code>cargo test -p peepmatic</code></p>



<a name="197735623"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735623" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735623">(May 15 2020 at 18:48)</a>:</h4>
<p>something about <code>cargo test -p peepmatic</code> is bringing in z3?</p>



<a name="197735634"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735634" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735634">(May 15 2020 at 18:48)</a>:</h4>
<p>like something is building z3 on the "test everything" builders</p>



<a name="197735636"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735636" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735636">(May 15 2020 at 18:48)</a>:</h4>
<p><code>peepmatic</code> depends on <code>z3</code></p>



<a name="197735644"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735644" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735644">(May 15 2020 at 18:48)</a>:</h4>
<p>and I thought we were not going to do that</p>



<a name="197735685"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735685" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735685">(May 15 2020 at 18:48)</a>:</h4>
<p>we aren't building z3 on the dist builders</p>



<a name="197735699"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735699" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735699">(May 15 2020 at 18:48)</a>:</h4>
<p>which is what we talked about before</p>



<a name="197735723"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735723" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735723">(May 15 2020 at 18:49)</a>:</h4>
<p>My understanding from reading the patch is that we don't link the z3 engine into wasmtime. Is that the case?</p>



<a name="197735748"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735748" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735748">(May 15 2020 at 18:49)</a>:</h4>
<p>sorry I should have clarified, but dist/test is what I was talking about there</p>



<a name="197735753"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735753" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735753">(May 15 2020 at 18:49)</a>:</h4>
<blockquote>
<p>My understanding from reading the patch is that we don't link the z3 engine into wasmtime. Is that the case?</p>
</blockquote>
<p>this is correct</p>



<a name="197735759"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735759" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735759">(May 15 2020 at 18:49)</a>:</h4>
<p>I think we should build z3 on precisely one builder</p>



<a name="197735768"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197735768" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197735768">(May 15 2020 at 18:49)</a>:</h4>
<p>the one that does peepmatic/blob testing</p>



<a name="197736044"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197736044" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197736044">(May 15 2020 at 18:51)</a>:</h4>
<p>Offhand, that sounds reasonable to me. In theory z3 or the peepmatic code could differ depending on the host, but that should be very rare and arguably not something we need to be testing for every CI run</p>



<a name="197736133"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197736133" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197736133">(May 15 2020 at 18:52)</a>:</h4>
<p>I don't disagree with the conclusion per se, but I guess I am confused where the line is drawn. when peepmatic is enabled by default, do we test it on all the testers?</p>



<a name="197736240"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197736240" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197736240">(May 15 2020 at 18:53)</a>:</h4>
<p>I think it depends on what you mean by testing peepmatic, I personally think that no matter what at all times we should only build z3 in one place one itme</p>



<a name="197736259"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197736259" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197736259">(May 15 2020 at 18:53)</a>:</h4>
<p>and that's possible b/c wasmtime doesn't depend on z3</p>



<a name="197736290"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197736290" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197736290">(May 15 2020 at 18:53)</a>:</h4>
<p>also, if testing peepmatic is fast, does it change the calculus? because all the time currently is spent in building z3, and if we don't do that, then it will be pretty fast</p>



<a name="197736387"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197736387" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197736387">(May 15 2020 at 18:54)</a>:</h4>
<p>("don't build z3" == "fetch built release from Z3 github releases")</p>



<a name="197736417"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197736417" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197736417">(May 15 2020 at 18:54)</a>:</h4>
<p>It would from a practical point of view, but I would personally say we still shouldn't do it</p>



<a name="197736455"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197736455" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197736455">(May 15 2020 at 18:54)</a>:</h4>
<p>like it'd change to the point that I still not want to build the z3 crate everywhere but I wouldn't care enough to pursue it</p>



<a name="197736616"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197736616" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197736616">(May 15 2020 at 18:55)</a>:</h4>
<p>I hold out hope that someday CI machines will have better ways to cache builds of dependencies between runs, but until then, I agree.</p>



<a name="197736782"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197736782" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197736782">(May 15 2020 at 18:56)</a>:</h4>
<p>aside: it might be nice to set up sccache for our ci</p>



<a name="197736819"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197736819" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197736819">(May 15 2020 at 18:56)</a>:</h4>
<p>Normal users building from source on Windows won't regenerate the bytecode, because that's behind a feature flag disabled by default, so even if z3/peepmatic would generate different bytecode on Windows, it won't affect people's actual experience by default</p>



<a name="197736951"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197736951" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197736951">(May 15 2020 at 18:57)</a>:</h4>
<p>I guess I am fearful of it breaking on windows and no one noticing, but I guess that is pretty unlikely given that the z3 repo's CI is testing windows builds now</p>



<a name="197737014"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197737014" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197737014">(May 15 2020 at 18:58)</a>:</h4>
<p>I have no opinion on most of this conversation, but Adam recently setup Lucet with CircleCI caching the target directory and it made a significant improvement on build times. I’m not sure if GH CI can do that sort of caching.</p>



<a name="197737108"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197737108" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197737108">(May 15 2020 at 18:58)</a>:</h4>
<p>(We need CircleCI to test our userfaultfd memory management backend, that syscall isn’t available on GH CI)</p>



<a name="197737623"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197737623" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197737623">(May 15 2020 at 19:02)</a>:</h4>
<p>now there's a reason for picking a CI system I haven't heard of before</p>



<a name="197738028"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197738028" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197738028">(May 15 2020 at 19:05)</a>:</h4>
<p><a href="https://github.com/bytecodealliance/wasmtime/pull/1714">https://github.com/bytecodealliance/wasmtime/pull/1714</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/1714" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/1714" title="CI: only test `peepmatic` in one job by fitzgen · Pull Request #1714 · bytecodealliance/wasmtime">CI: only test `peepmatic` in one job by fitzgen · Pull Request #1714 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This avoids building Z3 in most jobs, which saves CI time.</div></div></div>



<a name="197738909"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197738909" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Till Schneidereit <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197738909">(May 15 2020 at 19:10)</a>:</h4>
<p>Would it make sense to only run this at all if the peepmatic input changed in a PR?</p>



<a name="197738988"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197738988" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Till Schneidereit <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197738988">(May 15 2020 at 19:10)</a>:</h4>
<p>or any configuration affecting it, I guess</p>



<a name="197739368"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197739368" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197739368">(May 15 2020 at 19:12)</a>:</h4>
<p>figuring out all the things that could affect it could be a game a wack a mole, I think</p>
<p>e.g. changing a clif operator could require changes to the glue between peepmatic and cranelift</p>



<a name="197739531"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/z3%20and%20CI/near/197739531" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Till Schneidereit <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/z3.20and.20CI.html#197739531">(May 15 2020 at 19:13)</a>:</h4>
<p>ah, that's a good point!</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>