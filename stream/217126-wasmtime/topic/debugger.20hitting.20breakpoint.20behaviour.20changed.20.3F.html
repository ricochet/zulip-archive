<html>
<head><meta charset="utf-8"><title>debugger hitting breakpoint behaviour changed ? · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html">debugger hitting breakpoint behaviour changed ?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="353737840"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353737840" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353737840">(Apr 28 2023 at 08:58)</a>:</h4>
<p>Hi guys, just upgraded our stuff to latest wasmtime &amp; seems breakpoint behaviour has changed.</p>
<p>Previously got lldb::eStopReasonBreakpoint event on a breakpoint.<br>
Now apparently  lldb::eStopReasonException</p>
<p>Does anyone know anything about this, please. Is it intentional ? A regression of some kind ? <br>
Do I have something setup wrong ?</p>
<p>Haven't worked on this code for quite some time so very rusty &amp; may be user error.</p>



<a name="353746159"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353746159" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353746159">(Apr 28 2023 at 09:17)</a>:</h4>
<p>Rebuilt my previous (working) wasmtime from scratch on same system to attempt to determine whether something else on my system responsible for regression. Triggers breakpoint as expected.</p>



<a name="353755803"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353755803" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353755803">(Apr 28 2023 at 09:36)</a>:</h4>
<p>reviewing previous releases - the one I was working from was pre-1.0 ... to attempt to figure out where the regression/change occured.</p>



<a name="353760594"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353760594" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353760594">(Apr 28 2023 at 09:45)</a>:</h4>
<p>weird. 1.0.1 also generates an exception - so change isnt recent.</p>



<a name="353768605"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353768605" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353768605">(Apr 28 2023 at 10:02)</a>:</h4>
<p>fresh pull of 0.3.0 which I was working from acting unexpectedly, so my issue for the time being.</p>



<a name="353847208"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353847208" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353847208">(Apr 28 2023 at 12:48)</a>:</h4>
<p>v0.31.0 triggers breakpoints correctly. v0.32.0, the next tagged release triggers an exception &amp; subsequent releases trigger exceptions.</p>



<a name="353848884"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353848884" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353848884">(Apr 28 2023 at 12:51)</a>:</h4>
<p>[ above should have said 0.30.0 not 0.3.0 but in any case, that release is irrelevant - the change in behaviour occurs between 0.31.0 &amp; 0.32.0 ]</p>



<a name="353891802"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353891802" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353891802">(Apr 28 2023 at 14:10)</a>:</h4>
<p>Seems this is the cause of the regression :</p>
<p>Revision: ce67e7fcd1d2d6da1899d2b46cc41ef877bd9462<br>
Author: Amanieu d'Antras &lt;<a href="mailto:amanieu@gmail.com">amanieu@gmail.com</a>&gt;<br>
Date: 02/12/2021 11:53:04<br>
Message:<br>
Fix ownership in *_vec_new functions in the C API</p>
<p>These functions are specified to take ownership of the objects in the given slice, not clone them.</p>
<p>Modified: crates/c-api/src/vec.rs</p>



<a name="353900985"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353900985" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353900985">(Apr 28 2023 at 14:27)</a>:</h4>
<p>yup, replacing those couple of lines with previous implementation restores Breakpoint behaviour (minimal testing thus far).<br>
next will try migrating that fix to trunk to see if that resolves regression there.<br>
beyond that, this is rust code I have no clue about so will have to defer to others for complete resolution.<br>
I'm going as far as just get it working again.</p>



<a name="353917441"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353917441" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353917441">(Apr 28 2023 at 14:57)</a>:</h4>
<p>yup, revert of that change to trunk gets breakpoints running again. yay :)</p>



<a name="353917907"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353917907" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353917907">(Apr 28 2023 at 14:58)</a>:</h4>
<p>needs a little more testing, then will push if wanted.</p>



<a name="353919530"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353919530" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353919530">(Apr 28 2023 at 15:01)</a>:</h4>
<p>as to the clone/ownership issue the change was supposed to address, its implications &amp; why it generates an exception, dunno.<br>
I need working recent version. this can be considered in more depth later. worked before that change, works with it removed. what it's supposed to do needs further consideration to avoid debugger breakpoint regression.</p>



<a name="353922423"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353922423" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353922423">(Apr 28 2023 at 15:06)</a>:</h4>
<p>likely a duplicate release of something if was assumed cloned before &amp; behaviour changed to ownership change. so could be fixed properly by tracking that down, but beyond scope of my current work.</p>



<a name="353947934"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353947934" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353947934">(Apr 28 2023 at 15:52)</a>:</h4>
<p>that works for me :) &amp; gets this running wasmtime trunk.<br>
<a href="http://advance-software.com/develop">advance-software.com/develop</a></p>
<div class="message_embed"><a class="message_embed_image" href="http://advance-software.com/develop" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/b1f8aab018684565453b07fa130bd90a0e154afe\/687474703a2f2f616476616e63652d736f6674776172652e636f6d2f696d616765732f6765745f696e66696e6974792e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="http://advance-software.com/develop" title="Advance Software">Advance Software</a></div><div class="message_embed_description">Developers of the &lt;&gt;&lt;&gt; Infinity Immersive Web Browser.</div></div></div>



<a name="353952431"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353952431" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353952431">(Apr 28 2023 at 16:00)</a>:</h4>
<p>I dont have permission to push apparently so here's the change in its current form. </p>
<p><a href="https://pastebin.com/2Yt3FG9E">https://pastebin.com/2Yt3FG9E</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://pastebin.com/2Yt3FG9E" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/0dd7fd84c0d50799f92983226fb62fb426402b54\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="https://pastebin.com/2Yt3FG9E" title=" crates/c-api/src/vec.rs | 4 ++-- 1 file changed, 2 insertions(+), 2 deletions - Pastebin.com"> crates/c-api/src/vec.rs | 4 ++-- 1 file changed, 2 insertions(+), 2 deletions - Pastebin.com</a></div><div class="message_embed_description">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div>



<a name="353991525"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353991525" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353991525">(Apr 28 2023 at 17:21)</a>:</h4>
<p>Referenced here, as perhaps the same issue :  <a href="https://github.com/bytecodealliance/wasmtime/issues/3999">https://github.com/bytecodealliance/wasmtime/issues/3999</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/3999" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/b6f2800bc4085cbfbde6af22d2b3b3622e29830f\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f373731663963653532326262613563633339333334613064336638303834623138316361373830386231336435626632356261393136626165636530613234662f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f33393939)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/3999" title="Assertion in debugger mode (left &lt; right) · Issue #3999 · bytecodealliance/wasmtime">Assertion in debugger mode (left &lt; right) · Issue #3999 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">Test Case preinitialized.mov ( couldn't upload .wasm file so I'd changed extension to .mov, it is actually .wasm file) Steps to Reproduce RUST_BACKTRACE=1 gdb --args wasmtime run -g preinitialized....</div></div></div>



<a name="353997182"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/353997182" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#353997182">(Apr 28 2023 at 17:33)</a>:</h4>
<p>If you run valgrind on your program built against the latest wasmtime version without your patch does it give any errors?</p>



<a name="354009789"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354009789" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354009789">(Apr 28 2023 at 18:02)</a>:</h4>
<p>Hi Bjorn, can't run valgrind as windows user but could run drmemory. cant go much deeper as we're severely resource constrained so interaction must be limited to fire fighting for now. fire out - debugging working again.</p>
<p>concerned this has regressed for 17 months now. does nobody else use a debugger ? do we have a test that ensures debugger breakpoints are emitted properly ?</p>
<p>link with issue 3999 perhaps false but the issue itself genuine &amp; corrected with this patch.</p>



<a name="354014212"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354014212" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354014212">(Apr 28 2023 at 18:12)</a>:</h4>
<p>let me see if I can get some useful diagnostics out of this.</p>



<a name="354021974"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354021974" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jamey Sharp <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354021974">(Apr 28 2023 at 18:31)</a>:</h4>
<p>What would be most helpful is a minimal test program demonstrating the issue. As far as I know, Wasmtime doesn't have anything to do with emitting breakpoints, so I don't understand what behavior you were expecting.</p>



<a name="354024717"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354024717" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354024717">(Apr 28 2023 at 18:38)</a>:</h4>
<p>Hi Jamey,</p>
<p>Ran lldbg under visual studio debugger &amp; used it to identify the regression &amp; locate when the code regressed. That's all I've got for now. Its using some lldb API I don't fully understand yet as inherited code. Perhaps as we have a behaviour change, the  issue causing the exception is in the app. Will investigate further. Will see if I can get lldb command line version to exhibit same behaviour.</p>
<p>My version : <a href="https://github.com/adv-sw/lldbg">https://github.com/adv-sw/lldbg</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/adv-sw/lldbg" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/9f607682d88fb6be9b11e715af9185e1227863e7\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f653339323662396631663066396264383530306262373264636439623332396538333435626264396364306230373132646232393439323161626438343564642f6164762d73772f6c6c646267)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/adv-sw/lldbg" title="GitHub - adv-sw/lldbg: A lightweight native GUI for LLDB.">GitHub - adv-sw/lldbg: A lightweight native GUI for LLDB.</a></div><div class="message_embed_description">A lightweight native GUI for LLDB. Contribute to adv-sw/lldbg development by creating an account on GitHub.</div></div></div>



<a name="354025558"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354025558" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354025558">(Apr 28 2023 at 18:40)</a>:</h4>
<p>With above fix, the following is hit : <a href="https://github.com/adv-sw/lldbg/blob/master/src/Application.cpp#L2127">https://github.com/adv-sw/lldbg/blob/master/src/Application.cpp#L2127</a></p>
<p>without it, get an exception. That's all I currently know.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/adv-sw/lldbg/blob/master/src/Application.cpp#L2127" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/9f607682d88fb6be9b11e715af9185e1227863e7\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f653339323662396631663066396264383530306262373264636439623332396538333435626264396364306230373132646232393439323161626438343564642f6164762d73772f6c6c646267)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/adv-sw/lldbg/blob/master/src/Application.cpp#L2127" title="lldbg/Application.cpp at master · adv-sw/lldbg">lldbg/Application.cpp at master · adv-sw/lldbg</a></div><div class="message_embed_description">A lightweight native GUI for LLDB. Contribute to adv-sw/lldbg development by creating an account on GitHub.</div></div></div>



<a name="354026109"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354026109" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354026109">(Apr 28 2023 at 18:41)</a>:</h4>
<p>Specifically a lldb::eStopReasonException which isn't handled by the above code, but I can see it in the Visual Studio debugger.</p>
<p>Looks like will need a debug build of lldb to figure out why that's getting emitted.</p>



<a name="354289761"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354289761" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354289761">(Apr 29 2023 at 09:55)</a>:</h4>
<p>I'll investigate this a little but with respect, its not my problem. The patch caused a regression in a key component - lldb debugger.<br>
The patch should be backed out as debugger was functioning perfectly well before it was introduced and does so again with it removed.</p>
<p>Patch should be re-accepted when it doesnt cause failure side effect. Fixing may be non-trivial &amp; production work needs to proceed.</p>



<a name="354296068"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354296068" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354296068">(Apr 29 2023 at 10:09)</a>:</h4>
<p>An issue of contention may be, is lldbg using lldb API correctly. perhaps there is a programming error there. dont know at this point if fault is exhibited by lldb itself. will attempt to repro there when I get a minute.</p>



<a name="354297665"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354297665" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354297665">(Apr 29 2023 at 10:12)</a>:</h4>
<p>Are you trying to reuse any of the objects passed to <code>wasm_*_vec_new</code>? If so make sure to clone them. Accoring to the commit message it was documented that <code>wasm_*_vec_new</code> is taking ownership, but the implementation incorrectly cloned them instead. That commit fixes the discrepancy by changing the implementation to take ownership as documented.</p>



<a name="354297955"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354297955" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354297955">(Apr 29 2023 at 10:13)</a>:</h4>
<p>See <a href="https://github.com/bytecodealliance/wasmtime/pull/3582">https://github.com/bytecodealliance/wasmtime/pull/3582</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/3582" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/47a275b8bfe8b779dda634acbcb773f66ff138ad\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f363133346163373664643336393336353637626339353036393433643537643731656261623238376561346334646466353237323665653261663163356337632f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f33353832)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/3582" title="Fix issues with the C API vector implementation by Amanieu · Pull Request #3582 · bytecodealliance/wasmtime">Fix issues with the C API vector implementation by Amanieu · Pull Request #3582 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">While working on wasmerio/wasmer#2683 I noticed a few bugs in wasmtime's implementation of the Wasm C API, specifically the vector types.
The first issue is the incorrect implementation of Clone us...</div></div></div>



<a name="354298291"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354298291" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354298291">(Apr 29 2023 at 10:14)</a>:</h4>
<p>lldbg is an inherited project. I didnt write it. its using lldb interface. like I say, its possible there's an error in api use. unknown at this point.</p>



<a name="354298546"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354298546" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354298546">(Apr 29 2023 at 10:14)</a>:</h4>
<p>I meant the use of <code>wasm_*_vec_new</code> in the code you wrote, not in the debugger.</p>



<a name="354299227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354299227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354299227">(Apr 29 2023 at 10:16)</a>:</h4>
<p>Note that the <code>wasm_*</code> api's are implemented not just by wasmtime, but also by wasmer and some other wasm engines. Before the commit in question wasmtime's implementation didn't match the other implementations.</p>



<a name="354300204"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354300204" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354300204">(Apr 29 2023 at 10:18)</a>:</h4>
<p>will simplify repro as far as possible so we can eliminate or otherwise that concern. thanks.</p>



<a name="354620990"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354620990" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354620990">(Apr 30 2023 at 07:07)</a>:</h4>
<p>building debug lldb is taking forever. left it going overnight &amp; still hadnt linked in the morning. trying on ms azure cloud thing.<br>
if I'm to undertake heavy development work, I need a machine that can handle it. happy to contribute but not a magician :)</p>



<a name="354621104"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354621104" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354621104">(Apr 30 2023 at 07:08)</a>:</h4>
<p>my quick fix is the patch I provided which is sufficient for our purposes for the time being. this is going beyond my needs.</p>



<a name="354634561"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354634561" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354634561">(Apr 30 2023 at 08:44)</a>:</h4>
<p>I'm running a very old version of wasi. could be that's the issue if nobody else experiencing a problem. will upgrade when I can figure out where to obtain latest wasi from.</p>



<a name="354636059"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354636059" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354636059">(Apr 30 2023 at 08:54)</a>:</h4>
<p>from this : <a href="https://docs.wasmtime.dev/wasm-c.html">https://docs.wasmtime.dev/wasm-c.html</a></p>
<p>I get latest wasi by building llvm/clang for webassembly target ?</p>



<a name="354637435"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354637435" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354637435">(Apr 30 2023 at 09:02)</a>:</h4>
<p><a href="https://github.com/WebAssembly/wasi-sdk/releases">https://github.com/WebAssembly/wasi-sdk/releases</a></p>
<p>apologies, going a little all over the place at the moment getting up to date.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-sdk/releases" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/2371c7294b7f005d95d01efd60779f5d506d7b4a\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f343131323036336536613566633139373439383234373037313932663934343239633666386131306331616330616236336433373866383739353734383532372f576562417373656d626c792f776173692d73646b)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-sdk/releases" title="Releases · WebAssembly/wasi-sdk">Releases · WebAssembly/wasi-sdk</a></div><div class="message_embed_description">WASI-enabled WebAssembly C/C++ toolchain. Contribute to WebAssembly/wasi-sdk development by creating an account on GitHub.</div></div></div>



<a name="354646472"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354646472" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354646472">(Apr 30 2023 at 09:51)</a>:</h4>
<p>built lldb &amp; clang in azure cloud as my local machine apparently has issues. debug build completed. building release version too so we have clang tools latest for test compilation. slow progress, but progress. switched to wasi 20 &amp; compiled a simple test successfully.</p>



<a name="354689550"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354689550" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354689550">(Apr 30 2023 at 13:49)</a>:</h4>
<p>doh. yesterday's local lldb build failed coz I over compensated for an out of memory error &amp; made a huge swap file on that drive, leaving insufficient room for build directory, so its stalled during linking <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="354822048"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354822048" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354822048">(May 01 2023 at 09:05)</a>:</h4>
<p>update: our stuff running latest wasmtime, latest wasi, latest llvm. now we're up to date, will investigate cause of the exception.</p>



<a name="354927054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354927054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354927054">(May 01 2023 at 16:59)</a>:</h4>
<p>latest everything same behaviour as previous, with patch, works, without exception.</p>



<a name="354935258"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354935258" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354935258">(May 01 2023 at 17:35)</a>:</h4>
<p>Finally, cause of that exception.</p>
<p><a href="/user_uploads/15107/MdztSurglJESbf5hMgtuj4Tg/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/15107/MdztSurglJESbf5hMgtuj4Tg/image.png" title="image.png"><img src="/user_uploads/15107/MdztSurglJESbf5hMgtuj4Tg/image.png"></a></div>



<a name="354936009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354936009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354936009">(May 01 2023 at 17:38)</a>:</h4>
<p>dinner then will try to get my head around why its doing that.</p>



<a name="354940657"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354940657" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354940657">(May 01 2023 at 18:01)</a>:</h4>
<p>Error is : "RVA 0x0 for export ordinal table not found"</p>
<p>Currently means nothing to me. Dont yet understand what the problem is.</p>



<a name="354941500"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354941500" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354941500">(May 01 2023 at 18:04)</a>:</h4>
<p>not understanding why an ownership change rather than clone should cause that. its not a duplicate release issue as  I first thought.</p>



<a name="354941866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354941866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354941866">(May 01 2023 at 18:06)</a>:</h4>
<p>next step, I think is to simplify the repro.</p>



<a name="354944591"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/354944591" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jamey Sharp <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#354944591">(May 01 2023 at 18:17)</a>:</h4>
<p>I see Microsoft has documentation on the "export ordinal table" as part of their PE format documentation, if that helps any: <a href="https://learn.microsoft.com/en-us/windows/win32/debug/pe-format#export-ordinal-table">https://learn.microsoft.com/en-us/windows/win32/debug/pe-format#export-ordinal-table</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://learn.microsoft.com/en-us/windows/win32/debug/pe-format#export-ordinal-table" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/ca6f0df6d0c485fdc91cdcf10df670490c2092fa\/68747470733a2f2f6c6561726e2e6d6963726f736f66742e636f6d2f656e2d75732f6d656469612f6c6f676f732f6c6f676f2d6d732d736f6369616c2e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="https://learn.microsoft.com/en-us/windows/win32/debug/pe-format#export-ordinal-table" title="PE Format - Win32 apps">PE Format - Win32 apps</a></div><div class="message_embed_description">This specification describes the structure of executable (image) files and object files under the Windows family of operating systems. These files are referred to as Portable Executable (PE) and Common Object File Format (COFF) files, respectively.</div></div></div>



<a name="355030251"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355030251" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355030251">(May 02 2023 at 05:28)</a>:</h4>
<p>So, the issue appears to be  in liblldb.dll!ObjectFilePECOFF::AppendFromExportTable which is PE specific, which is Windows platform.</p>
<p>I had to patch lldb years ago to get it running on Windows. The patch wasnt accepted as they require a test for every patch &amp; I'm swamped with work as it is. Practical upshot: Fairly sure nobody else is testing on windows.</p>
<p>Here's the patch : <a href="https://pastebin.com/L1Q1d4hS">https://pastebin.com/L1Q1d4hS</a></p>
<p>Patch works latest lldb - 16.0.2</p>
<p>Not really sure what test can be provided to verify it works &amp; hence why not accepted yet.</p>
<div class="message_embed"><a class="message_embed_image" href="https://pastebin.com/L1Q1d4hS" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/0dd7fd84c0d50799f92983226fb62fb426402b54\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="https://pastebin.com/L1Q1d4hS" title="diff --git &quot;a/lldb/source/Plugins/JITLoader/GDB/JITLoaderGDB.cpp&quot; &quot;b/lldb/source - Pastebin.com">diff --git "a/lldb/source/Plugins/JITLoader/GDB/JITLoaderGDB.cpp" "b/lldb/source - Pastebin.com</a></div><div class="message_embed_description">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div>



<a name="355032134"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355032134" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355032134">(May 02 2023 at 05:42)</a>:</h4>
<p>On Windows, it appears you need to build lldb with x86 as well as web assembly target for it to function.</p>
<p>I'm using</p>
<p>cmake -S llvm  -DLLVM_TARGETS_TO_BUILD="X86;WebAssembly" -DCMAKE_BUILD_TYPE="Debug" -DLLVM_ENABLE_PROJECTS="clang;lldb;lld" -B build_d -G Ninja</p>
<p>Then : ninja lldb</p>
<p>From the build_d directory.</p>



<a name="355032496"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355032496" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355032496">(May 02 2023 at 05:44)</a>:</h4>
<p>Seem to remember there were issues with debugging native windows binaries last time I looked at this &amp; perhaps still now, though all this is irrelevant. We're not trying to do that. We're trying to figure out why the change of a memory op in wasmtime from clone to re-assign owner causes a fault in the debugger.</p>



<a name="355099804"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355099804" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355099804">(May 02 2023 at 10:18)</a>:</h4>
<p>update: compiled the simplest c program possible :</p>
<p>void _start() {}</p>
<p>ran directly under wasmtime.exe rather than our runtime, under lldbg debugger. runs clean.</p>
<p>so my bug. next steps - reduce our stuff to the point where it no longer faults to identify cause.</p>



<a name="355286433"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355286433" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355286433">(May 02 2023 at 23:59)</a>:</h4>
<p>sounds to me that I should try to find someone to have a look here.</p>



<a name="355329537"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355329537" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355329537">(May 03 2023 at 06:08)</a>:</h4>
<p>working on a minimal repro. should have something soon.</p>



<a name="355330580"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355330580" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355330580">(May 03 2023 at 06:12)</a>:</h4>
<p>the lldb patch is something I need help with. confirm resolves lldb functionality on windows &amp; accept into trunk. can maintain out of tree but seems silly. helps everyone.</p>



<a name="355354422"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355354422" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355354422">(May 03 2023 at 08:13)</a>:</h4>
<p>windows support obv not important for server based delivery but is for client front end (web browsers, etc.), coz like it or not, windows is the primary end user platform. so we must be solid there.</p>



<a name="355555286"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355555286" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355555286">(May 03 2023 at 16:48)</a>:</h4>
<p>update: got simple test case. test case running standalone works correctly. test case running as plugin for our engine faults the same way our regular web assembly plugin faults. so its something configuration specific or perhaps a fault in our engine having a side effect.</p>
<p>fun times. will isolate.</p>



<a name="355560138"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355560138" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355560138">(May 03 2023 at 17:10)</a>:</h4>
<p>wheeeeeeeee</p>



<a name="355705629"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355705629" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355705629">(May 04 2023 at 08:59)</a>:</h4>
<p>hmmm ... suspect this is bug in our engine having a side effect &amp; nothing for anyone else to worry about, but we'll see. narrowing in on it.</p>



<a name="355793689"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355793689" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355793689">(May 04 2023 at 14:32)</a>:</h4>
<p>You DID have my attention, but now I'm merely curious.</p>



<a name="355793735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355793735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355793735">(May 04 2023 at 14:32)</a>:</h4>
<p><em>think</em> I've got something</p>
<p>http:/advance-software.com/misc/repro.zip</p>
<p>extracts into your [wasmtime]/examples directory</p>
<p>so you have [wasmtime]/examples/repro <em>not</em> [wasmtime]/examples/repro/repro</p>
<p>fault: on windows, when compiled as a win64 visual studio project using included project file, wasm_module_new fails.</p>
<p>when compiled using \repro\native\make_d or make_r works - console verison.</p>



<a name="355794058"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355794058" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355794058">(May 04 2023 at 14:33)</a>:</h4>
<p>this has been really fiddly to put together so still possibility of something silly on my part.</p>



<a name="355794542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355794542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355794542">(May 04 2023 at 14:35)</a>:</h4>
<p>for those not on windows or not wanting to download that large archive which includes full wasi sdk we're linking against &amp; llvm compilation tools being used, here's the wasm native sdk code I'm using.</p>
<p><a href="https://pastebin.com/R4JSYBPC">https://pastebin.com/R4JSYBPC</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://pastebin.com/R4JSYBPC" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/0dd7fd84c0d50799f92983226fb62fb426402b54\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="https://pastebin.com/R4JSYBPC" title="/*Wasmtime failure repro.Author: Steve Williams, Advance SoftwareCom - Pastebin.com">/*Wasmtime failure repro.Author: Steve Williams, Advance SoftwareCom - Pastebin.com</a></div><div class="message_embed_description">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div>



<a name="355794716"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355794716" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355794716">(May 04 2023 at 14:35)</a>:</h4>
<p>so first step is quick skim over that anyone curious, plz. any obvious derp on my part, plz.</p>



<a name="355795351"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355795351" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355795351">(May 04 2023 at 14:37)</a>:</h4>
<p>happy to run it here so we can figure out why wasm_module_new fails &amp; that's my next job. will figure it out all the way if I can.</p>



<a name="355796304"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355796304" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355796304">(May 04 2023 at 14:40)</a>:</h4>
<p>debug build of the native win64 .exe doesn't fail, release does which is always a fun situation.<br>
they both compile to the same location as of that drop - should tweak that.</p>



<a name="355798619"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355798619" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355798619">(May 04 2023 at 14:48)</a>:</h4>
<p>update : <a href="http://advance-software.com/misc/repro_2.zip">http://advance-software.com/misc/repro_2.zip</a></p>
<p>exactly the same as the first drop except native win64 example links to repro_d.exe &amp; repro_r.exe instead of both to repro.exe</p>



<a name="355799042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355799042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355799042">(May 04 2023 at 14:49)</a>:</h4>
<p>step 1 - am I doing anything obviously stupid. <br>
step 2 - can anyone else reproduce the problem.</p>



<a name="355800613"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355800613" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355800613">(May 04 2023 at 14:53)</a>:</h4>
<p>repro doesn't contain or reference our engine so api use error, genuine wasmtime bug or I'm misunderstanding something.</p>



<a name="355806153"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355806153" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355806153">(May 04 2023 at 15:10)</a>:</h4>
<p>repro release build linking against wasmtime debug build fails so can step through wasmtime &amp; hopefully understand why. more caffeine than a look at that.</p>



<a name="355809289"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355809289" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355809289">(May 04 2023 at 15:20)</a>:</h4>
<p>can step into it but I'm rust stupid so this will be fun :)</p>



<a name="355813767"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355813767" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355813767">(May 04 2023 at 15:33)</a>:</h4>
<p>debug native app, targeting debug wasmtime correctly hits this :<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L459">https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L459</a></p>
<p>release native app, targeting debug wasmtime doesn't &amp; fails.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L459" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/e94eb790b0f9fe9f3dc4905a1b3fec13873b667e\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f646463376262313138353065656635643030366162633964353466636362363937393062343339623963356663313834316664363130643937386666386566392f62797465636f6465616c6c69616e63652f7761736d74696d65)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L459" title="wasmtime/module.rs at 4b3c50b147f9f96717becf44bcfcff2de9b06c68 · bytecodealliance/wasmtime">wasmtime/module.rs at 4b3c50b147f9f96717becf44bcfcff2de9b06c68 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">A fast and secure runtime for WebAssembly. Contribute to bytecodealliance/wasmtime development by creating an account on GitHub.</div></div></div>



<a name="355815477"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355815477" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355815477">(May 04 2023 at 15:39)</a>:</h4>
<p>not sure this is the same issue. tried replacing the clone/ownership change to see if behaviour changes &amp; it doesnt.<br>
so I still perhaps have a stupid in here.</p>



<a name="355816086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355816086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355816086">(May 04 2023 at 15:41)</a>:</h4>
<p>though regardless, this is unexpected result as far as I can tell so suggest we nail whatever this is &amp; onwards.</p>



<a name="355819444"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355819444" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355819444">(May 04 2023 at 15:55)</a>:</h4>
<p>native app release build failing here : <a href="https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L590">https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L590</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L590" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/e94eb790b0f9fe9f3dc4905a1b3fec13873b667e\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f646463376262313138353065656635643030366162633964353466636362363937393062343339623963356663313834316664363130643937386666386566392f62797465636f6465616c6c69616e63652f7761736d74696d65)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L590" title="wasmtime/module.rs at 4b3c50b147f9f96717becf44bcfcff2de9b06c68 · bytecodealliance/wasmtime">wasmtime/module.rs at 4b3c50b147f9f96717becf44bcfcff2de9b06c68 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">A fast and secure runtime for WebAssembly. Contribute to bytecodealliance/wasmtime development by creating an account on GitHub.</div></div></div>



<a name="355822663"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355822663" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355822663">(May 04 2023 at 16:06)</a>:</h4>
<p>\wasmparser-0.103.0\src\parser.rs  <br>
pub fn parse_all(self, mut data: &amp;[u8])</p>
<p>data is all 0s in the native app release build that's failing.</p>



<a name="355824385"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355824385" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355824385">(May 04 2023 at 16:12)</a>:</h4>
<p>this one is my derp. apologies. data is coming thru 0s release build. so test has an error.</p>



<a name="355827567"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355827567" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355827567">(May 04 2023 at 16:25)</a>:</h4>
<p>so, ummmm. </p>
<p>int count = fread(<a href="http://wasm.data">wasm.data</a>, file_size,1, file);</p>
<p>fixed by doing this instead :<br>
int count = fread(<a href="http://wasm.data">wasm.data</a>, 1, file_size, file);</p>
<p>have no idea why that was failing release build. </p>
<p>so test fixed &amp; currently working. which is good coz this wasnt a repro for the original problem.</p>



<a name="355827808"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355827808" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355827808">(May 04 2023 at 16:26)</a>:</h4>
<p>hence anyone looking at my repro, plz drop it for now. its not a repro for the problem we're looking at. was a test error.<br>
now I have a sane test environment will see if I can repro the actual problem.</p>



<a name="355829662"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355829662" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355829662">(May 04 2023 at 16:33)</a>:</h4>
<p>&amp; changed that to a size_t now its working</p>



<a name="355830201"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/355830201" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#355830201">(May 04 2023 at 16:35)</a>:</h4>
<p>doesnt require anyone else on this right now as we dont have a repro yet. will try again now test environment sane. update when I have something.</p>



<a name="356041380"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356041380" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356041380">(May 05 2023 at 12:32)</a>:</h4>
<p>Got it.</p>
<p>The call : </p>
<p>wasm_functype_new_1_1(val_i32, val_i32);</p>
<p>in : <a href="https://pastebin.com/ZGKuqzPt">https://pastebin.com/ZGKuqzPt</a></p>
<p>faults with whatever trunk I'm running (will update so at tip), passes with my workaround patch : <a href="https://pastebin.com/2Yt3FG9E">https://pastebin.com/2Yt3FG9E</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://pastebin.com/ZGKuqzPt" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/0dd7fd84c0d50799f92983226fb62fb426402b54\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="https://pastebin.com/ZGKuqzPt" title="/*Wasmtime failure repro.Author: Steve Williams, Advance SoftwareCom - Pastebin.com">/*Wasmtime failure repro.Author: Steve Williams, Advance SoftwareCom - Pastebin.com</a></div><div class="message_embed_description">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://pastebin.com/2Yt3FG9E" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/0dd7fd84c0d50799f92983226fb62fb426402b54\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="https://pastebin.com/2Yt3FG9E" title=" crates/c-api/src/vec.rs | 4 ++-- 1 file changed, 2 insertions(+), 2 deletions - Pastebin.com"> crates/c-api/src/vec.rs | 4 ++-- 1 file changed, 2 insertions(+), 2 deletions - Pastebin.com</a></div><div class="message_embed_description">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div>



<a name="356041795"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356041795" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356041795">(May 05 2023 at 12:33)</a>:</h4>
<p>don't think its specific to the wasm I'm loading but we'll see. will reduce to minimal example &amp; move to tip.</p>



<a name="356049026"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356049026" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356049026">(May 05 2023 at 12:57)</a>:</h4>
<p>fault exists wasmtime tip</p>



<a name="356051772"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356051772" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356051772">(May 05 2023 at 13:06)</a>:</h4>
<p>minimal repro.</p>
<p>this faults for me wasmtime trunk.</p>
<p><a href="https://pastebin.com/m2KNqPEK">https://pastebin.com/m2KNqPEK</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://pastebin.com/m2KNqPEK" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/0dd7fd84c0d50799f92983226fb62fb426402b54\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="https://pastebin.com/m2KNqPEK" title="#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;wasm.h&gt;#include &lt;wasmtime.h - Pastebin.com">#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;wasm.h&gt;#include &lt;wasmtime.h - Pastebin.com</a></div><div class="message_embed_description">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div>



<a name="356051866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356051866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356051866">(May 05 2023 at 13:07)</a>:</h4>
<p>windows - dunno about other o/s.</p>



<a name="356052790"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356052790" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356052790">(May 05 2023 at 13:09)</a>:</h4>
<p>passes with my workaround patch : <a href="https://pastebin.com/2Yt3FG9E">https://pastebin.com/2Yt3FG9E</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://pastebin.com/2Yt3FG9E" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/0dd7fd84c0d50799f92983226fb62fb426402b54\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="https://pastebin.com/2Yt3FG9E" title=" crates/c-api/src/vec.rs | 4 ++-- 1 file changed, 2 insertions(+), 2 deletions - Pastebin.com"> crates/c-api/src/vec.rs | 4 ++-- 1 file changed, 2 insertions(+), 2 deletions - Pastebin.com</a></div><div class="message_embed_description">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div>



<a name="356057946"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356057946" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356057946">(May 05 2023 at 13:26)</a>:</h4>
<p>this thread far more verbose than it needs to be. apologies.</p>
<p>reduced to the following hopefully actionable issue : <a href="https://github.com/bytecodealliance/wasmtime/issues/6347">https://github.com/bytecodealliance/wasmtime/issues/6347</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/6347" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/def45454dd69f0b8cfa70334dd6c121029b02046\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f353262326661616162616663333637396265663738633435393235393464373131383931343865653734376361336362343162643839643432313134356138612f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f36333437)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/6347" title="wasm_functype_new_1_1 &amp; similar faulting · Issue #6347 · bytecodealliance/wasmtime">wasm_functype_new_1_1 &amp; similar faulting · Issue #6347 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">Test Case #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;wasm.h&gt; #include &lt;wasmtime.h&gt; int main() { wasm_config_t* wasm_config = wasm_config_new(); wasmtime_config_debug_info_set(wasm_config, tru...</div></div></div>



<a name="356065117"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356065117" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356065117">(May 05 2023 at 13:49)</a>:</h4>
<p>thanks bjorn3  :)</p>
<p>weird api tripped me up, apparently. will rework as advised. excess allocation that way, but if its the spec, its the spec :)</p>



<a name="356066721"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356066721" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356066721">(May 05 2023 at 13:55)</a>:</h4>
<p>perhaps debug build of wasmtime could fail gracefully in that api misuse case as its quite unintuitive.</p>



<a name="356066868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356066868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356066868">(May 05 2023 at 13:55)</a>:</h4>
<p>you'd think what's effectively a constant could be reused multiple times.</p>



<a name="356067895"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356067895" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356067895">(May 05 2023 at 13:59)</a>:</h4>
<p>so we never call wasm_valtype_delete ? faults when I do so assume not, so seems odd that's an api function.</p>



<a name="356079080"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356079080" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356079080">(May 05 2023 at 14:34)</a>:</h4>
<p>resolved. thanks guys. weird api but is what it is.</p>



<a name="356082108"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356082108" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356082108">(May 05 2023 at 14:44)</a>:</h4>
<p>from a language perspective, c has no way of saying after you pass this thing to me, you may never use it again - the api own keyword must be a null macro. best you can do is pass thing ** &amp; inside the call *thing = NULL so caller cannot reuse.</p>



<a name="356085317"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356085317" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356085317">(May 05 2023 at 14:55)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">__owned</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NULL</span><span class="p">;</span>
<span class="n">void</span><span class="w"> </span><span class="n">Consume</span><span class="p">(</span><span class="n">void</span><span class="w"> </span><span class="o">**</span><span class="n">thing</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">__owned</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">thing</span><span class="p">;</span>
<span class="w">   </span><span class="o">*</span><span class="n">thing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">my_thing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">   </span><span class="n">Consume</span><span class="p">(</span><span class="o">&amp;</span><span class="n">my_thing</span><span class="w"> </span><span class="p">);</span>
<span class="w">   </span><span class="n">assert</span><span class="p">(</span><span class="n">my_thing</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">NULL</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>



<a name="356086346"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356086346" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356086346">(May 05 2023 at 14:59)</a>:</h4>
<p>or, I guess, upgrade C :)</p>



<a name="356120018"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356120018" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356120018">(May 05 2023 at 17:03)</a>:</h4>
<p>this is my new favorite soap opera</p>



<a name="356135555"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356135555" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356135555">(May 05 2023 at 18:14)</a>:</h4>
<p>apologies. haven't upgraded our wasmtime or wasi stuff in ages so had a bit of an omg what moment :)</p>
<p>but now we're up to date. thanks guys :)</p>
<p><a href="http://advance-software.com/develop">http://advance-software.com/develop</a><br>
<a href="http://advance-software.com/products/browser">http://advance-software.com/products/browser</a><br>
<a href="http://advance-software.com/xsg">http://advance-software.com/xsg</a></p>
<p>still early but we've got a next-gen browser &amp; next-gen web grammar (xsg) featuring web assembly secure programming interface, currently powered by wasmtime.</p>
<p>we're only using the wasm api so theoretically could swap out for any of the others, but happy with how things are for the now.</p>
<p>all the hard work very much appreciated.</p>
<div class="message_embed"><a class="message_embed_image" href="http://advance-software.com/develop" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/b1f8aab018684565453b07fa130bd90a0e154afe\/687474703a2f2f616476616e63652d736f6674776172652e636f6d2f696d616765732f6765745f696e66696e6974792e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="http://advance-software.com/develop" title="Advance Software">Advance Software</a></div><div class="message_embed_description">Developers of the &lt;&gt;&lt;&gt; Infinity Immersive Web Browser.</div></div></div><div class="message_embed"><a class="message_embed_image" href="http://advance-software.com/products/browser" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/b1f8aab018684565453b07fa130bd90a0e154afe\/687474703a2f2f616476616e63652d736f6674776172652e636f6d2f696d616765732f6765745f696e66696e6974792e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="http://advance-software.com/products/browser" title="Advance Software">Advance Software</a></div><div class="message_embed_description">Developers of the &lt;&gt;&lt;&gt; Infinity Immersive Web Browser.</div></div></div><div class="message_embed"><a class="message_embed_image" href="http://advance-software.com/xsg" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/b1f8aab018684565453b07fa130bd90a0e154afe\/687474703a2f2f616476616e63652d736f6674776172652e636f6d2f696d616765732f6765745f696e66696e6974792e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="http://advance-software.com/xsg" title="Advance Software">Advance Software</a></div><div class="message_embed_description">Developers of the &lt;&gt;&lt;&gt; Infinity Immersive Web Browser.</div></div></div>



<a name="356136319"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356136319" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356136319">(May 05 2023 at 18:18)</a>:</h4>
<p>happy to add some credits if there's a document for stuff like that or we can put one together.</p>



<a name="356136672"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356136672" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356136672">(May 05 2023 at 18:20)</a>:</h4>
<p>&amp; this thread can go :)</p>



<a name="356140607"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356140607" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356140607">(May 05 2023 at 18:39)</a>:</h4>
<p>WUT NO</p>



<a name="356140639"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356140639" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356140639">(May 05 2023 at 18:39)</a>:</h4>
<p>DAMMIT STEVE, PLEASE KEEP DIGGING FOR MORE</p>



<a name="356141395"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356141395" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356141395">(May 05 2023 at 18:43)</a>:</h4>
<p>I'm done for now :) debugger needs refinement but that's a side project. lldb needs that patch pushing but can maintain out of tree.<br>
fread weirdness - very odd but not my problem :) we're solid. thanks all :)</p>



<a name="356141575"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/debugger%20hitting%20breakpoint%20behaviour%20changed%20%3F/near/356141575" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/debugger.20hitting.20breakpoint.20behaviour.20changed.20.3F.html#356141575">(May 05 2023 at 18:44)</a>:</h4>
<p>&amp; wasm sdk is what it is. not a big deal, just gotta know how to drive :)</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>