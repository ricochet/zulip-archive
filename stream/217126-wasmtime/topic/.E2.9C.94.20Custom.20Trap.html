<html>
<head><meta charset="utf-8"><title>✔ Custom Trap · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20Custom.20Trap.html">✔ Custom Trap</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="391694017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20Custom%20Trap/near/391694017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vnmrd <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20Custom.20Trap.html#391694017">(Sep 18 2023 at 12:59)</a>:</h4>
<p>Is there any way to implement a custom trap? I used to code Trap::new("custom trap") in the 0.35.1 version.</p>



<a name="391714621"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20Custom%20Trap/near/391714621" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20Custom.20Trap.html#391714621">(Sep 18 2023 at 14:38)</a>:</h4>
<p>All wasmtime host functions are allowed to return <code>anyhow::Result&lt;()&gt;</code> and any error will be interpreted as a trap for wasm. The <code>Trap</code> enum is used to model wasm-specific traps, but your own errors can be converted to <code>anyhow::Error</code> which will show up as traps as well. For what you did in 0.35.1 you should be able to use <code>anyhow::bail!("custom trap")</code> for equivalent functionality (or <code>anyhow::anyhow!("custom trap")</code> to create an <code>anyhow::Error</code> object)</p>



<a name="391716972"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20Custom%20Trap/near/391716972" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vnmrd <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20Custom.20Trap.html#391716972">(Sep 18 2023 at 14:49)</a>:</h4>
<p>Great, thank you!</p>



<a name="391716976"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20Custom%20Trap/near/391716976" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20Custom.20Trap.html#391716976">(Sep 18 2023 at 14:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="651213">vnmrd</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>