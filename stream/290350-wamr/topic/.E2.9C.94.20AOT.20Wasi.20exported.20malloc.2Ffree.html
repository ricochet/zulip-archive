<html>
<head><meta charset="utf-8"><title>✔ AOT Wasi exported malloc/free · wamr · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/index.html">wamr</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/.E2.9C.94.20AOT.20Wasi.20exported.20malloc.2Ffree.html">✔ AOT Wasi exported malloc/free</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="309161796"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/%E2%9C%94%20AOT%20Wasi%20exported%20malloc/free/near/309161796" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin van Emden <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/.E2.9C.94.20AOT.20Wasi.20exported.20malloc.2Ffree.html#309161796">(Nov 11 2022 at 10:08)</a>:</h4>
<p>We posted the following issue in the WAMR github repo: <a href="https://github.com/bytecodealliance/wasm-micro-runtime/issues/1690">https://github.com/bytecodealliance/wasm-micro-runtime/issues/1690</a> . But I am uncertain whether a) we described the issue clearly b) we may be on the wrong track with our train of thought here. In the end, I presume the issue is about which malloc/free ought to be responsible when requesting a WASI AOT to allocate memory - and whether the "export" of malloc/free makes sense in that situation.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasm-micro-runtime/issues/1690" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/9a297d43055925d22c705078bc09974698f5bcbf\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f393031653230656233666635316138646233343031643265383330613831313331313064393062316135356536383662323466353662626333663263313234342f62797465636f6465616c6c69616e63652f7761736d2d6d6963726f2d72756e74696d652f6973737565732f31363930)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasm-micro-runtime/issues/1690" title="Malloc returns zero when exported for large WASI AOT binaries · Issue #1690 · bytecodealliance/wasm-micro-runtime">Malloc returns zero when exported for large WASI AOT binaries · Issue #1690 · bytecodealliance/wasm-micro-runtime</a></div><div class="message_embed_description">We autogenerate code and compile it into Wasi (SDK 13) AOT binaries that can run on different architectures using WAMR. We recently changed from non-exported to exported malloc and free on compilin...</div></div></div>



<a name="309553782"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/%E2%9C%94%20AOT%20Wasi%20exported%20malloc/free/near/309553782" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/.E2.9C.94.20AOT.20Wasi.20exported.20malloc.2Ffree.html#309553782">(Nov 14 2022 at 08:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="462617">Robin van Emden</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>