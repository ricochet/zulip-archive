<html>
<head><meta charset="utf-8"><title>zephyr mpu stack count 路 wamr 路 Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/index.html">wamr</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/zephyr.20mpu.20stack.20count.html">zephyr mpu stack count</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="313591723"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/zephyr%20mpu%20stack%20count/near/313591723" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Dunlay <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/zephyr.20mpu.20stack.20count.html#313591723">(Dec 02 2022 at 21:23)</a>:</h4>
<p>Hi there! I'm running WAMR on zephyr and I hit the MPU stack limit (4) before I hit the installed app limit (3) due to app manager, sensor framework, and two installed apps. Is the number of MPU stacks for zephyr threads arbitrarily set to 4? Is there anything I should be concerned about when increasing this limit? Currently I can override this default of 4 with the pre-processor definition: -DBH_ZEPHYR_MPU_STACK_COUNT=N</p>



<a name="313596231"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/zephyr%20mpu%20stack%20count/near/313596231" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Dunlay <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/zephyr.20mpu.20stack.20count.html#313596231">(Dec 02 2022 at 21:59)</a>:</h4>
<p>This is the code section I am referring to: <a href="https://github.com/bytecodealliance/wasm-micro-runtime/blob/main/core/shared/platform/zephyr/zephyr_thread.c#L19-L36">https://github.com/bytecodealliance/wasm-micro-runtime/blob/main/core/shared/platform/zephyr/zephyr_thread.c#L19-L36</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasm-micro-runtime/blob/main/core/shared/platform/zephyr/zephyr_thread.c#L19-L36" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/44d5abfb929f7355d49d63fb98512d161cb31c8a\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f656633333333396335626635323961376637633066643866303864353437363166643231313135323835303433626535336232623930613763363166323833612f62797465636f6465616c6c69616e63652f7761736d2d6d6963726f2d72756e74696d65)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasm-micro-runtime/blob/main/core/shared/platform/zephyr/zephyr_thread.c#L19-L36" title="wasm-micro-runtime/zephyr_thread.c at main 路 bytecodealliance/wasm-micro-runtime">wasm-micro-runtime/zephyr_thread.c at main 路 bytecodealliance/wasm-micro-runtime</a></div><div class="message_embed_description">WebAssembly Micro Runtime (WAMR). Contribute to bytecodealliance/wasm-micro-runtime development by creating an account on GitHub.</div></div></div>



<a name="314362401"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/zephyr%20mpu%20stack%20count/near/314362401" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wenyong Huang <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/zephyr.20mpu.20stack.20count.html#314362401">(Dec 07 2022 at 01:48)</a>:</h4>
<p>Hi, it should be OK to increase the thread count, limiting the max stack count to 4 is just to decrease the memory usage, since the mpu stack array must be statically defined and occupies memory.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>