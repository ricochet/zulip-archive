<html>
<head><meta charset="utf-8"><title>rfcs / issue #11 RFC: Redesign Wasmtime&#x27;s API · rfc-notifications · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/index.html">rfc-notifications</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html">rfcs / issue #11 RFC: Redesign Wasmtime&#x27;s API</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="238496523"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/238496523" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#238496523">(May 12 2021 at 15:46)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-839879808">commented</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<p>I've updated with a tweak to the APIs in languages like Python, Go, and .NET. Originally I intended that "pass the store around" wouldn't be as common there, but the behavior of the GC in Go and converting a <code>wasmtime_val_t</code> to a <code>wasmtime_func_t</code> has tipped my opinion in favor of "pass the store everyhwere" like what happens in C &amp; Rust.</p>
</blockquote>



<a name="240089042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240089042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240089042">(May 24 2021 at 18:11)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">commented</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[ ] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[ ] @cfallin</li>
<li>[ ] @sunfishcode </li>
<li>[ ] @jedisct1 </li>
<li>[ ] @fitzgen </li>
<li>[ ] @pchickey </li>
<li>[ ] @peterhuene </li>
<li>[ ] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[ ] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[ ] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[ ] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[ ] @bjorn3</li>
</ul>
</blockquote>



<a name="240089224"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240089224" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240089224">(May 24 2021 at 18:12)</a>:</h4>
<p>acfoltzer <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235768">commented</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<blockquote>
<p>[ ] @acfoltzer</p>
</blockquote>
<ul>
<li>[x] @acfoltzer</li>
</ul>
</blockquote>



<a name="240089253"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240089253" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240089253">(May 24 2021 at 18:12)</a>:</h4>
<p>acfoltzer edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235768">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<blockquote>
<ul>
<li>[ ] @acfoltzer</li>
</ul>
</blockquote>
<ul>
<li>[x] @acfoltzer</li>
</ul>
</blockquote>



<a name="240089303"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240089303" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240089303">(May 24 2021 at 18:13)</a>:</h4>
<p>pchickey edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[ ] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[ ] @cfallin</li>
<li>[ ] @sunfishcode </li>
<li>[ ] @jedisct1 </li>
<li>[ ] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[ ] @peterhuene </li>
<li>[ ] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[ ] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[ ] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[ ] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[ ] @bjorn3</li>
</ul>
</blockquote>



<a name="240089383"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240089383" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240089383">(May 24 2021 at 18:13)</a>:</h4>
<p>peterhuene edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[ ] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[ ] @cfallin</li>
<li>[ ] @sunfishcode </li>
<li>[ ] @jedisct1 </li>
<li>[ ] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[ ] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[ ] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[ ] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[ ] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[ ] @bjorn3</li>
</ul>
</blockquote>



<a name="240089475"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240089475" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240089475">(May 24 2021 at 18:14)</a>:</h4>
<p>fitzgen edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[ ] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[ ] @cfallin</li>
<li>[ ] @sunfishcode </li>
<li>[ ] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[ ] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[ ] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[ ] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[ ] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[ ] @bjorn3</li>
</ul>
</blockquote>



<a name="240089485"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240089485" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240089485">(May 24 2021 at 18:14)</a>:</h4>
<p>fitzgen edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[ ] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[ ] @cfallin</li>
<li>[ ] @sunfishcode </li>
<li>[ ] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[ ] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[ ] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[ ] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[ ] @bjorn3</li>
</ul>
</blockquote>



<a name="240091085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240091085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240091085">(May 24 2021 at 18:26)</a>:</h4>
<p>cfallin edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[ ] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[x] @cfallin</li>
<li>[ ] @sunfishcode </li>
<li>[ ] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[ ] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[ ] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[ ] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[ ] @bjorn3</li>
</ul>
</blockquote>



<a name="240092640"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240092640" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240092640">(May 24 2021 at 18:37)</a>:</h4>
<p>akirilov-arm edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[x] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[x] @cfallin</li>
<li>[ ] @sunfishcode </li>
<li>[ ] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[ ] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[ ] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[ ] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[ ] @bjorn3</li>
</ul>
</blockquote>



<a name="240092839"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240092839" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240092839">(May 24 2021 at 18:38)</a>:</h4>
<p>alexcrichton edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[x] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[x] @cfallin</li>
<li>[ ] @sunfishcode </li>
<li>[x] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[ ] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[ ] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[ ] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[ ] @bjorn3</li>
</ul>
</blockquote>



<a name="240092956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240092956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240092956">(May 24 2021 at 18:39)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847250238">commented</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Entering Final Call Period</h1>
<p><a href="https://github.com/bytecodealliance/rfcs/blob/main/accepted/rfc-process.md#making-a-decision-merge-or-close">https://github.com/bytecodealliance/rfcs/blob/main/accepted/rfc-process.md#making-a-decision-merge-or-close</a></p>
<blockquote>
<p>Once any stakeholder from a different group has signed off, the RFC will move into a 10 calendar day final comment period (FCP), long enough to ensure that other stakeholders have at least a full business week to respond.</p>
</blockquote>
<p>The FCP will end on Thursday June 3.</p>
</blockquote>



<a name="240096685"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240096685" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240096685">(May 24 2021 at 19:05)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847268392">commented</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<p>I think it may be a little too early to say how we might support a proposal like that. The discussion on that issue is largely about thread id representation which is somewhat orthogonal to the embedding API. For the embedding API though the proposal is so vague at this point I'm not sure what our design constraints are. For example with a hypothetical <code>thread.new</code> instruction:</p>
<ul>
<li>I'm not sure how the imports of the current module are handled. For example if you imported a function, how is that fuction import satisfied on the other thread? Similarly if you have a function table in the module it's not clear how that would be "forked" into another thread. This might mean recursively instantiating a whole bunch of modules, but you'd also bottom out in host closures and be faced with a question of how to "fork" them to new threads too.</li>
<li>I'm not sure how globals would be handled. Current globals, like the stack pointer, naturally don't want to be shared amongst threads and the sub-thread would want to get a fresh copy. (but where does the initial value come from?)</li>
</ul>
<p>I'm sure there's other questions too, but without knowing much about the proposal it's hard to say what the embedding API might look like. </p>
<p>My rough mental model for the <a href="https://github.com/webassembly/threads">current wasm threads proposal</a> (not to be confused with that issue for a native wasm thread) is that there'd be a <code>Store</code>-per-thread. Here <code>T</code> wouldn't need <code>Send</code> or <code>Sync</code> since the embedder would simply arrange the <code>Store</code> to be on its own thread somewhere else. Trying to fuse this with a native wasm threads proposal sort of looks like we'd need like a "store factory" where there's a built-in ability to create a <code>Store</code> on another thread. That namely does indeed need to create a <code>T</code>, and that could presumably be done with a custom trait/helper or even just <code>T: Clone</code>. This would indeed require <code>T: Send. I don't think that </code>T: Sync<code> would make sense since we provide mutable access to the </code>T<code> which means that we can't share the </code>T` across threads anyway.</p>
<p>Overall I don't think we're necessarily in a <em>bad</em> position to support a proposal like that, but it's tough to say given the current state. I do think that we're still better off than we are today where host state is littered across all sorts of host functions and such. The only state in a <code>Store</code> which is maybe not <code>Send</code> and <code>Sync</code> is the <code>T</code> itself. This means that all reasoning about thread-safety is entirely tied to <code>T</code> since everything else is threadsafe (e.g. host closures are all <code>Fn() + Send +  Sync</code>).</p>
<p>Currently there's a bunch of pieces floating around where if you connect a few and squint hard it sort of looks like an implementation of a native threads proposal, but I think there needs to be more concrete design planning and such done first.</p>
</blockquote>



<a name="240098226"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240098226" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240098226">(May 24 2021 at 19:17)</a>:</h4>
<p>alexcrichton edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[x] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[x] @cfallin</li>
<li>[ ] @sunfishcode </li>
<li>[x] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[ ] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[ ] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[ ] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[x] @bjorn3</li>
</ul>
</blockquote>



<a name="240099967"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240099967" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240099967">(May 24 2021 at 19:30)</a>:</h4>
<p>sunfishcode edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[x] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[x] @cfallin</li>
<li>[x] @sunfishcode </li>
<li>[x] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[ ] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[ ] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[ ] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[x] @bjorn3</li>
</ul>
</blockquote>



<a name="240126948"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240126948" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240126948">(May 24 2021 at 23:38)</a>:</h4>
<p>alexcrichton edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[x] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[x] @cfallin</li>
<li>[x] @sunfishcode </li>
<li>[x] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[ ] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[ ] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[x] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[x] @bjorn3</li>
</ul>
</blockquote>



<a name="240214317"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240214317" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240214317">(May 25 2021 at 16:29)</a>:</h4>
<p>alexcrichton edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[x] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[x] @cfallin</li>
<li>[x] @sunfishcode </li>
<li>[x] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[x] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[ ] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[x] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[x] @bjorn3</li>
</ul>
</blockquote>



<a name="240214331"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240214331" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240214331">(May 25 2021 at 16:29)</a>:</h4>
<p>alexcrichton edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[x] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[x] @cfallin</li>
<li>[x] @sunfishcode </li>
<li>[x] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[x] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[x] @thomastaylor312</li>
<li>[ ] @bacongobbler</li>
<li>[x] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[x] @bjorn3</li>
</ul>
</blockquote>



<a name="240214336"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240214336" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240214336">(May 25 2021 at 16:29)</a>:</h4>
<p>alexcrichton edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[x] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[x] @cfallin</li>
<li>[x] @sunfishcode </li>
<li>[x] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[ ] @mingqiusun</li>
<li>[x] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[x] @thomastaylor312</li>
<li>[x] @bacongobbler</li>
<li>[x] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[x] @bjorn3</li>
</ul>
</blockquote>



<a name="240216059"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240216059" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240216059">(May 25 2021 at 16:41)</a>:</h4>
<p>mingqiusun edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[x] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[ ] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[x] @cfallin</li>
<li>[x] @sunfishcode </li>
<li>[x] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[x] @mingqiusun</li>
<li>[x] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[x] @thomastaylor312</li>
<li>[x] @bacongobbler</li>
<li>[x] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[x] @bjorn3</li>
</ul>
</blockquote>



<a name="240247501"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/240247501" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#240247501">(May 25 2021 at 20:43)</a>:</h4>
<p>alexcrichton edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847268392">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<p>I think it may be a little too early to say how we might support a proposal like that. The discussion on that issue is largely about thread id representation which is somewhat orthogonal to the embedding API. For the embedding API though the proposal is so vague at this point I'm not sure what our design constraints are. For example with a hypothetical <code>thread.new</code> instruction:</p>
<ul>
<li>I'm not sure how the imports of the current module are handled. For example if you imported a function, how is that fuction import satisfied on the other thread? Similarly if you have a function table in the module it's not clear how that would be "forked" into another thread. This might mean recursively instantiating a whole bunch of modules, but you'd also bottom out in host closures and be faced with a question of how to "fork" them to new threads too.</li>
<li>I'm not sure how globals would be handled. Current globals, like the stack pointer, naturally don't want to be shared amongst threads and the sub-thread would want to get a fresh copy. (but where does the initial value come from?)</li>
</ul>
<p>I'm sure there's other questions too, but without knowing much about the proposal it's hard to say what the embedding API might look like. </p>
<p>My rough mental model for the <a href="https://github.com/webassembly/threads">current wasm threads proposal</a> (not to be confused with that issue for a native wasm thread) is that there'd be a <code>Store</code>-per-thread. Here <code>T</code> wouldn't need <code>Send</code> or <code>Sync</code> since the embedder would simply arrange the <code>Store</code> to be on its own thread somewhere else. Trying to fuse this with a native wasm threads proposal sort of looks like we'd need like a "store factory" where there's a built-in ability to create a <code>Store</code> on another thread. That namely does indeed need to create a <code>T</code>, and that could presumably be done with a custom trait/helper or even just <code>T: Clone</code>. This would indeed require <code>T: Send</code>. I don't think that <code>T: Sync</code> would make sense since we provide mutable access to the <code>T</code> which means that we can't share the <code>T</code> across threads anyway.</p>
<p>Overall I don't think we're necessarily in a <em>bad</em> position to support a proposal like that, but it's tough to say given the current state. I do think that we're still better off than we are today where host state is littered across all sorts of host functions and such. The only state in a <code>Store</code> which is maybe not <code>Send</code> and <code>Sync</code> is the <code>T</code> itself. This means that all reasoning about thread-safety is entirely tied to <code>T</code> since everything else is threadsafe (e.g. host closures are all <code>Fn() + Send +  Sync</code>).</p>
<p>Currently there's a bunch of pieces floating around where if you connect a few and squint hard it sort of looks like an implementation of a native threads proposal, but I think there needs to be more concrete design planning and such done first.</p>
</blockquote>



<a name="241174942"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/241174942" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#241174942">(Jun 02 2021 at 16:35)</a>:</h4>
<p>bnjbvr edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[x] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[x] @bnjbvr</li>
<li>[ ] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[x] @cfallin</li>
<li>[x] @sunfishcode </li>
<li>[x] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[x] @mingqiusun</li>
<li>[x] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[x] @thomastaylor312</li>
<li>[x] @bacongobbler</li>
<li>[x] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[x] @bjorn3</li>
</ul>
</blockquote>



<a name="241360427"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/241360427" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#241360427">(Jun 03 2021 at 08:16)</a>:</h4>
<p>repi <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-853679911">commented</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<p>Good stuff! <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>
</blockquote>



<a name="241360622"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/241360622" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#241360622">(Jun 03 2021 at 08:18)</a>:</h4>
<p>bnjbvr edited a <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-847235017">comment</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<h1>Motion to finalize with a disposition to merge</h1>
<p>We've reached out to various Wasmtime embedders, and have received very positive feedback on the changes proposed here. Additionally, we have full implementations of the proposal for <a href="https://github.com/bytecodealliance/wasmtime/pull/2897">Wasmtime's Rust and C-APIs</a>, <a href="https://github.com/alexcrichton/wasmtime-py/tree/new-api">wasmtime-py</a>, and <a href="https://github.com/alexcrichton/wasmtime-go/tree/new-api">wasmtime-go</a>.</p>
<p>We also analyzed the impact on various existing embeddings, and found it to be very reasonable in all cases.</p>
<p>As such, we proposing finalizing this RFC with a disposition to merge it.</p>
<h1>Stakeholders sign-off</h1>
<p>Given the broad impact of these changes, we decided to also tag a broad list of contributors and Wasmtime embedders for feedback.</p>
<h2>Arm</h2>
<ul>
<li>[x] @akirilov-arm</li>
</ul>
<h2>DFINITY</h2>
<ul>
<li>[ ] @granstrom</li>
</ul>
<h2>Embark Studios</h2>
<ul>
<li>[x] @bnjbvr</li>
<li>[x] @repi</li>
</ul>
<h2>Fastly</h2>
<ul>
<li>[x] @cfallin</li>
<li>[x] @sunfishcode </li>
<li>[x] @jedisct1 </li>
<li>[x] @fitzgen </li>
<li>[x] @pchickey </li>
<li>[x] @peterhuene </li>
<li>[x] @acfoltzer </li>
<li>[ ] @iximeow </li>
</ul>
<h2>Intel</h2>
<ul>
<li>[x] @mingqiusun</li>
<li>[x] @abrown </li>
<li>[ ] @jlb6740</li>
</ul>
<h2>Microsoft</h2>
<ul>
<li>[x] @thomastaylor312</li>
<li>[x] @bacongobbler</li>
<li>[x] @radu-matei</li>
</ul>
<h2>Mozilla</h2>
<ul>
<li>[ ] @julian-seward1 </li>
<li>[ ] @yurydelendik</li>
</ul>
<h2>IBM</h2>
<ul>
<li>[ ] @uweigand</li>
</ul>
<h2>wasmCloud</h2>
<ul>
<li>[ ] @autodidaddict</li>
</ul>
<h2>Unaffiliated</h2>
<ul>
<li>[x] @bjorn3</li>
</ul>
</blockquote>



<a name="241395530"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20issue%20%2311%20RFC%3A%20Redesign%20Wasmtime%27s%20API/near/241395530" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20issue.20.2311.20RFC.3A.20Redesign.20Wasmtime.27s.20API.html#241395530">(Jun 03 2021 at 14:09)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/rfcs/pull/11#issuecomment-853898927">commented</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/11">issue #11</a>:</p>
<blockquote>
<p>Ok the FCP period has now finished and no objections have been raised. Time to merge then!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>