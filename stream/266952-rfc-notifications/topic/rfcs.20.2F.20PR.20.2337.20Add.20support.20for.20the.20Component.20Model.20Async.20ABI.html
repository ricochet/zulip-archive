<html>
<head><meta charset="utf-8"><title>rfcs / PR #37 Add support for the Component Model Async ABI · rfc-notifications · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/index.html">rfc-notifications</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html">rfcs / PR #37 Add support for the Component Model Async ABI</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="475608855"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475608855" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475608855">(Oct 08 2024 at 16:19)</a>:</h4>
<p>dicej opened <a href="https://github.com/bytecodealliance/rfcs/pull/37">PR #37</a> from <code>dicej:component-async</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Add support for the Component Model <a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/Async.md">Async
ABI</a> to <code>wasm-tools</code>, <code>wit-bindgen</code>, and <code>wasmtime</code>.</p>
<p><a href="https://github.com/dicej/rfcs/blob/component-async/accepted/component-model-async.md">Rendered RFC</a></p>
</blockquote>



<a name="475613615"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475613615" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475613615">(Oct 08 2024 at 16:35)</a>:</h4>
<p>tschneidereit submitted <a href="https://github.com/bytecodealliance/rfcs/pull/37#pullrequestreview-2355007295">PR review</a>:</p>
<blockquote>
<p>Hooray! <span aria-label="partying face" class="emoji emoji-1f973" role="img" title="partying face">:partying_face:</span></p>
<p>From a brief skim, the parts of this that I'm qualified to have an opinion on all look good to me. I left a couple of inline comments on specific aspects, but they're not particularly important.</p>
</blockquote>



<a name="475613616"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475613616" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475613616">(Oct 08 2024 at 16:35)</a>:</h4>
<p>tschneidereit created <a href="https://github.com/bytecodealliance/rfcs/pull/37#discussion_r1792192464">PR review comment</a>:</p>
<blockquote>
<p>I think to some degree we don't really need this kind of discussion: the "what else could we do" question has been answered at the spec level, and we'd have had a ton of opportunity to voice disagreement there. At this point, I think we should handle this the same as other features, such as the recent support for <a href="https://github.com/bytecodealliance/rfcs/blob/main/accepted/tail-calls.md#rationale-and-alternatives">Tail Calls</a>.</p>
<p>As such, I wonder if there are possible alternative approaches to implementing support of the spec feature that would be worth discussing here? And if not, is there a way to explain why that is the case as part of a "there really isn't much of an alternative" paragraph?</p>
</blockquote>



<a name="475613618"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475613618" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475613618">(Oct 08 2024 at 16:35)</a>:</h4>
<p>tschneidereit created <a href="https://github.com/bytecodealliance/rfcs/pull/37#discussion_r1792187611">PR review comment</a>:</p>
<blockquote>
<p>How (un)likely are scenarios in which all imports, but only some exports should be async, or vice-versa? If they might be reasonably likely, it might make sense to support <code>All</code> or <code>None</code> for one, and <code>Some</code> for the other. I assume you have a much better intuition on this than I do, though</p>
</blockquote>



<a name="475613721"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475613721" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475613721">(Oct 08 2024 at 16:36)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/rfcs/pull/37">PR #37</a>.</p>



<a name="475621021"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475621021" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475621021">(Oct 08 2024 at 17:13)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/rfcs/pull/37#pullrequestreview-2355088533">PR review</a>.</p>



<a name="475621023"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475621023" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475621023">(Oct 08 2024 at 17:13)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/rfcs/pull/37#discussion_r1792238404">PR review comment</a>:</p>
<blockquote>
<p>Good point.  If anything, I'd be tempted to remove the <code>All</code> option entirely, given that I expect most worlds will contain mostly non-blocking functions (e.g. <code>wasi:http</code> which contains just two functions which actually do I/O: <code>wasi:http/types#[static]body.finish</code> and <code>wasi:http/handler#handle</code>).  And I suppose <code>None</code> is even more redundant; we could reduce it all to:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">AsyncConfig</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">imports</span><span class="p">:</span><span class="w"> </span><span class="nc">HashSet</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">  </span><span class="n">exports</span><span class="p">:</span><span class="w"> </span><span class="nc">HashSet</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>Note that the proposed <code>nonblocking</code> function attribute will allow us to do the right thing automatically without any configuration required.</p>
</blockquote>



<a name="475626297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475626297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475626297">(Oct 08 2024 at 17:36)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/rfcs/pull/37">PR #37</a>.</p>



<a name="475626482"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475626482" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475626482">(Oct 08 2024 at 17:37)</a>:</h4>
<p>dicej edited <a href="https://github.com/bytecodealliance/rfcs/pull/37">PR #37</a>:</p>
<blockquote>
<p>Add support for the Component Model <a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/Async.md">Async ABI</a> to <code>wasm-tools</code>, <code>wit-bindgen</code>, and <code>wasmtime</code>.</p>
<p><a href="https://github.com/dicej/rfcs/blob/component-async/accepted/component-model-async.md">Rendered RFC</a></p>
</blockquote>



<a name="475628958"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475628958" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475628958">(Oct 08 2024 at 17:47)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/rfcs/pull/37">PR #37</a>.</p>



<a name="475674847"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475674847" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475674847">(Oct 08 2024 at 21:26)</a>:</h4>
<p>dicej merged <a href="https://github.com/bytecodealliance/rfcs/pull/37">PR #37</a>.</p>



<a name="475690362"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475690362" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475690362">(Oct 08 2024 at 23:01)</a>:</h4>
<p>dicej <a href="https://github.com/bytecodealliance/rfcs/pull/37#issuecomment-2400961604">commented</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/37">PR #37</a>:</p>
<blockquote>
<p>Ugh, I definitely did _not_ mean to merge this.  I must have pushed to origin/main by mistake.  Sorry; will revert.</p>
</blockquote>



<a name="475691082"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475691082" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RFC notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475691082">(Oct 08 2024 at 23:08)</a>:</h4>
<p>dicej <a href="https://github.com/bytecodealliance/rfcs/pull/37#issuecomment-2400968636">commented</a> on <a href="https://github.com/bytecodealliance/rfcs/pull/37">PR #37</a>:</p>
<blockquote>
<p>I've reverted all the earlier commits, rebased, and opened <a href="https://github.com/bytecodealliance/rfcs/pull/38">https://github.com/bytecodealliance/rfcs/pull/38</a> -- please direct further discussion there.  Sorry again for the confusion!</p>
<p>BTW, would it make sense to tweak the branch protection rules in this repo to block pushing straight to main?  Asking for a friend.</p>
</blockquote>



<a name="475956995"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/266952-rfc-notifications/topic/rfcs%20/%20PR%20%2337%20Add%20support%20for%20the%20Component%20Model%20Async%20ABI/near/475956995" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Till Schneidereit <a href="https://bytecodealliance.github.io/zulip-archive/stream/266952-rfc-notifications/topic/rfcs.20.2F.20PR.20.2337.20Add.20support.20for.20the.20Component.20Model.20Async.20ABI.html#475956995">(Oct 09 2024 at 21:00)</a>:</h4>
<p>you can let your friend know that the <code>main</code> branch is now protected, as it should be</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>