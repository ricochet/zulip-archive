<html>
<head><meta charset="utf-8"><title>#5326 · wasi-threads · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/349267-wasi-threads/index.html">wasi-threads</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/349267-wasi-threads/topic/.235326.html">#5326</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="319642731"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/349267-wasi-threads/topic/%235326/near/319642731" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Brown <a href="https://bytecodealliance.github.io/zulip-archive/stream/349267-wasi-threads/topic/.235326.html#319642731">(Jan 05 2023 at 18:10)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span>, <span class="user-mention" data-user-id="516084">@bstrie</span>, <span class="user-mention" data-user-id="449156">@Harald Hoyer</span>, <span class="user-mention" data-user-id="260875">@Nathaniel McCallum</span>, <span class="user-mention" data-user-id="254083">@Dan Gohman</span>: hopefully everyone is back from vacation (I am!) so I wanted to revive discussions we had had previously about <a href="https://github.com/bytecodealliance/wasmtime/pull/5326">https://github.com/bytecodealliance/wasmtime/pull/5326</a> (Harald's PR to remove mutability in wasi-common that Benjamin took over). Before I left in December I published <a href="https://github.com/bytecodealliance/wasmtime/pull/5484">https://github.com/bytecodealliance/wasmtime/pull/5484</a>, which implements wasi-threads in Wasmtime based on #5326 and a few other PRs -- those other PRs have now been merged and #5326 is the last big roadblock (IMHO) to making threads available in Wasmtime. <span class="user-mention" data-user-id="516084">@bstrie</span>, you mentioned to me somewhere that you had talked to <span class="user-mention" data-user-id="254083">@Dan Gohman</span> and figured out something that would help this move forward? Can we discuss here and see what is necessary to get this merged? <span class="user-mention" data-user-id="253994">@Alex Crichton</span> had some comments in his review as well that might need to get factored in to all of this.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/5326" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/2657c05afeca0fc8bf4571004d719e3e7a5df939\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f363261336164383362613334393864336634313264656534663234356335616639313039656666363338396634646264323033636663396635323534613134662f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f35333236)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/5326" title="feat:  remove mutability from the WasiCtx Table by haraldh · Pull Request #5326 · bytecodealliance/wasmtime">feat:  remove mutability from the WasiCtx Table by haraldh · Pull Request #5326 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This patch adds interior mutability to the WasiCtx Table and the Table elements.
Major pain points:

File only needs RwLock&lt;cap_std::fs::File&gt; to implement File::set_fdflags() on Windows, because o...</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/5484" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/ed2524b8992c503d4e308e1588294d79917727ad\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f316364656132613034653131353431663061643332343266393131666432376434653633623363666161353231396234343138633237623962653936383236322f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f35343834)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/5484" title="wasi-threads: an initial implementation by abrown · Pull Request #5484 · bytecodealliance/wasmtime">wasi-threads: an initial implementation by abrown · Pull Request #5484 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This PR builds on several other under-review PRs to demonstrate a working wasi-threads implementation in Wasmtime. The first three commits are cherry-picked from the following PRs:

#5326
#5471
#54...</div></div></div>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>