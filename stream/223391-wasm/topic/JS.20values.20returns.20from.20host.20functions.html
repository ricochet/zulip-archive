<html>
<head><meta charset="utf-8"><title>JS values returns from host functions · wasm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/index.html">wasm</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/JS.20values.20returns.20from.20host.20functions.html">JS values returns from host functions</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="290248165"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/JS%20values%20returns%20from%20host%20functions/near/290248165" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dominic Elm <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/JS.20values.20returns.20from.20host.20functions.html#290248165">(Jul 20 2022 at 15:08)</a>:</h4>
<p>Is it specified somewhere how non-numeric values are treated if returned from a host function back to WASM? I saw that if I e.g. return an object <code>{}</code> or some other value that doesn't match one of WASM's types it converts that to <code>0</code>. Is that in the spec somewhere or is it up to the host runtime to decide how to convert the values when returned?</p>



<a name="290249094"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/JS%20values%20returns%20from%20host%20functions/near/290249094" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dominic Elm <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/JS.20values.20returns.20from.20host.20functions.html#290249094">(Jul 20 2022 at 15:14)</a>:</h4>
<p>I looked here <a href="https://webassembly.github.io/spec/js-api/index.html#instances">https://webassembly.github.io/spec/js-api/index.html#instances</a> but didn't find anything. Maybe I missed it.</p>



<a name="290249497"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/JS%20values%20returns%20from%20host%20functions/near/290249497" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/JS.20values.20returns.20from.20host.20functions.html#290249497">(Jul 20 2022 at 15:18)</a>:</h4>
<p>I think you're looking for <code>ToWebAssemblyValue</code> and <code>ToJSValue</code></p>
<p><a href="https://webassembly.github.io/spec/js-api/index.html#towebassemblyvalue">https://webassembly.github.io/spec/js-api/index.html#towebassemblyvalue</a></p>
<p><a href="https://webassembly.github.io/spec/js-api/index.html#tojsvalue">https://webassembly.github.io/spec/js-api/index.html#tojsvalue</a></p>



<a name="290249605"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/JS%20values%20returns%20from%20host%20functions/near/290249605" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/JS.20values.20returns.20from.20host.20functions.html#290249605">(Jul 20 2022 at 15:18)</a>:</h4>
<p>used in the spec here: <a href="https://webassembly.github.io/spec/js-api/index.html#call-an-exported-function">https://webassembly.github.io/spec/js-api/index.html#call-an-exported-function</a></p>



<a name="290344712"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/JS%20values%20returns%20from%20host%20functions/near/290344712" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dominic Elm <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/JS.20values.20returns.20from.20host.20functions.html#290344712">(Jul 21 2022 at 07:57)</a>:</h4>
<p>Thanks so much <span class="user-mention" data-user-id="253990">@fitzgen (he/him)</span> <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span></p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>