<html>
<head><meta charset="utf-8"><title>class/object structures in wasm · wasm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/index.html">wasm</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html">class/object structures in wasm</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="350040046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350040046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Lee <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350040046">(Apr 14 2023 at 20:24)</a>:</h4>
<p>i'm trying to wrap my head around wasm representation of different structures. how would one define/represent an object definition in wasm?  would that be a module?  or would a module more closely align with the application itself?</p>



<a name="350040138"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350040138" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Lee <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350040138">(Apr 14 2023 at 20:25)</a>:</h4>
<p>i.e., is a module an application? or does an application consist of multiple modules linked together? it feels more like the former.</p>



<a name="350041003"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350041003" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350041003">(Apr 14 2023 at 20:30)</a>:</h4>
<p>In the pre-components world, a WASI "command" module is an application</p>



<a name="350041187"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350041187" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350041187">(Apr 14 2023 at 20:31)</a>:</h4>
<p>There are various ways to link modules together, but nothing really standardized</p>



<a name="350041249"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350041249" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350041249">(Apr 14 2023 at 20:32)</a>:</h4>
<p>The component model aims to standardize a particular way of linking modules together</p>



<a name="350041319"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350041319" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Lee <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350041319">(Apr 14 2023 at 20:32)</a>:</h4>
<p>ok so that sounds like roughly object == module in that sense.  (coming from a jvm background)</p>



<a name="350041374"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350041374" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Lee <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350041374">(Apr 14 2023 at 20:33)</a>:</h4>
<p>reading through various wast examples seem to support that.</p>



<a name="350041568"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350041568" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350041568">(Apr 14 2023 at 20:34)</a>:</h4>
<p>A closer analog for JVM would be a package, probably. There aren't any (native) "objects" in wasm</p>



<a name="350041644"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350041644" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Lee <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350041644">(Apr 14 2023 at 20:34)</a>:</h4>
<p>maybe via name mangling and paramater passing i can fake out the instance method scenario.</p>



<a name="350041693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350041693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Lee <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350041693">(Apr 14 2023 at 20:35)</a>:</h4>
<p>yeah.  i've been trying to figure out how to emulate that.</p>



<a name="350041991"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350041991" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350041991">(Apr 14 2023 at 20:37)</a>:</h4>
<p>There will be "resource types" Pretty Soon which are intended to model things like that. In the meantime I think the most common approach has been to represent object references with integer handles that are manually tracked in a table</p>



<a name="350042043"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350042043" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350042043">(Apr 14 2023 at 20:37)</a>:</h4>
<p>a key distinction between Wasm and the JVM (or other OOP runtimes like .NET) is its memory storage model -- Wasm gives each module a linear store ("C-style addressed memory") and the main approach in core Wasm so far has been to put the runtime on top of that</p>



<a name="350042133"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350042133" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350042133">(Apr 14 2023 at 20:38)</a>:</h4>
<p>e.g. with SpiderMonkey-on-Wasm, JS objects are managed by the usual SpiderMonkey GC, and this lives inside of the module and allocates storage out of the linear address space</p>



<a name="350042188"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350042188" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Lee <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350042188">(Apr 14 2023 at 20:38)</a>:</h4>
<p>interesting. like off-heap storage in the jvm.</p>



<a name="350042197"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350042197" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350042197">(Apr 14 2023 at 20:38)</a>:</h4>
<p>a challenge with a module-is-an-object mapping instead will be that there are no first-class instances; i.e. there's no direct mapping for "new T"</p>



<a name="350042198"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350042198" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350042198">(Apr 14 2023 at 20:38)</a>:</h4>
<p>See for example: <a href="https://github.com/WebAssembly/wasi-http/blob/main/wit/types.wit#L76-L93">https://github.com/WebAssembly/wasi-http/blob/main/wit/types.wit#L76-L93</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-http/blob/main/wit/types.wit#L76-L93" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/9166f15f27d367ebcd353d5ac4d212a8dc3beb14\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f336331316461663039633135376633303036373537333430313039643733626635373333303265323831386433353532373633393063626238323462616131302f576562417373656d626c792f776173692d68747470)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-http/blob/main/wit/types.wit#L76-L93" title="wasi-http/types.wit at main · WebAssembly/wasi-http">wasi-http/types.wit at main · WebAssembly/wasi-http</a></div><div class="message_embed_description">Contribute to WebAssembly/wasi-http development by creating an account on GitHub.</div></div></div>



<a name="350042232"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350042232" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350042232">(Apr 14 2023 at 20:39)</a>:</h4>
<p>rather the shape of the instance graph is static and fixed as defined in the component</p>



<a name="350042573"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/223391-wasm/topic/class/object%20structures%20in%20wasm/near/350042573" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Lee <a href="https://bytecodealliance.github.io/zulip-archive/stream/223391-wasm/topic/class.2Fobject.20structures.20in.20wasm.html#350042573">(Apr 14 2023 at 20:41)</a>:</h4>
<p>some funky stuff there.  i love it.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>